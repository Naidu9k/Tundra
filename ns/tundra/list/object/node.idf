<?xml version="1.0" encoding="UTF-8"?>

<Values version="2.0">
  <value name="node_type">interface</value>
  <value name="node_nsName">tundra.list.object</value>
  <value name="shared">Ly8gcmV0dXJucyBhIG5ldyBhcnJheSwgd2l0aCB0aGUgZ2l2ZW4gZWxlbWVudCBpbnNlcnRlZCBh
dCB0aGUgZW5kCnB1YmxpYyBzdGF0aWMgPFQ+IFRbXSBhcHBlbmQoVFtdIGFycmF5LCBUIGl0ZW0s
IENsYXNzPFQ+IGtsYXNzKSB7CiAgICByZXR1cm4gaW5zZXJ0KGFycmF5LCBpdGVtLCAtMSwga2xh
c3MpOwp9CgovLyByZXR1cm5zIGEgbmV3IGFycmF5LCB3aXRoIHRoZSBnaXZlbiBlbGVtZW50IGlu
c2VydGVkIGF0IHRoZSBlbmQKcHVibGljIHN0YXRpYyA8VD4gdm9pZCBhcHBlbmQoSURhdGEgcGlw
ZWxpbmUsIENsYXNzPFQ+IGtsYXNzKSB7CiAgICBJRGF0YUN1cnNvciBjdXJzb3IgPSBwaXBlbGlu
ZS5nZXRDdXJzb3IoKTsKCiAgICB0cnkgewogICAgICAgIFRbXSBsaXN0ID0gKFRbXSlJRGF0YVV0
aWwuZ2V0T2JqZWN0QXJyYXkoY3Vyc29yLCAiJGxpc3QiKTsKICAgICAgICBUIGl0ZW0gPSAoVClJ
RGF0YVV0aWwuZ2V0KGN1cnNvciwgIiRpdGVtIik7CgogICAgICAgIGxpc3QgPSBhcHBlbmQobGlz
dCA9PSBudWxsID8gbnVsbCA6IGphdmEudXRpbC5BcnJheXMuY29weU9mKGxpc3QsIGxpc3QubGVu
Z3RoLCAoQ2xhc3M8VFtdPilqYXZhLmxhbmcucmVmbGVjdC5BcnJheS5uZXdJbnN0YW5jZShrbGFz
cywgMCkuZ2V0Q2xhc3MoKSksIGl0ZW0sIGtsYXNzKTsKCiAgICAgICAgaWYgKGxpc3QgIT0gbnVs
bCkgSURhdGFVdGlsLnB1dChjdXJzb3IsICIkbGlzdCIsIGxpc3QpOwogICAgfSBmaW5hbGx5IHsK
ICAgICAgICBjdXJzb3IuZGVzdHJveSgpOwogICAgfQp9CgovLyByZXR1cm5zIHRoZSBmaXJzdCBu
b24tbnVsbCBpdGVtIGZyb20gdGhlIGdpdmVuIGxpc3QsIG9yIGRlZmF1bHRWYWx1ZSBpZiBhbGwg
aXRlbXMgYXJlIG51bGwKcHVibGljIHN0YXRpYyA8VD4gVCBjb2FsZXNjZShUW10gbGlzdCwgVCBk
ZWZhdWx0VmFsdWUpIHsKICAgIFQgcmVzdWx0ID0gbnVsbDsKCiAgICBpZiAobGlzdCAhPSBudWxs
ICYmIGxpc3QubGVuZ3RoID4gMCkgewogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbGlzdC5s
ZW5ndGg7IGkrKykgewogICAgICAgICAgICByZXN1bHQgPSBsaXN0W2ldOwogICAgICAgICAgICBp
ZiAocmVzdWx0ICE9IG51bGwpIGJyZWFrOwogICAgICAgIH0KICAgIH0KICAgIGlmIChyZXN1bHQg
PT0gbnVsbCkgcmVzdWx0ID0gZGVmYXVsdFZhbHVlOwoKICAgIHJldHVybiByZXN1bHQ7Cn0KCi8v
IHJldHVybnMgdGhlIGZpcnN0IG5vbi1udWxsIGl0ZW0gZnJvbSB0aGUgZ2l2ZW4gbGlzdApwdWJs
aWMgc3RhdGljIDxUPiBUIGNvYWxlc2NlKFRbXSBsaXN0KSB7CiAgICByZXR1cm4gY29hbGVzY2Uo
bGlzdCwgbnVsbCk7Cn0KCi8vIHJldHVybnMgYSBuZXcgYXJyYXkgd2l0aCBhbGwgbnVsbCBlbGVt
ZW50cyByZW1vdmVkCnB1YmxpYyBzdGF0aWMgPFQ+IFRbXSBjb21wYWN0KFRbXSBhcnJheSkgewog
ICAgaWYgKGFycmF5ID09IG51bGwpIHJldHVybiBhcnJheTsKCiAgICBqYXZhLnV0aWwuTGlzdDxU
PiBsaXN0ID0gbmV3IGphdmEudXRpbC5BcnJheUxpc3Q8VD4oYXJyYXkubGVuZ3RoKTsKCiAgICBm
b3IgKGludCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKGFycmF5
W2ldICE9IG51bGwpIGxpc3QuYWRkKGFycmF5W2ldKTsKICAgIH0KCiAgICByZXR1cm4gbGlzdC50
b0FycmF5KGphdmEudXRpbC5BcnJheXMuY29weU9mKGFycmF5LCAwKSk7Cn0KCi8vIHJldHVybnMg
YSBuZXcgYXJyYXkgd2hpY2ggY29udGFpbnMgYWxsIHRoZSBlbGVtZW50cyBmcm9tIHRoZSBnaXZl
biBhcnJheXMKcHVibGljIHN0YXRpYyA8VD4gVFtdIGNvbmNhdGVuYXRlKFRbXSBhcnJheSwgVFtd
IGl0ZW1zKSB7CiAgICBpZiAoYXJyYXkgPT0gbnVsbCkgcmV0dXJuIGl0ZW1zOwogICAgaWYgKGl0
ZW1zID09IG51bGwpIHJldHVybiBhcnJheTsKCiAgICBqYXZhLnV0aWwuTGlzdDxUPiBsaXN0ID0g
bmV3IGphdmEudXRpbC5BcnJheUxpc3Q8VD4oYXJyYXkubGVuZ3RoICsgaXRlbXMubGVuZ3RoKTsK
CiAgICBqYXZhLnV0aWwuQ29sbGVjdGlvbnMuYWRkQWxsKGxpc3QsIGFycmF5KTsKICAgIGphdmEu
dXRpbC5Db2xsZWN0aW9ucy5hZGRBbGwobGlzdCwgaXRlbXMpOwoKICAgIHJldHVybiBsaXN0LnRv
QXJyYXkoamF2YS51dGlsLkFycmF5cy5jb3B5T2YoYXJyYXksIDApKTsKfQoKLy8gcmV0dXJucyBv
bmx5IHRoZSBpdGVtcyBpbiB4IHRoYXQgYXJlIG5vdCBhbHNvIGluIHkKcHVibGljIHN0YXRpYyA8
VD4gVFtdIGRpZmZlcmVuY2UoVFtdIHgsIFRbXSB5KSB7CiAgICBpZiAoeCA9PSBudWxsIHx8IHkg
PT0gbnVsbCkgcmV0dXJuIHg7CgogICAgamF2YS51dGlsLkxpc3Q8VD4gZCA9IG5ldyBqYXZhLnV0
aWwuQXJyYXlMaXN0PFQ+KHgubGVuZ3RoKTsKICAgIGQuYWRkQWxsKGphdmEudXRpbC5BcnJheXMu
YXNMaXN0KHgpKTsKICAgIGQucmVtb3ZlQWxsKGphdmEudXRpbC5BcnJheXMuYXNMaXN0KHkpKTsK
CiAgICByZXR1cm4gZC50b0FycmF5KGphdmEudXRpbC5BcnJheXMuY29weU9mKHgsIDApKTsKfQoK
Ly8gcmVtb3ZlcyB0aGUgZWxlbWVudCBhdCB0aGUgZ2l2ZW4gaW5kZXggZnJvbSB0aGUgZ2l2ZW4g
bGlzdApwdWJsaWMgc3RhdGljIDxUPiBUW10gZHJvcChUW10gYXJyYXksIFN0cmluZyBpbmRleCkg
ewogICAgcmV0dXJuIGRyb3AoYXJyYXksIEludGVnZXIucGFyc2VJbnQoaW5kZXgpKTsKfQoKLy8g
cmVtb3ZlcyB0aGUgZWxlbWVudCBhdCB0aGUgZ2l2ZW4gaW5kZXggZnJvbSB0aGUgZ2l2ZW4gbGlz
dApwdWJsaWMgc3RhdGljIDxUPiBUW10gZHJvcChUW10gYXJyYXksIGludCBpbmRleCkgewogICAg
aWYgKGFycmF5ICE9IG51bGwpIHsKICAgICAgICAvLyBzdXBwb3J0IHJldmVyc2UvdGFpbCBpbmRl
eGluZwogICAgICAgIGlmIChpbmRleCA8IDApIGluZGV4ICs9IGFycmF5Lmxlbmd0aDsKICAgICAg
ICBpZiAoaW5kZXggPCAwIHx8IGFycmF5Lmxlbmd0aCA8PSBpbmRleCkgdGhyb3cgbmV3IEFycmF5
SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbihpbmRleCk7CgogICAgICAgIFRbXSBoZWFkID0gc2xp
Y2UoYXJyYXksIDAsIGluZGV4KTsKICAgICAgICBUW10gdGFpbCA9IHNsaWNlKGFycmF5LCBpbmRl
eCArIDEsIGFycmF5Lmxlbmd0aCAtIGluZGV4KTsKCiAgICAgICAgYXJyYXkgPSBjb25jYXRlbmF0
ZShoZWFkLCB0YWlsKTsKICAgIH0KCiAgICByZXR1cm4gYXJyYXk7Cn0KCi8vIGludm9rZXMgdGhl
IGdpdmVuIHNlcnZpY2UgZm9yIGVhY2ggZWxlbWVudCBpbiB0aGUgYXJyYXkKcHVibGljIHN0YXRp
YyA8VD4gdm9pZCBlYWNoKFRbXSBhcnJheSwgU3RyaW5nIHNlcnZpY2UsIElEYXRhIHBpcGVsaW5l
LCBTdHJpbmcgaW5wdXQpIHRocm93cyBTZXJ2aWNlRXhjZXB0aW9uIHsKICAgIG1hcChhcnJheSwg
c2VydmljZSwgcGlwZWxpbmUsIGlucHV0LCBudWxsKTsKfQoKLy8gcmV0dXJucyB0cnVlIGlmIHRo
ZSBnaXZlbiBhcnJheXMgYXJlIGVxdWFsCnB1YmxpYyBzdGF0aWMgPFQ+IGJvb2xlYW4gZXF1YWwo
VFtdIHgsIFRbXSB5KSB7CiAgICBib29sZWFuIHJlc3VsdCA9IHRydWU7CgogICAgaWYgKHggIT0g
bnVsbCAmJiB5ICE9IG51bGwpIHsKICAgICAgICByZXN1bHQgPSAoeC5sZW5ndGggPT0geS5sZW5n
dGgpOwoKICAgICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBp
IDwgeC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0ICYmIHR1
bmRyYS5vYmplY3QuZXF1YWwoeFtpXSwgeVtpXSk7CiAgICAgICAgICAgICAgICBpZiAoIXJlc3Vs
dCkgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9IGVsc2UgewogICAgICAgIHJl
c3VsdCA9ICh4ID09IG51bGwgJiYgeSA9PSBudWxsKTsKICAgIH0KCiAgICByZXR1cm4gcmVzdWx0
Owp9CgovLyBmaWx0ZXJzIHRoZSBnaXZlbiBsaXN0IHRvIG9ubHkgaW5jbHVkZSBpdGVtcyB3aGVy
ZSB0aGUgCi8vIGdpdmVuIGNvbmRpdGlvbiBldmFsdWF0ZXMgdG8gdHJ1ZQpwdWJsaWMgc3RhdGlj
IDxUPiBUW10gZmlsdGVyKFRbXSBhcnJheSwgU3RyaW5nIGNvbmRpdGlvbiwgSURhdGEgcGlwZWxp
bmUpIHRocm93cyBTZXJ2aWNlRXhjZXB0aW9uIHsKICAgIGlmIChhcnJheSA9PSBudWxsIHx8IGFy
cmF5Lmxlbmd0aCA9PSAwIHx8IGNvbmRpdGlvbiA9PSBudWxsIHx8IGNvbmRpdGlvbi5lcXVhbHMo
IiIpKSByZXR1cm4gYXJyYXk7CiAgICBpZiAocGlwZWxpbmUgPT0gbnVsbCkgcGlwZWxpbmUgPSBJ
RGF0YUZhY3RvcnkuY3JlYXRlKCk7CgogICAgamF2YS51dGlsLkFycmF5TGlzdDxUPiBsaXN0ID0g
bmV3IGphdmEudXRpbC5BcnJheUxpc3Q8VD4oYXJyYXkubGVuZ3RoKTsKCiAgICBmb3IgKGludCBp
ID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgSURhdGFDdXJzb3IgY3Vyc29y
ID0gcGlwZWxpbmUuZ2V0Q3Vyc29yKCk7CiAgICAgICAgSURhdGFVdGlsLnB1dChjdXJzb3IsICIk
aXRlbSIsIGFycmF5W2ldKTsKCiAgICAgICAgaWYgKENvbmRpdGlvbkV2YWx1YXRvci5ldmFsdWF0
ZShjb25kaXRpb24sIHBpcGVsaW5lKSkgbGlzdC5hZGQoYXJyYXlbaV0pOwoKICAgICAgICBJRGF0
YVV0aWwucmVtb3ZlKGN1cnNvciwgIiRpdGVtIik7CiAgICAgICAgY3Vyc29yLmRlc3Ryb3koKTsK
ICAgIH0KCiAgICByZXR1cm4gbGlzdC50b0FycmF5KGphdmEudXRpbC5BcnJheXMuY29weU9mKGFy
cmF5LCAwKSk7Cn0KCi8vIHJldHVybnMgYSBuZXcgYXJyYXkgd2hpY2ggaXMgYSBvbmUtZGltZW5z
aW9uYWwgcmVjdXJzaXZlIGZsYXR0ZW5pbmcgb2YgdGhlIGdpdmVuIGFycmF5CnB1YmxpYyBzdGF0
aWMgPFQ+IFRbXSBmbGF0dGVuKFRbXSBhcnJheSkgewogICAgaWYgKGFycmF5ID09IG51bGwgfHwg
YXJyYXkubGVuZ3RoID09IDApIHJldHVybiBhcnJheTsKCiAgICBqYXZhLnV0aWwuQXJyYXlMaXN0
PFQ+IGxpc3QgPSBuZXcgamF2YS51dGlsLkFycmF5TGlzdDxUPihhcnJheS5sZW5ndGgpOwoKICAg
IGZvciAoaW50IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAoYXJy
YXlbaV0gIT0gbnVsbCAmJiBhcnJheVtpXS5nZXRDbGFzcygpLmlzQXJyYXkoKSkgewogICAgICAg
ICAgICBsaXN0LmVuc3VyZUNhcGFjaXR5KGxpc3Quc2l6ZSgpICsgKChUW10pYXJyYXlbaV0pLmxl
bmd0aCk7CiAgICAgICAgICAgIGxpc3QuYWRkQWxsKGphdmEudXRpbC5BcnJheXMuYXNMaXN0KGZs
YXR0ZW4oKFRbXSlhcnJheVtpXSkpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBsaXN0
LmFkZChhcnJheVtpXSk7CiAgICAgICAgfQogICAgfQoKICAgIHJldHVybiBsaXN0LnRvQXJyYXko
amF2YS51dGlsLkFycmF5cy5jb3B5T2YoYXJyYXksIDApKTsKfQoKLy8gcmV0dXJucyB0aGUgZWxl
bWVudCBmcm9tIHRoZSBnaXZlbiBhcnJheSBhdCB0aGUgZ2l2ZW4gaW5kZXggKHN1cHBvcnRzIHJ1
Ynktc3R5bGUgcmV2ZXJzZSBpbmRleGluZykKcHVibGljIHN0YXRpYyA8VD4gVCBnZXQoVFtdIGFy
cmF5LCBTdHJpbmcgaW5kZXgsIFN0cmluZyBpdGVyYXRpb24pIHsKICAgIGludCBpID0gMDsKICAg
IGlmIChpbmRleCAhPSBudWxsKSB7CiAgICAgICAgaSA9IEludGVnZXIucGFyc2VJbnQoaW5kZXgp
OwogICAgfSBlbHNlIHsKICAgICAgICBpID0gSW50ZWdlci5wYXJzZUludChpdGVyYXRpb24pIC0g
MTsKICAgIH0KICAgIHJldHVybiBnZXQoYXJyYXksIGkpOwp9CgovLyByZXR1cm5zIHRoZSBlbGVt
ZW50IGZyb20gdGhlIGdpdmVuIGFycmF5IGF0IHRoZSBnaXZlbiBpbmRleCAoc3VwcG9ydHMgcnVi
eS1zdHlsZSByZXZlcnNlIGluZGV4aW5nKQpwdWJsaWMgc3RhdGljIDxUPiBUIGdldChUW10gYXJy
YXksIFN0cmluZyBpbmRleCkgewogICAgcmV0dXJuIGdldChhcnJheSwgaW5kZXgsIG51bGwpOwp9
CgovLyByZXR1cm5zIHRoZSBlbGVtZW50IGZyb20gdGhlIGdpdmVuIGFycmF5IGF0IHRoZSBnaXZl
biBpbmRleCAoc3VwcG9ydHMgcnVieS1zdHlsZSByZXZlcnNlIGluZGV4aW5nKQpwdWJsaWMgc3Rh
dGljIDxUPiBUIGdldChUW10gYXJyYXksIGludCBpbmRleCkgewogICAgVCBpdGVtID0gbnVsbDsK
CiAgICBpZiAoYXJyYXkgIT0gbnVsbCkgewogICAgICAgIC8vIHN1cHBvcnQgcmV2ZXJzZS90YWls
IGluZGV4aW5nCiAgICAgICAgaWYgKGluZGV4IDwgMCkgaW5kZXggKz0gYXJyYXkubGVuZ3RoOwoK
ICAgICAgICBpdGVtID0gYXJyYXlbaW5kZXhdOwogICAgfQoKICAgIHJldHVybiBpdGVtOwp9Cgov
LyByZXR1cm5zIHRoZSBmaXJzdCBlbGVtZW50IGZyb20gdGhlIGdpdmVuIGFycmF5CnB1YmxpYyBz
dGF0aWMgPFQ+IFQgZmlyc3QoVFtdIGFycmF5KSB7CiAgICByZXR1cm4gZ2V0KGFycmF5LCAwKTsK
fQoKLy8gcmV0dXJucyB0aGUgbGFzdCBlbGVtZW50IGZyb20gdGhlIGdpdmVuIGFycmF5CnB1Ymxp
YyBzdGF0aWMgPFQ+IFQgbGFzdChUW10gYXJyYXkpIHsKICAgIHJldHVybiBnZXQoYXJyYXksIC0x
KTsKfQoKLy8gcmVzaXplcyB0aGUgZ2l2ZW4gYXJyYXkgKG9yIGluc3RhbnRpYXRlcyBhIG5ldyBh
cnJheSwgaWYgbnVsbCkgdG8gdGhlIGRlc2lyZWQgbGVuZ3RoLCAKLy8gYW5kIHBhZHMgd2l0aCB0
aGUgZ2l2ZW4gaXRlbQpwdWJsaWMgc3RhdGljIDxUPiBUW10gcmVzaXplKFRbXSBhcnJheSwgaW50
IG5ld0xlbmd0aCwgVCBpdGVtLCBDbGFzczxUPiBrbGFzcykgewogICAgaWYgKGFycmF5ID09IG51
bGwpIGFycmF5ID0gKFRbXSlqYXZhLmxhbmcucmVmbGVjdC5BcnJheS5uZXdJbnN0YW5jZShrbGFz
cywgMCk7CiAgICByZXR1cm4gcmVzaXplKGFycmF5LCBuZXdMZW5ndGgsIGl0ZW0pOwp9CgovLyBy
ZXNpemVzIHRoZSBnaXZlbiBhcnJheSB0byB0aGUgZGVzaXJlZCBsZW5ndGgsIGFuZCBwYWRzIHdp
dGggdGhlIGdpdmVuIGl0ZW0KcHVibGljIHN0YXRpYyA8VD4gVFtdIHJlc2l6ZShUW10gYXJyYXks
IGludCBuZXdMZW5ndGgsIFQgaXRlbSkgewogICAgaWYgKG5ld0xlbmd0aCA8IDApIG5ld0xlbmd0
aCA9IGFycmF5Lmxlbmd0aCArIG5ld0xlbmd0aDsKICAgIGlmIChuZXdMZW5ndGggPCAwKSBuZXdM
ZW5ndGggPSAwOwoKICAgIGludCBvcmlnaW5hbExlbmd0aCA9IGFycmF5Lmxlbmd0aDsKICAgIGlm
IChuZXdMZW5ndGggPT0gb3JpZ2luYWxMZW5ndGgpIHJldHVybiBhcnJheTsKCiAgICBhcnJheSA9
IGphdmEudXRpbC5BcnJheXMuY29weU9mKGFycmF5LCBuZXdMZW5ndGgpOwogICAgaWYgKGl0ZW0g
IT0gbnVsbCkgewogICAgICAgIGZvciAoaW50IGkgPSBvcmlnaW5hbExlbmd0aDsgaSA8IG5ld0xl
bmd0aDsgaSsrKSBhcnJheVtpXSA9IGl0ZW07CiAgICB9CiAgICByZXR1cm4gYXJyYXk7Cn0KCi8v
IHJlc2l6ZXMgdGhlIGdpdmVuIGFycmF5IHRvIHRoZSBkZXNpcmVkIGxlbmd0aCwgYW5kIHBhZHMg
d2l0aCBudWxscwpwdWJsaWMgc3RhdGljIDxUPiBUW10gcmVzaXplKFRbXSBhcnJheSwgaW50IG5l
d0xlbmd0aCkgewogICAgcmV0dXJuIHJlc2l6ZShhcnJheSwgbmV3TGVuZ3RoLCBudWxsKTsKfQoK
Ly8gcmVzaXplcyB0aGUgZ2l2ZW4gYXJyYXkgdG8gdGhlIGRlc2lyZWQgbGVuZ3RoLCBhbmQgcGFk
cyB3aXRoIHRoZSBnaXZlbiBpdGVtCnB1YmxpYyBzdGF0aWMgPFQ+IHZvaWQgcmVzaXplKElEYXRh
IHBpcGVsaW5lLCBDbGFzczxUPiBrbGFzcykgewogICAgSURhdGFDdXJzb3IgY3Vyc29yID0gcGlw
ZWxpbmUuZ2V0Q3Vyc29yKCk7CgogICAgdHJ5IHsKICAgICAgICBUW10gbGlzdCA9IChUW10pSURh
dGFVdGlsLmdldE9iamVjdEFycmF5KGN1cnNvciwgIiRsaXN0Iik7CiAgICAgICAgaW50IGxlbmd0
aCA9IEludGVnZXIucGFyc2VJbnQoSURhdGFVdGlsLmdldFN0cmluZyhjdXJzb3IsICIkbGVuZ3Ro
IikpOwogICAgICAgIFQgaXRlbSA9IChUKUlEYXRhVXRpbC5nZXQoY3Vyc29yLCAiJGl0ZW0iKTsK
CiAgICAgICAgbGlzdCA9IHJlc2l6ZShsaXN0LCBsZW5ndGgsIGl0ZW0sIGtsYXNzKTsKCiAgICAg
ICAgaWYgKGxpc3QgIT0gbnVsbCkgSURhdGFVdGlsLnB1dChjdXJzb3IsICIkbGlzdCIsIGxpc3Qp
OwogICAgfSBmaW5hbGx5IHsKICAgICAgICBjdXJzb3IuZGVzdHJveSgpOwogICAgfQp9CgovLyBn
cm93cyB0aGUgc2l6ZSBvZiB0aGUgZ2l2ZW4gYXJyYXkgYnkgdGhlIGdpdmVuIGNvdW50LCBhbmQg
cGFkcyB3aXRoIHRoZSBnaXZlbiBpdGVtCnB1YmxpYyBzdGF0aWMgPFQ+IFRbXSBncm93KFRbXSBh
cnJheSwgaW50IGNvdW50LCBUIGl0ZW0sIENsYXNzPFQ+IGtsYXNzKSB7CiAgICByZXR1cm4gcmVz
aXplKGFycmF5LCBhcnJheSA9PSBudWxsID8gY291bnQgOiBhcnJheS5sZW5ndGggKyBjb3VudCwg
aXRlbSwga2xhc3MpOwp9CgovLyBncm93cyB0aGUgZ2l2ZW4gYXJyYXkgdG8gdGhlIGRlc2lyZWQg
bGVuZ3RoLCBhbmQgcGFkcyB3aXRoIHRoZSBnaXZlbiBpdGVtCnB1YmxpYyBzdGF0aWMgPFQ+IHZv
aWQgZ3JvdyhJRGF0YSBwaXBlbGluZSwgQ2xhc3M8VD4ga2xhc3MpIHsKICAgIElEYXRhQ3Vyc29y
IGN1cnNvciA9IHBpcGVsaW5lLmdldEN1cnNvcigpOwoKICAgIHRyeSB7CiAgICAgICAgVFtdIGxp
c3QgPSAoVFtdKUlEYXRhVXRpbC5nZXRPYmplY3RBcnJheShjdXJzb3IsICIkbGlzdCIpOwogICAg
ICAgIGludCBjb3VudCA9IEludGVnZXIucGFyc2VJbnQoSURhdGFVdGlsLmdldFN0cmluZyhjdXJz
b3IsICIkY291bnQiKSk7CiAgICAgICAgVCBpdGVtID0gKFQpSURhdGFVdGlsLmdldChjdXJzb3Is
ICIkaXRlbSIpOwoKICAgICAgICBsaXN0ID0gZ3JvdyhsaXN0LCBjb3VudCwgaXRlbSwga2xhc3Mp
OwoKICAgICAgICBpZiAobGlzdCAhPSBudWxsKSBJRGF0YVV0aWwucHV0KGN1cnNvciwgIiRsaXN0
IiwgbGlzdCk7CiAgICB9IGZpbmFsbHkgewogICAgICAgIGN1cnNvci5kZXN0cm95KCk7CiAgICB9
Cn0KCi8vIHNocmlua3MgdGhlIHNpemUgb2YgdGhlIGdpdmVuIGFycmF5IGJ5IHRoZSBnaXZlbiBj
b3VudApwdWJsaWMgc3RhdGljIDxUPiBUW10gc2hyaW5rKFRbXSBhcnJheSwgaW50IGNvdW50KSB7
CiAgICBpZiAoYXJyYXkgIT0gbnVsbCkgewogICAgICAgIGludCBsZW5ndGggPSBhcnJheS5sZW5n
dGggLSBjb3VudDsKICAgICAgICBhcnJheSA9IHJlc2l6ZShhcnJheSwgbGVuZ3RoIDwgMCA/IDAg
OiBsZW5ndGgpOwogICAgfQogICAgcmV0dXJuIGFycmF5Owp9CgovLyByZXR1cm5zIHRydWUgaWYg
dGhlIGdpdmVuIGl0ZW0gaXMgZm91bmQgaW4gdGhlIGdpdmVuIGFycmF5CnB1YmxpYyBzdGF0aWMg
PFQ+IGJvb2xlYW4gaW5jbHVkZShUW10gYXJyYXksIFQgaXRlbSkgewogICAgYm9vbGVhbiBmb3Vu
ZCA9IGZhbHNlOwoKICAgIGlmIChhcnJheSAhPSBudWxsKSB7CiAgICAgICAgZm9yIChpbnQgaSA9
IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBmb3VuZCA9IHR1bmRyYS5v
YmplY3QuZXF1YWwoYXJyYXlbaV0sIGl0ZW0pOwogICAgICAgICAgICBpZiAoZm91bmQpIGJyZWFr
OwogICAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gZm91bmQ7Cn0KCi8vIHJldHVybnMgYSBuZXcg
YXJyYXkgd2l0aCB0aGUgZ2l2ZW4gaXRlbSBpbnNlcnRlZCBhdCB0aGUgZ2l2ZW4gaW5kZXgKcHVi
bGljIHN0YXRpYyA8VD4gVFtdIGluc2VydChUW10gYXJyYXksIFQgaXRlbSwgU3RyaW5nIGluZGV4
LCBDbGFzczxUPiBrbGFzcykgewogICAgaWYgKGluZGV4ID09IG51bGwpIGluZGV4ID0gIi0xIjsK
ICAgIHJldHVybiBpbnNlcnQoYXJyYXksIGl0ZW0sIEludGVnZXIucGFyc2VJbnQoaW5kZXgpLCBr
bGFzcyk7Cn0KCi8vIHJldHVybnMgYSBuZXcgYXJyYXkgd2l0aCB0aGUgZ2l2ZW4gaXRlbSBpbnNl
cnRlZCBhdCB0aGUgZ2l2ZW4gaW5kZXgKcHVibGljIHN0YXRpYyA8VD4gVFtdIGluc2VydChUW10g
YXJyYXksIFQgaXRlbSwgaW50IGluZGV4LCBDbGFzczxUPiBrbGFzcykgewogICAgaWYgKGFycmF5
ID09IG51bGwpIGFycmF5ID0gKFRbXSlqYXZhLmxhbmcucmVmbGVjdC5BcnJheS5uZXdJbnN0YW5j
ZShrbGFzcywgMCk7CgogICAgamF2YS51dGlsLkFycmF5TGlzdDxUPiBsaXN0ID0gbmV3IGphdmEu
dXRpbC5BcnJheUxpc3Q8VD4oamF2YS51dGlsLkFycmF5cy5hc0xpc3QoYXJyYXkpKTsKCiAgICBp
bnQgY2FwYWNpdHkgPSAwOwogICAgaWYgKGluZGV4IDwgMCkgaW5kZXggKz0gbGlzdC5zaXplKCkg
KyAxOwogICAgaWYgKGluZGV4IDwgMCkgewogICAgICAgIGNhcGFjaXR5ID0gKGluZGV4ICogLTEp
ICsgbGlzdC5zaXplKCk7CiAgICAgICAgaW5kZXggPSAwOwogICAgfSBlbHNlIHsKICAgICAgICBj
YXBhY2l0eSA9IGluZGV4OwogICAgfQoKICAgIGxpc3QuZW5zdXJlQ2FwYWNpdHkoY2FwYWNpdHkp
OwogICAgaWYgKGNhcGFjaXR5ID49IGxpc3Quc2l6ZSgpKSB7CiAgICAgICAgLy8gZmlsbCB0aGUg
bGlzdCB3aXRoIG51bGxzIGlmIGl0IG5lZWRzIHRvIGJlIGV4dGVuZGVkCiAgICAgICAgZm9yIChp
bnQgaSA9IGxpc3Quc2l6ZSgpOyBpIDwgY2FwYWNpdHk7IGkrKykgewogICAgICAgICAgICBsaXN0
LmFkZChpLCBudWxsKTsKICAgICAgICB9CiAgICB9CiAgICBsaXN0LmFkZChpbmRleCwgaXRlbSk7
CgogICAgcmV0dXJuIGxpc3QudG9BcnJheShhcnJheSk7Cn0KCi8vIHJldHVybnMgYSBuZXcgYXJy
YXksIHdpdGggdGhlIGdpdmVuIGVsZW1lbnQgaW5zZXJ0ZWQgYXQgdGhlIGdpdmVuIGluZGV4CnB1
YmxpYyBzdGF0aWMgPFQ+IHZvaWQgaW5zZXJ0KElEYXRhIHBpcGVsaW5lLCBDbGFzczxUPiBrbGFz
cykgewogICAgSURhdGFDdXJzb3IgY3Vyc29yID0gcGlwZWxpbmUuZ2V0Q3Vyc29yKCk7CgogICAg
dHJ5IHsKICAgICAgICBUW10gbGlzdCA9IChUW10pSURhdGFVdGlsLmdldE9iamVjdEFycmF5KGN1
cnNvciwgIiRsaXN0Iik7CiAgICAgICAgVCBpdGVtID0gKFQpSURhdGFVdGlsLmdldChjdXJzb3Is
ICIkaXRlbSIpOwogICAgICAgIFN0cmluZyBpbmRleCA9IElEYXRhVXRpbC5nZXRTdHJpbmcoY3Vy
c29yLCAiJGluZGV4Iik7CgogICAgICAgIElEYXRhVXRpbC5wdXQoY3Vyc29yLCAiJGxpc3QiLCBp
bnNlcnQobGlzdCA9PSBudWxsID8gbnVsbCA6IGphdmEudXRpbC5BcnJheXMuY29weU9mKGxpc3Qs
IGxpc3QubGVuZ3RoLCAoQ2xhc3M8VFtdPilqYXZhLmxhbmcucmVmbGVjdC5BcnJheS5uZXdJbnN0
YW5jZShrbGFzcywgMCkuZ2V0Q2xhc3MoKSksIGl0ZW0sIGluZGV4LCBrbGFzcykpOwogICAgfSBm
aW5hbGx5IHsKICAgICAgICBjdXJzb3IuZGVzdHJveSgpOwogICAgfQp9CgovLyByZXR1cm5zIG9u
bHkgdGhlIGl0ZW1zIGluIHggdGhhdCBhcmUgYWxzbyBpbiB5CnB1YmxpYyBzdGF0aWMgPFQ+IFRb
XSBpbnRlcnNlY3Rpb24oVFtdIHgsIFRbXSB5KSB7CiAgICBpZiAoeCA9PSBudWxsIHx8IHkgPT0g
bnVsbCkgcmV0dXJuIG51bGw7CgogICAgamF2YS51dGlsLkxpc3Q8VD4gZCA9IG5ldyBqYXZhLnV0
aWwuQXJyYXlMaXN0PFQ+KHgubGVuZ3RoKTsKICAgIGQuYWRkQWxsKGphdmEudXRpbC5BcnJheXMu
YXNMaXN0KHgpKTsKICAgIGQucmV0YWluQWxsKGphdmEudXRpbC5BcnJheXMuYXNMaXN0KHkpKTsK
CiAgICByZXR1cm4gZC50b0FycmF5KGphdmEudXRpbC5BcnJheXMuY29weU9mKHgsIDApKTsKfQoK
Ly8gcmV0dXJucyBhIHN0cmluZyBjcmVhdGVkIGJ5IGNvbmNhdGVuYXRpbmcgZWFjaCBlbGVtZW50
IG9mIHRoZSBnaXZlbiBhcnJheSwgc2VwYXJhdGVkIGJ5IHRoZSBnaXZlbiBzZXBhcmF0b3Igc3Ry
aW5nCnB1YmxpYyBzdGF0aWMgPFQ+IFN0cmluZyBqb2luKFRbXSBhcnJheSwgU3RyaW5nIHNlcGFy
YXRvcikgewogICAgU3RyaW5nQnVpbGRlciBidWlsZGVyID0gbmV3IFN0cmluZ0J1aWxkZXIoKTsK
CiAgICBpZiAoYXJyYXkgIT0gbnVsbCkgewogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYXJy
YXkubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgVCB2YWx1ZSA9IGFycmF5W2ldOwogICAgICAg
ICAgICBpZiAodmFsdWUgIT0gbnVsbCkgYnVpbGRlci5hcHBlbmQodmFsdWUudG9TdHJpbmcoKSk7
CiAgICAgICAgICAgIGlmIChzZXBhcmF0b3IgIT0gbnVsbCAmJiBpIDwgYXJyYXkubGVuZ3RoIC0g
MSkgYnVpbGRlci5hcHBlbmQoc2VwYXJhdG9yKTsKICAgICAgICB9CiAgICB9CgogICAgcmV0dXJu
IGJ1aWxkZXIudG9TdHJpbmcoKTsKfQoKLy8gcmV0dXJucyB0aGUgbGVuZ3RoIG9mIHRoZSBnaXZl
biBhcnJheQpwdWJsaWMgc3RhdGljIDxUPiBpbnQgbGVuZ3RoKFRbXSBhcnJheSkgewogICAgcmV0
dXJuIChhcnJheSA9PSBudWxsPyAwIDogYXJyYXkubGVuZ3RoKTsKfQoKLy8gbWFwcyB0aGUgZ2l2
ZW4gYXJyYXkgdG8gYSBuZXcgYXJyYXkgYnkgaW52b2tpbmcgYSBzZXJ2aWNlIGZvciBlYWNoIGVs
ZW1lbnQgYW5kIGNvbGxlY3RpbmcgdGhlIG91dHB1dApwdWJsaWMgc3RhdGljIDxUPiB2b2lkIG1h
cChJRGF0YSBwaXBlbGluZSwgQ2xhc3M8VD4ga2xhc3MpIHRocm93cyBTZXJ2aWNlRXhjZXB0aW9u
IHsKICAgIElEYXRhQ3Vyc29yIGN1cnNvciA9IHBpcGVsaW5lLmdldEN1cnNvcigpOwoKICAgIHRy
eSB7CiAgICAgICAgT2JqZWN0W10gbGlzdCA9IElEYXRhVXRpbC5nZXRPYmplY3RBcnJheShjdXJz
b3IsICIkbGlzdCIpOwogICAgICAgIFN0cmluZyBzZXJ2aWNlID0gSURhdGFVdGlsLmdldFN0cmlu
ZyhjdXJzb3IsICIkc2VydmljZSIpOwogICAgICAgIElEYXRhIHNjb3BlID0gSURhdGFVdGlsLmdl
dElEYXRhKGN1cnNvciwgIiRwaXBlbGluZSIpOwogICAgICAgIFN0cmluZyBpbnB1dCA9IElEYXRh
VXRpbC5nZXRTdHJpbmcoY3Vyc29yLCAiJGl0ZW0uaW5wdXQiKTsKICAgICAgICBTdHJpbmcgb3V0
cHV0ID0gSURhdGFVdGlsLmdldFN0cmluZyhjdXJzb3IsICIkaXRlbS5vdXRwdXQiKTsKCiAgICAg
ICAgYm9vbGVhbiBzY29wZWQgPSBzY29wZSAhPSBudWxsOwoKICAgICAgICAvLyBpbnZva2UgdGhl
IHNlcnZpY2UgZm9yIGVhY2ggaXRlbSBpbiB0aGUgbGlzdCwgcGFzc2luZyAkaXRlbSBhbmQgJGlu
ZGV4IHZhcmlhYmxlcyBvbiBlYWNoIGludm9jYXRpb24KICAgICAgICAvLyBhbmQgY29sbGVjdCB0
aGUgcmV0dXJuZWQgJGl0ZW0ncyBpbnRvIGEgbmV3IGxpc3QKCiAgICAgICAgbGlzdCA9IG1hcChs
aXN0ID09IG51bGwgPyBudWxsIDogamF2YS51dGlsLkFycmF5cy5jb3B5T2YobGlzdCwgbGlzdC5s
ZW5ndGgsIChDbGFzczxUW10+KWphdmEubGFuZy5yZWZsZWN0LkFycmF5Lm5ld0luc3RhbmNlKGts
YXNzLCAwKS5nZXRDbGFzcygpKSwgc2VydmljZSwgc2NvcGVkID8gc2NvcGUgOiBwaXBlbGluZSwg
aW5wdXQsIG91dHB1dCk7CgogICAgICAgIGlmIChsaXN0ICE9IG51bGwpIElEYXRhVXRpbC5wdXQo
Y3Vyc29yLCAiJGxpc3QiLCBsaXN0KTsKICAgIH0gZmluYWxseSB7CiAgICAgICAgY3Vyc29yLmRl
c3Ryb3koKTsKICAgIH0KfQoKLy8gbWFwcyB0aGUgZ2l2ZW4gYXJyYXkgdG8gYSBuZXcgYXJyYXkg
YnkgaW52b2tpbmcgYSBzZXJ2aWNlIGZvciBlYWNoIGVsZW1lbnQgYW5kIGNvbGxlY3RpbmcgdGhl
IG91dHB1dApwdWJsaWMgc3RhdGljIDxUPiBUW10gbWFwKFRbXSBhcnJheSwgU3RyaW5nIHNlcnZp
Y2UsIElEYXRhIHBpcGVsaW5lLCBTdHJpbmcgaW5wdXQsIFN0cmluZyBvdXRwdXQpIHRocm93cyBT
ZXJ2aWNlRXhjZXB0aW9uIHsKICAgIGlmIChhcnJheSA9PSBudWxsIHx8IGFycmF5Lmxlbmd0aCA9
PSAwIHx8IHNlcnZpY2UgPT0gbnVsbCkgcmV0dXJuIGFycmF5OwogICAgaWYgKHBpcGVsaW5lID09
IG51bGwpIHBpcGVsaW5lID0gSURhdGFGYWN0b3J5LmNyZWF0ZSgpOwogICAgaWYgKGlucHV0ID09
IG51bGwpIGlucHV0ID0gIiRpdGVtIjsKICAgIGlmIChvdXRwdXQgPT0gbnVsbCkgb3V0cHV0ID0g
aW5wdXQ7CgogICAgamF2YS51dGlsLkxpc3Q8VD4gbGlzdCA9IG5ldyBqYXZhLnV0aWwuQXJyYXlM
aXN0PFQ+KGFycmF5Lmxlbmd0aCk7CiAgICBJRGF0YUN1cnNvciBjdXJzb3IgPSBudWxsOwoKICAg
IGZvciAoaW50IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHsKICAgICAgICAvLyBhZGQg
JGl0ZW0sICRpbmRleCwgJGl0ZXJhdGlvbiBhbmQgJGxlbmd0aCB2YXJpYWJsZXMgdG8gdGhlIGlu
cHV0IHBpcGVsaW5lCiAgICAgICAgY3Vyc29yID0gcGlwZWxpbmUuZ2V0Q3Vyc29yKCk7CiAgICAg
ICAgSURhdGFVdGlsLnB1dChjdXJzb3IsIGlucHV0LCBhcnJheVtpXSk7CiAgICAgICAgSURhdGFV
dGlsLnB1dChjdXJzb3IsICIkaW5kZXgiLCAiIiArIGkpOwogICAgICAgIElEYXRhVXRpbC5wdXQo
Y3Vyc29yLCAiJGl0ZXJhdGlvbiIsICIiICsgKGkgKyAxKSk7CiAgICAgICAgSURhdGFVdGlsLnB1
dChjdXJzb3IsICIkbGVuZ3RoIiwgIiIgKyBhcnJheS5sZW5ndGgpOwogICAgICAgIGN1cnNvci5k
ZXN0cm95KCk7CgogICAgICAgIC8vIGludm9rZSB0aGUgaXRlcmF0b3Igc2VydmljZQogICAgICAg
IHBpcGVsaW5lID0gdHVuZHJhLnNlcnZpY2UuaW52b2tlKHNlcnZpY2UsIHBpcGVsaW5lKTsKCiAg
ICAgICAgLy8gY2xlYW4gdXAgdGhlIGlucHV0IHBpcGVsaW5lCiAgICAgICAgY3Vyc29yID0gcGlw
ZWxpbmUuZ2V0Q3Vyc29yKCk7CiAgICAgICAgVCBpdGVtID0gKFQpSURhdGFVdGlsLmdldChjdXJz
b3IsIG91dHB1dCk7CiAgICAgICAgSURhdGFVdGlsLnJlbW92ZShjdXJzb3IsIGlucHV0KTsKICAg
ICAgICBJRGF0YVV0aWwucmVtb3ZlKGN1cnNvciwgb3V0cHV0KTsKICAgICAgICBJRGF0YVV0aWwu
cmVtb3ZlKGN1cnNvciwgIiRpbmRleCIpOwogICAgICAgIElEYXRhVXRpbC5yZW1vdmUoY3Vyc29y
LCAiJGl0ZXJhdGlvbiIpOwogICAgICAgIElEYXRhVXRpbC5yZW1vdmUoY3Vyc29yLCAiJGxlbmd0
aCIpOwogICAgICAgIGN1cnNvci5kZXN0cm95KCk7CgogICAgICAgIC8vIGNvbGxlY3QgdGhlIG1h
cHBlZCBpdGVtcwogICAgICAgIGxpc3QuYWRkKGl0ZW0pOwogICAgfQoKICAgIHJldHVybiBsaXN0
LnRvQXJyYXkoamF2YS51dGlsLkFycmF5cy5jb3B5T2YoYXJyYXksIDApKTsKfQoKLy8gcmV0dXJu
cyBhIG5ldyBhcnJheSB3aXRoIGEgbmV3IGVsZW1lbnQgaW5zZXJ0ZWQgYXQgdGhlIGJlZ2lubmlu
ZwpwdWJsaWMgc3RhdGljIDxUPiBUW10gcHJlcGVuZChUW10gYXJyYXksIFQgaXRlbSwgQ2xhc3M8
VD4ga2xhc3MpIHsKICAgIHJldHVybiBpbnNlcnQoYXJyYXksIGl0ZW0sIDAsIGtsYXNzKTsKfQoK
Ly8gcmV0dXJucyBhIG5ldyBhcnJheSwgd2l0aCB0aGUgZ2l2ZW4gZWxlbWVudCBpbnNlcnRlZCBh
dCB0aGUgZW5kCnB1YmxpYyBzdGF0aWMgPFQ+IHZvaWQgcHJlcGVuZChJRGF0YSBwaXBlbGluZSwg
Q2xhc3M8VD4ga2xhc3MpIHsKICAgIElEYXRhQ3Vyc29yIGN1cnNvciA9IHBpcGVsaW5lLmdldEN1
cnNvcigpOwoKICAgIHRyeSB7CiAgICAgICAgVFtdIGxpc3QgPSAoVFtdKUlEYXRhVXRpbC5nZXRP
YmplY3RBcnJheShjdXJzb3IsICIkbGlzdCIpOwogICAgICAgIFQgaXRlbSA9IChUKUlEYXRhVXRp
bC5nZXQoY3Vyc29yLCAiJGl0ZW0iKTsKCiAgICAgICAgbGlzdCA9IHByZXBlbmQobGlzdCA9PSBu
dWxsID8gbnVsbCA6IGphdmEudXRpbC5BcnJheXMuY29weU9mKGxpc3QsIGxpc3QubGVuZ3RoLCAo
Q2xhc3M8VFtdPilqYXZhLmxhbmcucmVmbGVjdC5BcnJheS5uZXdJbnN0YW5jZShrbGFzcywgMCku
Z2V0Q2xhc3MoKSksIGl0ZW0sIGtsYXNzKTsKCiAgICAgICAgaWYgKGxpc3QgIT0gbnVsbCkgSURh
dGFVdGlsLnB1dChjdXJzb3IsICIkbGlzdCIsIGxpc3QpOwogICAgfSBmaW5hbGx5IHsKICAgICAg
ICBjdXJzb3IuZGVzdHJveSgpOwogICAgfQp9CgovLyBzZXRzIHRoZSBlbGVtZW50IGZyb20gdGhl
IGdpdmVuIGFycmF5IGF0IHRoZSBnaXZlbiBpbmRleCAoc3VwcG9ydHMgcnVieS1zdHlsZSByZXZl
cnNlIGluZGV4aW5nKQpwdWJsaWMgc3RhdGljIDxUPiBUW10gcHV0KFRbXSBhcnJheSwgVCBpdGVt
LCBTdHJpbmcgaW5kZXgsIENsYXNzPFQ+IGtsYXNzKSB7CiAgICByZXR1cm4gcHV0KGFycmF5LCBp
dGVtLCBJbnRlZ2VyLnBhcnNlSW50KGluZGV4KSwga2xhc3MpOwp9CgovLyBzZXRzIHRoZSBlbGVt
ZW50IGZyb20gdGhlIGdpdmVuIGFycmF5IGF0IHRoZSBnaXZlbiBpbmRleCAoc3VwcG9ydHMgcnVi
eS1zdHlsZSByZXZlcnNlIGluZGV4aW5nKQpwdWJsaWMgc3RhdGljIDxUPiBUW10gcHV0KFRbXSBh
cnJheSwgVCBpdGVtLCBpbnQgaW5kZXgsIENsYXNzPFQ+IGtsYXNzKSB7CiAgICBpZiAoYXJyYXkg
PT0gbnVsbCkgYXJyYXkgPSAoVFtdKWphdmEubGFuZy5yZWZsZWN0LkFycmF5Lm5ld0luc3RhbmNl
KGtsYXNzLCAwKTsKCiAgICAvLyBzdXBwb3J0IHJldmVyc2UvdGFpbCBpbmRleGluZwogICAgaWYg
KGluZGV4IDwgMCkgaW5kZXggKz0gYXJyYXkubGVuZ3RoOwogICAgaW50IGNhcGFjaXR5ID0gMDsK
ICAgIGlmIChpbmRleCA8IDApIHsKICAgICAgICBjYXBhY2l0eSA9IChpbmRleCAqIC0xKSArIGFy
cmF5Lmxlbmd0aDsKICAgICAgICBpbmRleCA9IDA7CiAgICB9IGVsc2UgewogICAgICAgIGNhcGFj
aXR5ID0gaW5kZXggKyAxOwogICAgfQogICAgaWYgKGNhcGFjaXR5ID4gYXJyYXkubGVuZ3RoKSBh
cnJheSA9IGphdmEudXRpbC5BcnJheXMuY29weU9mKGFycmF5LCBjYXBhY2l0eSk7CgogICAgYXJy
YXlbaW5kZXhdID0gaXRlbTsKCiAgICByZXR1cm4gYXJyYXk7Cn0KCi8vIHNldHMgdGhlIGVsZW1l
bnQgZnJvbSB0aGUgZ2l2ZW4gYXJyYXkgYXQgdGhlIGdpdmVuIGluZGV4IChzdXBwb3J0cyBydWJ5
LXN0eWxlIHJldmVyc2UgaW5kZXhpbmcpCnB1YmxpYyBzdGF0aWMgPFQ+IHZvaWQgcHV0KElEYXRh
IHBpcGVsaW5lLCBDbGFzczxUPiBrbGFzcykgewogICAgSURhdGFDdXJzb3IgY3Vyc29yID0gcGlw
ZWxpbmUuZ2V0Q3Vyc29yKCk7CgogICAgdHJ5IHsKICAgICAgICBUW10gbGlzdCA9IChUW10pSURh
dGFVdGlsLmdldE9iamVjdEFycmF5KGN1cnNvciwgIiRsaXN0Iik7CiAgICAgICAgVCBpdGVtID0g
KFQpSURhdGFVdGlsLmdldChjdXJzb3IsICIkaXRlbSIpOwogICAgICAgIFN0cmluZyBpbmRleCA9
IElEYXRhVXRpbC5nZXRTdHJpbmcoY3Vyc29yLCAiJGluZGV4Iik7CgogICAgICAgIElEYXRhVXRp
bC5wdXQoY3Vyc29yLCAiJGxpc3QiLCBwdXQobGlzdCA9PSBudWxsID8gbnVsbCA6IGphdmEudXRp
bC5BcnJheXMuY29weU9mKGxpc3QsIGxpc3QubGVuZ3RoLCAoQ2xhc3M8VFtdPilqYXZhLmxhbmcu
cmVmbGVjdC5BcnJheS5uZXdJbnN0YW5jZShrbGFzcywgMCkuZ2V0Q2xhc3MoKSksIGl0ZW0sIGlu
ZGV4LCBrbGFzcykpOwogICAgfSBmaW5hbGx5IHsKICAgICAgICBjdXJzb3IuZGVzdHJveSgpOwog
ICAgfQp9CgovLyBmaWx0ZXJzIHRoZSBnaXZlbiBsaXN0IHRvIG5vdCBpbmNsdWRlIGl0ZW1zIHdo
ZXJlIHRoZSAKLy8gZ2l2ZW4gY29uZGl0aW9uIGV2YWx1YXRlcyB0byB0cnVlCnB1YmxpYyBzdGF0
aWMgPFQ+IFRbXSByZWplY3QoVFtdIGFycmF5LCBTdHJpbmcgY29uZGl0aW9uLCBJRGF0YSBwaXBl
bGluZSkgdGhyb3dzIFNlcnZpY2VFeGNlcHRpb24gewogICAgaWYgKGFycmF5ID09IG51bGwgfHwg
YXJyYXkubGVuZ3RoID09IDAgfHwgY29uZGl0aW9uID09IG51bGwgfHwgY29uZGl0aW9uLmVxdWFs
cygiIikpIHJldHVybiBhcnJheTsKICAgIGlmIChwaXBlbGluZSA9PSBudWxsKSBwaXBlbGluZSA9
IElEYXRhRmFjdG9yeS5jcmVhdGUoKTsKCiAgICBqYXZhLnV0aWwuQXJyYXlMaXN0PFQ+IGxpc3Qg
PSBuZXcgamF2YS51dGlsLkFycmF5TGlzdDxUPihhcnJheS5sZW5ndGgpOwoKICAgIGZvciAoaW50
IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHsKICAgICAgICBJRGF0YUN1cnNvciBjdXJz
b3IgPSBwaXBlbGluZS5nZXRDdXJzb3IoKTsKICAgICAgICBJRGF0YVV0aWwucHV0KGN1cnNvciwg
IiRpdGVtIiwgYXJyYXlbaV0pOwoKICAgICAgICBpZiAoIUNvbmRpdGlvbkV2YWx1YXRvci5ldmFs
dWF0ZShjb25kaXRpb24sIHBpcGVsaW5lKSkgbGlzdC5hZGQoYXJyYXlbaV0pOwoKICAgICAgICBJ
RGF0YVV0aWwucmVtb3ZlKGN1cnNvciwgIiRpdGVtIik7CiAgICAgICAgY3Vyc29yLmRlc3Ryb3ko
KTsKICAgIH0KCiAgICByZXR1cm4gbGlzdC50b0FycmF5KGphdmEudXRpbC5BcnJheXMuY29weU9m
KGFycmF5LCAwKSk7Cn0KCi8vIHJldHVybnMgYSBuZXcgYXJyYXkgd2l0aCBhbGwgZWxlbWVudHMg
ZnJvbSB0aGUgZ2l2ZW4gYXJyYXkgYnV0IGluIHJldmVyc2Ugb3JkZXIKcHVibGljIHN0YXRpYyA8
VD4gVFtdIHJldmVyc2UoVFtdIGFycmF5KSB7CiAgICBpZiAoYXJyYXkgPT0gbnVsbCB8fCBhcnJh
eS5sZW5ndGggPD0gMSkgcmV0dXJuIGFycmF5OwoKICAgIGphdmEudXRpbC5BcnJheUxpc3Q8VD4g
bGlzdCA9IG5ldyBqYXZhLnV0aWwuQXJyYXlMaXN0PFQ+KGphdmEudXRpbC5BcnJheXMuYXNMaXN0
KGFycmF5KSk7CiAgICBqYXZhLnV0aWwuQ29sbGVjdGlvbnMucmV2ZXJzZShsaXN0KTsKCiAgICBy
ZXR1cm4gbGlzdC50b0FycmF5KGphdmEudXRpbC5BcnJheXMuY29weU9mKGFycmF5LCAwKSk7Cn0K
Ci8vIHJldHVybnMgYSBuZXcgYXJyYXkgd2hpY2ggaXMgYSBzdWJzZXQgb2YgZWxlbWVudHMgZnJv
bSB0aGUgZ2l2ZW4gYXJyYXkKcHVibGljIHN0YXRpYyA8VD4gVFtdIHNsaWNlKFRbXSBhcnJheSwg
U3RyaW5nIGluZGV4LCBTdHJpbmcgbGVuZ3RoKSB7CiAgICByZXR1cm4gc2xpY2UoYXJyYXksIGlu
ZGV4ID09IG51bGwgPyAwIDogSW50ZWdlci5wYXJzZUludChpbmRleCksIGxlbmd0aCA9PSBudWxs
ID8gKGFycmF5ID09IG51bGwgPyAwIDogYXJyYXkubGVuZ3RoKSA6IEludGVnZXIucGFyc2VJbnQo
bGVuZ3RoKSk7Cn0KCi8vIHJldHVybnMgYSBuZXcgYXJyYXkgd2hpY2ggaXMgYSBzdWJzZXQgb2Yg
ZWxlbWVudHMgZnJvbSB0aGUgZ2l2ZW4gYXJyYXkKcHVibGljIHN0YXRpYyA8VD4gVFtdIHNsaWNl
KFRbXSBhcnJheSwgaW50IGluZGV4LCBpbnQgbGVuZ3RoKSB7CiAgICBpZiAoYXJyYXkgPT0gbnVs
bCB8fCBhcnJheS5sZW5ndGggPT0gMCkgcmV0dXJuIGFycmF5OwogICAgLy8gc3VwcG9ydCByZXZl
cnNlL3RhaWwgbGVuZ3RoCiAgICBpZiAobGVuZ3RoIDwgMCkgbGVuZ3RoID0gYXJyYXkubGVuZ3Ro
ICsgbGVuZ3RoOwogICAgLy8gc3VwcG9ydCByZXZlcnNlL3RhaWwgaW5kZXhpbmcKICAgIGlmIChp
bmRleCA8IDApIGluZGV4ICs9IGFycmF5Lmxlbmd0aDsKICAgIC8vIGRvbid0IHNsaWNlIHBhc3Qg
dGhlIGVuZCBvZiB0aGUgYXJyYXkKICAgIGlmICgobGVuZ3RoICs9IGluZGV4KSA+IGFycmF5Lmxl
bmd0aCkgbGVuZ3RoID0gYXJyYXkubGVuZ3RoOwoKICAgIHJldHVybiBqYXZhLnV0aWwuQXJyYXlz
LmNvcHlPZlJhbmdlKGFycmF5LCBpbmRleCwgbGVuZ3RoKTsKfQoKLy8gcmV0dXJucyBhIG5ldyBh
cnJheSB3aXRoIGFsbCBlbGVtZW50cyBzb3J0ZWQKcHVibGljIHN0YXRpYyA8VD4gVFtdIHNvcnQo
VFtdIGFycmF5KSB7CiAgICBpZiAoYXJyYXkgPT0gbnVsbCB8fCBhcnJheS5sZW5ndGggPD0gMSkg
cmV0dXJuIGFycmF5OwoKICAgIFRbXSBjb3B5ID0gamF2YS51dGlsLkFycmF5cy5jb3B5T2YoYXJy
YXksIGFycmF5Lmxlbmd0aCk7CiAgICBqYXZhLnV0aWwuQXJyYXlzLnNvcnQoY29weSk7CiAgICBy
ZXR1cm4gY29weTsKfQoKLy8gcmV0dXJucyBhIG5ldyBhcnJheSB3aXRoIGFsbCBzdHJpbmcgaXRl
bXMgdHJpbW1lZCwgYWxsCi8vIGVtcHR5IHN0cmluZyBpdGVtcyByZW1vdmVkLCBhbmQgYWxsIG51
bGwgaXRlbXMgcmVtb3ZlZApwdWJsaWMgc3RhdGljIDxUPiBUW10gc3F1ZWV6ZShUW10gYXJyYXkp
IHsKICAgIGlmIChhcnJheSA9PSBudWxsIHx8IGFycmF5Lmxlbmd0aCA9PSAwKSByZXR1cm4gbnVs
bDsKCiAgICBqYXZhLnV0aWwuTGlzdDxUPiBsaXN0ID0gbmV3IGphdmEudXRpbC5BcnJheUxpc3Q8
VD4oYXJyYXkubGVuZ3RoKTsKCiAgICBmb3IgKGludCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsg
aSsrKSB7CiAgICAgICAgaWYgKGFycmF5W2ldICE9IG51bGwgJiYgYXJyYXlbaV0gaW5zdGFuY2Vv
ZiBTdHJpbmcpIHsKICAgICAgICAgICAgVCBpdGVtID0gKFQpKChTdHJpbmcpYXJyYXlbaV0pLnRy
aW0oKTsKICAgICAgICAgICAgaWYgKGl0ZW0uZXF1YWxzKCIiKSkgewogICAgICAgICAgICAgICAg
YXJyYXlbaV0gPSBudWxsOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgYXJy
YXlbaV0gPSBpdGVtOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChhcnJheVtp
XSAhPSBudWxsKSBsaXN0LmFkZChhcnJheVtpXSk7CiAgICB9CgogICAgYXJyYXkgPSBsaXN0LnRv
QXJyYXkoamF2YS51dGlsLkFycmF5cy5jb3B5T2YoYXJyYXksIDApKTsKICAgIGlmIChhcnJheS5s
ZW5ndGggPT0gMCkgYXJyYXkgPSBudWxsOwoKICAgIHJldHVybiBhcnJheTsKfQoKLy8gcmV0dXJu
cyBhIG5ldyBhcnJheSB3aXRoIGFsbCBkdXBsaWNhdGUgZWxlbWVudHMgcmVtb3ZlZApwdWJsaWMg
c3RhdGljIDxUPiBUW10gdW5pcXVlKFRbXSBhcnJheSkgewogICAgaWYgKGFycmF5ID09IG51bGwg
fHwgYXJyYXkubGVuZ3RoIDw9IDEpIHJldHVybiBhcnJheTsKCiAgICBqYXZhLnV0aWwuU2V0PFQ+
IHNldCA9IG5ldyBqYXZhLnV0aWwuVHJlZVNldDxUPihqYXZhLnV0aWwuQXJyYXlzLmFzTGlzdChh
cnJheSkpOwoKICAgIHJldHVybiBzZXQudG9BcnJheShqYXZhLnV0aWwuQXJyYXlzLmNvcHlPZihh
cnJheSwgMCkpOwp9</value>
  <value name="encodeutf8">true</value>
  <value name="extends"></value>
  <array name="implements" type="value" depth="1">
  </array>
  <array name="imports" type="value" depth="1">
    <value>permafrost.tundra.flow.ConditionEvaluator</value>
    <value>permafrost.tundra.lang.ArrayHelper</value>
    <value>permafrost.tundra.lang.ExceptionHelper</value>
  </array>
</Values>
