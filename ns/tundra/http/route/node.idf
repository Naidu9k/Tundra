<?xml version="1.0" encoding="UTF-8"?>

<Values version="2.0">
  <value name="node_type">interface</value>
  <value name="node_nsName">tundra.http.route</value>
  <value name="shared">cHVibGljIHN0YXRpYyBmaW5hbCBIYW5kbGVyIGhhbmRsZXIgPSBuZXcgSGFuZGxlcigpOwoKLy8g
Q3VzdG9tIEhUVFAgaGFuZGxlciB0byBhbGxvdyBhcmJpdHJhcnkgSFRUUCByZXF1ZXN0IHJvdXRp
bmcKcHVibGljIHN0YXRpYyBjbGFzcyBIYW5kbGVyIGltcGxlbWVudHMgY29tLndtLmFwcC5iMmIu
c2VydmVyLkhUVFBIYW5kbGVyIHsKICBwcm90ZWN0ZWQgY29tLndtLmFwcC5iMmIuc2VydmVyLkhU
VFBJbnZva2VIYW5kbGVyIGludm9rZUhhbmRsZXIgPSBuZXcgY29tLndtLmFwcC5iMmIuc2VydmVy
LkhUVFBJbnZva2VIYW5kbGVyKCk7CiAgcHJvdGVjdGVkIGNvbS53bS5hcHAuYjJiLnNlcnZlci5I
VFRQRG9jSGFuZGxlciBkZWZhdWx0SGFuZGxlciA9IG5ldyBjb20ud20uYXBwLmIyYi5zZXJ2ZXIu
SFRUUERvY0hhbmRsZXIoKTsKICBwcm90ZWN0ZWQgdm9sYXRpbGUgUm91dGVUYWJsZSByb3V0ZXMg
PSBuZXcgUm91dGVUYWJsZSgpOwoKICAvLyBoYW5kbGUgYW4gSFRUUCByZXF1ZXN0CiAgcHVibGlj
IGZpbmFsIGJvb2xlYW4gcHJvY2Vzcyhjb20ud20uYXBwLmIyYi5zZXJ2ZXIuUHJvdG9jb2xTdGF0
ZSBzdGF0ZSkgdGhyb3dzIGphdmEuaW8uSU9FeGNlcHRpb24sIGNvbS53bS5hcHAuYjJiLnNlcnZl
ci5BY2Nlc3NFeGNlcHRpb24gewogICAgY29tLndtLmFwcC5iMmIuc2VydmVyLkNvbnRlbnRIYW5k
bGVyIGNvbnRlbnRIYW5kbGVyID0gY29tLndtLmFwcC5iMmIuc2VydmVyLlNlcnZlckFQSS5nZXRD
b250ZW50SGFuZGxlcihzdGF0ZS5nZXRDb250ZW50VHlwZSgpKTsKICAgIE1hdGNoUmVzdWx0IG1h
dGNoUmVzdWx0ID0gcm91dGVzLm1hdGNoKHN0YXRlLmdldFJlcXVlc3RUeXBlKCksICIvIiArIHN0
YXRlLmdldEh0dHBSZXF1ZXN0VXJsKCkpOwogICAgYm9vbGVhbiByZXN1bHQgPSBmYWxzZTsKCiAg
ICBpZiAobWF0Y2hSZXN1bHQgIT0gbnVsbCkgewogICAgICB0cnkgewogICAgICAgIC8vIGNvbnZl
cnQgY2FwdHVyZSBVUkkgcGFyYW1ldGVycyB0byBxdWVyeSBzdHJpbmcsIHNvIHRoZXkgZ2V0IGFk
ZGVkIHRvIGlucHV0IHBpcGVsaW5lCiAgICAgICAgLy8gb2YgdGhlIGludm9rZWQgc2VydmljZQog
ICAgICAgIElEYXRhIHBhcmFtZXRlcnMgPSBtYXRjaFJlc3VsdC5nZXRQYXJhbWV0ZXJzKCk7CiAg
ICAgICAgU3RyaW5nIHF1ZXJ5U3RyaW5nID0gc3RhdGUuZ2V0SHR0cFJlcXVlc3RVcmxRdWVyeSgp
OwogICAgICAgIGlmIChxdWVyeVN0cmluZyAhPSBudWxsKSB7CiAgICAgICAgICBJRGF0YSBxdWVy
eVBhcmFtZXRlcnMgPSB0dW5kcmEudXJpLnF1ZXJ5LnBhcnNlKHF1ZXJ5U3RyaW5nLCB0cnVlKTsK
ICAgICAgICAgIElEYXRhVXRpbC5tZXJnZShwYXJhbWV0ZXJzLCBxdWVyeVBhcmFtZXRlcnMpOwog
ICAgICAgICAgcGFyYW1ldGVycyA9IHF1ZXJ5UGFyYW1ldGVyczsKICAgICAgICB9CiAgICAgICAg
c3RhdGUuc2V0SHR0cFJlcXVlc3RVcmxRdWVyeSh0dW5kcmEudXJpLnF1ZXJ5LmVtaXQocGFyYW1l
dGVycywgdHJ1ZSkpOwogICAgICB9IGNhdGNoKFNlcnZpY2VFeGNlcHRpb24gZXgpIHt9CgogICAg
ICBSb3V0ZSByb3V0ZSA9IG1hdGNoUmVzdWx0LmdldFJvdXRlKCk7CgogICAgICBpZiAocm91dGUu
aXNJbnZva2UoKSkgewogICAgICAgIHJlc3VsdCA9IGludm9rZUhhbmRsZXIuX3Byb2Nlc3Moc3Rh
dGUsIGNvbnRlbnRIYW5kbGVyLCBtYXRjaFJlc3VsdC5nZXRSb3V0ZSgpLmdldFNlcnZpY2UoKSk7
CiAgICAgIH0gZWxzZSB7CiAgICAgICAgU3RyaW5nIHRhcmdldCA9IHJvdXRlLmdldFRhcmdldCgp
OwogICAgICAgIGlmICh0YXJnZXQuc3RhcnRzV2l0aCgiLyIpKSB0YXJnZXQgPSB0YXJnZXQuc3Vi
c3RyaW5nKDEsIHRhcmdldC5sZW5ndGgoKSk7CiAgICAgICAgc3RhdGUuc2V0SHR0cFJlcXVlc3RV
cmwodGFyZ2V0KTsKICAgICAgICByZXN1bHQgPSBkZWZhdWx0SGFuZGxlci5wcm9jZXNzKHN0YXRl
KTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgLy8gcmV0dXJuIGZvcmJpZGRlbiBlcnJvcgog
ICAgICBpbnQgY29kZSA9IDQwMzsKICAgICAgc3RhdGUuc2V0UmVzcG9uc2UoY29kZSwgdHVuZHJh
Lmh0dHAucmVzcG9uc2Uuc3RhdHVzKGNvZGUpKTsKICAgICAgcmVzdWx0ID0gdHJ1ZTsKICAgIH0K
CiAgICByZXR1cm4gcmVzdWx0OwogIH0KCiAgcHVibGljIHZvaWQgcmVmcmVzaCgpIHRocm93cyBT
ZXJ2aWNlRXhjZXB0aW9uIHsKICAgIHN5bmNocm9uaXplZCh0aGlzKSB7CiAgICAgIFJvdXRlVGFi
bGUgbmV3Um91dGVzID0gUm91dGVUYWJsZS5jcmVhdGUoKTsKICAgICAgUm91dGVUYWJsZSBvbGRS
b3V0ZXMgPSByb3V0ZXM7CgogICAgICByb3V0ZXMgPSBuZXdSb3V0ZXM7CiAgICAgIHJlZnJlc2hE
aXJlY3RpdmVzKG9sZFJvdXRlcy5nZXREaXJlY3RpdmVzKCksIG5ld1JvdXRlcy5nZXREaXJlY3Rp
dmVzKCkpOwogICAgfQogIH0KCiAgcHJvdGVjdGVkIHZvaWQgcmVmcmVzaERpcmVjdGl2ZXMoamF2
YS51dGlsLlNldDxTdHJpbmc+IG9sZERpcmVjdGl2ZXMsIGphdmEudXRpbC5TZXQ8U3RyaW5nPiBu
ZXdEaXJlY3RpdmVzKSB7CiAgICBqYXZhLnV0aWwuU2V0PFN0cmluZz4gdG9CZUFkZGVkID0gbmV3
IGphdmEudXRpbC5UcmVlU2V0PFN0cmluZz4obmV3RGlyZWN0aXZlcyk7CiAgICB0b0JlQWRkZWQu
cmVtb3ZlQWxsKG9sZERpcmVjdGl2ZXMpOwogICAgcmVnaXN0ZXIodG9CZUFkZGVkKTsKCiAgICBq
YXZhLnV0aWwuU2V0PFN0cmluZz4gdG9CZVJlbW92ZWQgPSBuZXcgamF2YS51dGlsLlRyZWVTZXQ8
U3RyaW5nPihvbGREaXJlY3RpdmVzKTsKICAgIHRvQmVSZW1vdmVkLnJlbW92ZUFsbChuZXdEaXJl
Y3RpdmVzKTsKICAgIHVucmVnaXN0ZXIodG9CZVJlbW92ZWQpOwogIH0KCiAgLy8gcmVnaXN0ZXJz
IHRoZSBnaXZlbiBkaXJlY3RpdmUgd2l0aCB0aGUgSVMgSFRUUCByZXF1ZXN0IGRpc3BhdGNoZXIK
ICBwcm90ZWN0ZWQgdm9pZCByZWdpc3RlcihTdHJpbmcgZGlyZWN0aXZlKSB7CiAgICBjb20ud20u
YXBwLmIyYi5zZXJ2ZXIuSFRUUERpc3BhdGNoLmFkZEhhbmRsZXIoZGlyZWN0aXZlLCB0aGlzKTsK
ICB9CgogIC8vIHJlZ2lzdGVycyB0aGUgZ2l2ZW4gZGlyZWN0aXZlIHdpdGggdGhlIElTIEhUVFAg
cmVxdWVzdCBkaXNwYXRjaGVyCiAgcHJvdGVjdGVkIHZvaWQgcmVnaXN0ZXIoamF2YS51dGlsLkNv
bGxlY3Rpb248U3RyaW5nPiBkaXJlY3RpdmVzKSB7CiAgICBmb3IgKFN0cmluZyBkaXJlY3RpdmUg
OiBkaXJlY3RpdmVzKSB7CiAgICAgIHJlZ2lzdGVyKGRpcmVjdGl2ZSk7CiAgICB9CiAgfQoKICAv
LyB1bnJlZ2lzdGVycyB0aGUgZ2l2ZW4gZGlyZWN0aXZlIGZyb20gdGhlIElTIEhUVFAgcmVxdWVz
dCBkaXNwYXRjaGVyCiAgcHJvdGVjdGVkIHZvaWQgdW5yZWdpc3RlcihTdHJpbmcgZGlyZWN0aXZl
KSB7CiAgICBjb20ud20uYXBwLmIyYi5zZXJ2ZXIuSFRUUERpc3BhdGNoLnJlbW92ZUhhbmRsZXIo
ZGlyZWN0aXZlKTsKICB9CgogIC8vIHVucmVnaXN0ZXJzIHRoZSBnaXZlbiBkaXJlY3RpdmUgZnJv
bSB0aGUgSVMgSFRUUCByZXF1ZXN0IGRpc3BhdGNoZXIKICBwcm90ZWN0ZWQgdm9pZCB1bnJlZ2lz
dGVyKGphdmEudXRpbC5Db2xsZWN0aW9uPFN0cmluZz4gZGlyZWN0aXZlcykgewogICAgZm9yIChT
dHJpbmcgZGlyZWN0aXZlIDogZGlyZWN0aXZlcykgewogICAgICB1bnJlZ2lzdGVyKGRpcmVjdGl2
ZSk7CiAgICB9CiAgfQoKICAvLyB1bnJlZ2lzdGVycyB0aGUgaGFuZGxlciBmb3IgYWxsIGRpcmVj
dGl2ZXMgZnJvbSB0aGUgSVMgSFRUUCByZXF1ZXN0IGRpc3BhdGNoZXIKICAvLyBhbmQgY2xlYXJz
IGFsbCByb3V0ZXMKICBwdWJsaWMgdm9pZCBjbGVhcigpIHsKICAgIHN5bmNocm9uaXplZCh0aGlz
KSB7CiAgICAgIHVucmVnaXN0ZXIocm91dGVzLmdldERpcmVjdGl2ZXMoKSk7CiAgICAgIHJvdXRl
cyA9IG5ldyBSb3V0ZVRhYmxlKCk7CiAgICB9CiAgfQoKICAvLyByZXR1cm5zIHRoZSBIVFRQIHJv
dXRpbmcgdGFibGUgYW4gYW4gSURhdGFbXSBkb2N1bWVudCBsaXN0CiAgcHVibGljIElEYXRhW10g
bGlzdCgpIHsKICAgIHJldHVybiByb3V0ZXMubGlzdCgpOwogIH0KfQoKLy8gcmVwcmVzZW50cyBh
IHRhYmxlIG9mIHJvdXRpbmcgaW5zdHJ1Y3Rpb25zLCBvcmRlcmVkIGJ5IEhUVFAgZGlzcGF0Y2gg
ZGlyZWN0aXZlCnB1YmxpYyBzdGF0aWMgY2xhc3MgUm91dGVUYWJsZSBleHRlbmRzIGphdmEudXRp
bC5UcmVlTWFwPFN0cmluZywgUm91dGVMaXN0PiB7CiAgcHJvdGVjdGVkIGZpbmFsIHN0YXRpYyBq
YXZhLnV0aWwucmVnZXguUGF0dGVybiByb3V0ZVBhdHRlcm4gPSBqYXZhLnV0aWwucmVnZXguUGF0
dGVybi5jb21waWxlKCIoP2kpKD9tKV5bIFxcdF0qKGdldHxwdXR8cG9zdHxoZWFkfGNvbm5lY3R8
b3B0aW9uc3xkZWxldGV8dHJhY2UpWyBcXHRdKyhcXC8/KFtee31cXHNcXC9dKykoXFwvXFxTKyk/
KVsgXFx0XSsoXFxTKykoWyBcXHRdKyguKilbIFxcdF0qKT8kIik7CiAgcHJvdGVjdGVkIGZpbmFs
IHN0YXRpYyBTdHJpbmcgY29uZmlndXJhdGlvbkZpbGVOYW1lID0gImh0dHAtcm91dGVzLmNuZiI7
CiAgcHJvdGVjdGVkIGZpbmFsIHN0YXRpYyBqYXZhLnV0aWwuU2V0PFN0cmluZz4gcHJvaGliaXRl
ZERpcmVjdGl2ZXMgPSBuZXcgamF2YS51dGlsLlRyZWVTZXQ8U3RyaW5nPigpOwoKICBzdGF0aWMg
ewogICAgLy8gc2V0IHVwIHByb2hpYml0ZWQgZGlyZWN0aXZlcyBzbyB3ZSBkb24ndCBicmVhayBi
dWlsdC1pbiBJUyBmdW5jdGlvbmFsaXR5CiAgICBwcm9oaWJpdGVkRGlyZWN0aXZlcy5hZGQoImlu
dm9rZSIpOwogICAgcHJvaGliaXRlZERpcmVjdGl2ZXMuYWRkKGNvbS53bS51dGlsLkNvbmZpZy5n
ZXRQcm9wZXJ0eSgiaW52b2tlIiwgIndhdHQuc2VydmVyLmludm9rZURpcmVjdGl2ZSIpKTsKICAg
IHByb2hpYml0ZWREaXJlY3RpdmVzLmFkZChjb20ud20uYXBwLmIyYi5zZXJ2ZXIuU09BUC5nZXRT
T0FQZGlyZWN0aXZlKCkpOwogICAgcHJvaGliaXRlZERpcmVjdGl2ZXMuYWRkKCJ3ZWIiKTsKICAg
IHByb2hpYml0ZWREaXJlY3RpdmVzLmFkZCgid20tbWVzc2FnZSIpOwogICAgcHJvaGliaXRlZERp
cmVjdGl2ZXMuYWRkKCJ3cyIpOwogIH0KCiAgcHVibGljIGphdmEudXRpbC5TZXQ8U3RyaW5nPiBn
ZXREaXJlY3RpdmVzKCkgewogICAgcmV0dXJuIGtleVNldCgpOwogIH0KCiAgLy8gYWRkIGFuIEhU
VFAgcm91dGUgaW5zdHJ1Y3Rpb24gdG8gdGhlIGdpdmVuIHJvdXRpbmcgdGFibGUKICBwdWJsaWMg
dm9pZCBwdXQoUm91dGUgcm91dGUpIHsKICAgIFN0cmluZyBkaXJlY3RpdmUgPSByb3V0ZS5nZXRE
aXJlY3RpdmUoKTsKICAgIGlmICghcHJvaGliaXRlZERpcmVjdGl2ZXMuY29udGFpbnMoZGlyZWN0
aXZlKSkgewogICAgICBSb3V0ZUxpc3QgbGlzdCA9IGdldChkaXJlY3RpdmUpOwogICAgICBwdXQo
ZGlyZWN0aXZlLCBSb3V0ZUxpc3QuYWRkKGxpc3QsIHJvdXRlKSk7CiAgICB9CiAgfQoKICBwdWJs
aWMgc3RhdGljIFJvdXRlVGFibGUgY3JlYXRlKCkgdGhyb3dzIFNlcnZpY2VFeGNlcHRpb24gewog
ICAgUm91dGVUYWJsZSB0YWJsZSA9IG51bGw7CgogICAgamF2YS51dGlsLkxpc3Q8amF2YS5pby5G
aWxlPiBmaWxlcyA9IG5ldyBqYXZhLnV0aWwuQXJyYXlMaXN0PGphdmEuaW8uRmlsZT4oKTsKICAg
IGZpbGVzLmFkZChuZXcgamF2YS5pby5GaWxlKGNvbS53bS5hcHAuYjJiLnNlcnZlci5TZXJ2ZXJB
UEkuZ2V0U2VydmVyQ29uZmlnRGlyKCksIGNvbmZpZ3VyYXRpb25GaWxlTmFtZSkpOwoKICAgIFN0
cmluZ1tdIHBhY2thZ2VOYW1lcyA9IGNvbS53bS5hcHAuYjJiLnNlcnZlci5TZXJ2ZXJBUEkuZ2V0
RW5hYmxlZFBhY2thZ2VzKCk7CiAgICBqYXZhLnV0aWwuQXJyYXlzLnNvcnQocGFja2FnZU5hbWVz
KTsgLy8gbWFrZSBzdXJlIGxpc3QgaXMgaW4gYSBwcmVkaWNhdGFibGUgb3JkZXIKICAgIGZvciAo
U3RyaW5nIHBhY2thZ2VOYW1lIDogcGFja2FnZU5hbWVzKSB7CiAgICAgIGZpbGVzLmFkZChuZXcg
amF2YS5pby5GaWxlKGNvbS53bS5hcHAuYjJiLnNlcnZlci5TZXJ2ZXJBUEkuZ2V0UGFja2FnZUNv
bmZpZ0RpcihwYWNrYWdlTmFtZSksIGNvbmZpZ3VyYXRpb25GaWxlTmFtZSkpOwogICAgfQoKICAg
IGphdmEudXRpbC5NYXA8amF2YS5pby5GaWxlLCBTdHJpbmc+IGNvbnRlbnRzID0gbmV3IGphdmEu
dXRpbC5MaW5rZWRIYXNoTWFwPGphdmEuaW8uRmlsZSwgU3RyaW5nPigpOwogICAgZm9yIChqYXZh
LmlvLkZpbGUgZmlsZSA6IGZpbGVzKSB7CiAgICAgIGlmIChmaWxlLmV4aXN0cygpICYmIGZpbGUu
aXNGaWxlKCkpIGNvbnRlbnRzLnB1dChmaWxlLCAoU3RyaW5nKXR1bmRyYS5maWxlLnJlYWQoZmls
ZSwgInN0cmluZyIsIG51bGwpKTsKICAgIH0KCiAgICByZXR1cm4gdGFibGUuY3JlYXRlKGNvbnRl
bnRzKTsKICB9CgogIHByb3RlY3RlZCBzdGF0aWMgUm91dGVUYWJsZSBjcmVhdGUoamF2YS51dGls
Lk1hcDxqYXZhLmlvLkZpbGUsIFN0cmluZz4gY29udGVudHMpIHsKICAgIFJvdXRlVGFibGUgdGFi
bGUgPSBuZXcgUm91dGVUYWJsZSgpOwoKICAgIGlmIChjb250ZW50cyAhPSBudWxsKSB7CiAgICAg
IGZvciAoamF2YS51dGlsLk1hcC5FbnRyeTxqYXZhLmlvLkZpbGUsIFN0cmluZz4gZW50cnkgOiBj
b250ZW50cy5lbnRyeVNldCgpKSB7CiAgICAgICAgamF2YS5pby5GaWxlIHNvdXJjZSA9IGVudHJ5
LmdldEtleSgpOwogICAgICAgIFN0cmluZyBjb250ZW50ID0gZW50cnkuZ2V0VmFsdWUoKTsKCiAg
ICAgICAgamF2YS51dGlsLnJlZ2V4Lk1hdGNoZXIgbWF0Y2hlciA9IHJvdXRlUGF0dGVybi5tYXRj
aGVyKGNvbnRlbnQpOwogICAgICAgIHdoaWxlIChtYXRjaGVyLmZpbmQoKSkgewogICAgICAgICAg
U3RyaW5nIG1ldGhvZCA9IG1hdGNoZXIuZ3JvdXAoMSk7CiAgICAgICAgICBTdHJpbmcgdXJpID0g
bWF0Y2hlci5ncm91cCgyKTsKICAgICAgICAgIFN0cmluZyB0YXJnZXQgPSBtYXRjaGVyLmdyb3Vw
KDUpOwogICAgICAgICAgU3RyaW5nIGRlc2NyaXB0aW9uID0gbWF0Y2hlci5ncm91cCg3KTsKICAg
ICAgICAgIGlmIChkZXNjcmlwdGlvbiAhPSBudWxsICYmIGRlc2NyaXB0aW9uLmVxdWFscygiIikp
IGRlc2NyaXB0aW9uID0gbnVsbDsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHRhYmxlLnB1
dChuZXcgUm91dGUobWV0aG9kLCB1cmksIHRhcmdldCwgZGVzY3JpcHRpb24sIHNvdXJjZSkpOwog
ICAgICAgICAgfSBjYXRjaChFeGNlcHRpb24gZXgpIHt9CiAgICAgICAgfQogICAgICB9CiAgICB9
CgogICAgcmV0dXJuIHRhYmxlOwogIH0KCiAgLy8gcmV0dXJucyB0aGUgbWF0Y2hpbmcgcm91dGUg
Zm9yIHRoZSBnaXZlbiBIVFRQIHJlcXVlc3QgbWV0aG9kIGFuZCBVUkksIGlmIGZvdW5kCiAgcHVi
bGljIE1hdGNoUmVzdWx0IG1hdGNoKE1ldGhvZCBtZXRob2QsIFN0cmluZyB1cmkpIHsKICAgIFN0
cmluZyBkaXJlY3RpdmUgPSBSb3V0ZS5nZXREaXJlY3RpdmUodXJpKTsKICAgIFJvdXRlTGlzdCBy
b3V0ZXMgPSBnZXQoZGlyZWN0aXZlKTsKICAgIE1hdGNoUmVzdWx0IHJlc3VsdCA9IG51bGw7Cgog
ICAgaWYgKHJvdXRlcyAhPSBudWxsKSByZXN1bHQgPSByb3V0ZXMubWF0Y2gobWV0aG9kLCB1cmkp
OwoKICAgIHJldHVybiByZXN1bHQ7CiAgfQoKICAvLyByZXR1cm5zIHRoZSBtYXRjaGluZyByb3V0
ZSBmb3IgdGhlIGdpdmVuIEhUVFAgcmVxdWVzdCBtZXRob2QgYW5kIFVSSSwgaWYgZm91bmQKICBw
dWJsaWMgTWF0Y2hSZXN1bHQgbWF0Y2goU3RyaW5nIG1ldGhvZCwgU3RyaW5nIHVyaSkgewogICAg
cmV0dXJuIG1hdGNoKE1ldGhvZC52YWx1ZU9mKG1ldGhvZC50b1VwcGVyQ2FzZSgpKSwgdXJpKTsK
ICB9CgogIC8vIHJldHVybnMgdGhlIG1hdGNoaW5nIHJvdXRlIGZvciB0aGUgZ2l2ZW4gSFRUUCBy
ZXF1ZXN0IG1ldGhvZCBhbmQgVVJJLCBpZiBmb3VuZAogIHB1YmxpYyBNYXRjaFJlc3VsdCBtYXRj
aChpbnQgbWV0aG9kLCBTdHJpbmcgdXJpKSB7CiAgICByZXR1cm4gbWF0Y2goTWV0aG9kLnZhbHVl
T2YobWV0aG9kKSwgdXJpKTsKICB9CgogIC8vIHJldHVybnMgdGhlIEhUVFAgcm91dGluZyB0YWJs
ZSBhbiBhbiBJRGF0YVtdIGRvY3VtZW50IGxpc3QKICBwdWJsaWMgSURhdGFbXSBsaXN0KCkgewog
ICAgamF2YS51dGlsLkxpc3Q8SURhdGE+IG91dHB1dCA9IG5ldyBqYXZhLnV0aWwuQXJyYXlMaXN0
PElEYXRhPihzaXplKCkpOwoKICAgIGZvciAoU3RyaW5nIGRpcmVjdGl2ZSA6IGdldERpcmVjdGl2
ZXMoKSkgewogICAgICBJRGF0YSBpdGVtID0gSURhdGFGYWN0b3J5LmNyZWF0ZSgpOwogICAgICBJ
RGF0YUN1cnNvciBjdXJzb3IgPSBpdGVtLmdldEN1cnNvcigpOwogICAgICBJRGF0YVV0aWwucHV0
KGN1cnNvciwgImRpcmVjdGl2ZSIsIGRpcmVjdGl2ZSk7CiAgICAgIElEYXRhW10gbGlzdCA9IGdl
dChkaXJlY3RpdmUpLmxpc3QoKTsKICAgICAgaWYgKGxpc3QgIT0gbnVsbCkgewogICAgICAgIElE
YXRhVXRpbC5wdXQoY3Vyc29yLCAicm91dGVzIiwgbGlzdCk7CiAgICAgICAgSURhdGFVdGlsLnB1
dChjdXJzb3IsICJyb3V0ZXMubGVuZ3RoIiwgIiIgKyBsaXN0Lmxlbmd0aCk7CiAgICAgIH0KICAg
ICAgY3Vyc29yLmRlc3Ryb3koKTsKCiAgICAgIG91dHB1dC5hZGQoaXRlbSk7CiAgICB9CgogICAg
cmV0dXJuIChJRGF0YVtdKW91dHB1dC50b0FycmF5KG5ldyBJRGF0YVswXSk7CiAgfQp9CgovLyBh
IGxpc3Qgb2Ygcm91dGVzCnB1YmxpYyBzdGF0aWMgY2xhc3MgUm91dGVMaXN0IGV4dGVuZHMgamF2
YS51dGlsLkFycmF5TGlzdDxSb3V0ZT4gewogIHB1YmxpYyBzdGF0aWMgUm91dGVMaXN0IGFkZChS
b3V0ZUxpc3QgbGlzdCwgUm91dGUgcm91dGUpIHsKICAgIGlmIChsaXN0ID09IG51bGwpIGxpc3Qg
PSBuZXcgUm91dGVMaXN0KCk7CiAgICBsaXN0LmFkZChyb3V0ZSk7CiAgICByZXR1cm4gbGlzdDsK
ICB9CgogIHB1YmxpYyBJRGF0YVtdIGxpc3QoKSB7CiAgICBqYXZhLnV0aWwuTGlzdDxJRGF0YT4g
b3V0cHV0ID0gbmV3IGphdmEudXRpbC5BcnJheUxpc3Q8SURhdGE+KHNpemUoKSk7CiAgICBmb3Ig
KFJvdXRlIHJvdXRlIDogdGhpcykgb3V0cHV0LmFkZChyb3V0ZS5nZXRJRGF0YSgpKTsKICAgIHJl
dHVybiAoSURhdGFbXSlvdXRwdXQudG9BcnJheShuZXcgSURhdGFbMF0pOwogIH0KCiAgLy8gcmV0
dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBIVFRQIHJlcXVlc3QgbWV0aG9kIGFuZCBVUkkgbWF0Y2gg
dGhpcyByb3V0aW5nIGluc3RydWN0aW9uCiAgcHVibGljIE1hdGNoUmVzdWx0IG1hdGNoKE1ldGhv
ZCBtZXRob2QsIFN0cmluZyB1cmkpIHsKICAgIGZvciAoUm91dGUgcm91dGUgOiB0aGlzKSB7CiAg
ICAgIElEYXRhIHBhcmFtZXRlcnMgPSByb3V0ZS5tYXRjaChtZXRob2QsIHVyaSk7CiAgICAgIGlm
IChwYXJhbWV0ZXJzICE9IG51bGwpIHsKICAgICAgICByZXR1cm4gbmV3IE1hdGNoUmVzdWx0KHJv
dXRlLCBwYXJhbWV0ZXJzKTsKICAgICAgfSAgICAgCiAgICB9CiAgICByZXR1cm4gbnVsbDsKICB9
CgogIC8vIHJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gSFRUUCByZXF1ZXN0IG1ldGhvZCBhbmQg
VVJJIG1hdGNoIHRoaXMgcm91dGluZyBpbnN0cnVjdGlvbgogIHB1YmxpYyBNYXRjaFJlc3VsdCBt
YXRjaChTdHJpbmcgbWV0aG9kLCBTdHJpbmcgdXJpKSB7CiAgICByZXR1cm4gbWF0Y2goTWV0aG9k
LnZhbHVlT2YobWV0aG9kLnRvVXBwZXJDYXNlKCkpLCB1cmkpOwogIH0KCiAgLy8gcmV0dXJucyB0
cnVlIGlmIHRoZSBnaXZlbiBIVFRQIHJlcXVlc3QgbWV0aG9kIGFuZCBVUkkgbWF0Y2ggdGhpcyBy
b3V0aW5nIGluc3RydWN0aW9uCiAgcHVibGljIE1hdGNoUmVzdWx0IG1hdGNoKGludCBtZXRob2Qs
IFN0cmluZyB1cmkpIHsKICAgIHJldHVybiBtYXRjaChNZXRob2QudmFsdWVPZihtZXRob2QpLCB1
cmkpOwogIH0KfQoKLy8gcmVwcmVzZW50cyBhIG1hdGNoZWQgcm91dGUgYW5kIHRoZSBjYXB0dXJl
ZCBVUkkgcGFyYW1ldGVycwpwdWJsaWMgc3RhdGljIGNsYXNzIE1hdGNoUmVzdWx0IHsKICBwcm90
ZWN0ZWQgUm91dGUgcm91dGU7CiAgcHJvdGVjdGVkIElEYXRhIHBhcmFtZXRlcnM7CgogIHB1Ymxp
YyBNYXRjaFJlc3VsdChSb3V0ZSByb3V0ZSwgSURhdGEgcGFyYW1ldGVycykgewogICAgdGhpcy5y
b3V0ZSA9IHJvdXRlOwogICAgdGhpcy5wYXJhbWV0ZXJzID0gcGFyYW1ldGVyczsKICB9CgogIHB1
YmxpYyBSb3V0ZSBnZXRSb3V0ZSgpIHsKICAgIHJldHVybiByb3V0ZTsKICB9CgogIHB1YmxpYyBJ
RGF0YSBnZXRQYXJhbWV0ZXJzKCkgewogICAgcmV0dXJuIHBhcmFtZXRlcnM7CiAgfQp9CgovLyBB
biBpbmRpdmlkdWFsIHJvdXRpbmcgaW5zdHJ1Y3Rpb24gd2hpY2ggbWFwcyBhbiBIVFRQIG1ldGhv
ZCBhbmQgVVJJIHRlbXBsYXRlIHRvIGFuIGltcGxlbWVudGF0aW9uIHNlcnZpY2UKcHVibGljIHN0
YXRpYyBjbGFzcyBSb3V0ZSBpbXBsZW1lbnRzIGNvbS53bS51dGlsLmNvZGVyLklEYXRhQ29kYWJs
ZSB7CiAgcHJvdGVjdGVkIHN0YXRpYyBmaW5hbCBqYXZhLnV0aWwucmVnZXguUGF0dGVybiBTRVJW
SUNFX1BBVFRFUk4gPSBqYXZhLnV0aWwucmVnZXguUGF0dGVybi5jb21waWxlKCJeKChbXlxcc1xc
LlxcLzpdKykoXFwuW15cXHNcXC5cXC86XSspKikoOihbXlxcc1xcLlxcLzpdKykpJCIpOwogIHBy
b3RlY3RlZCBNZXRob2QgbWV0aG9kOwogIHByb3RlY3RlZCBvcmcuc3ByaW5nZnJhbWV3b3JrLndl
Yi51dGlsLlVyaVRlbXBsYXRlIHVyaTsKICBwcm90ZWN0ZWQgYm9vbGVhbiBpc0ludm9rZTsKICBw
cm90ZWN0ZWQgY29tLndtLmxhbmcubnMuTlNOYW1lIHNlcnZpY2U7CiAgcHJvdGVjdGVkIFN0cmlu
ZyB0YXJnZXQ7CiAgcHJvdGVjdGVkIFN0cmluZyBkZXNjcmlwdGlvbjsKICBwcm90ZWN0ZWQgamF2
YS5pby5GaWxlIHNvdXJjZTsKCiAgLy8gY29uc3RydWN0IGEgbmV3IHJvdXRpbmcgaW5zdHJ1Y3Rp
b24KICBwdWJsaWMgUm91dGUoTWV0aG9kIG1ldGhvZCwgU3RyaW5nIHVyaSwgU3RyaW5nIHRhcmdl
dCwgU3RyaW5nIGRlc2NyaXB0aW9uLCBqYXZhLmlvLkZpbGUgc291cmNlKSB7CiAgICBpbml0aWFs
aXplKG1ldGhvZCwgdXJpLCB0YXJnZXQsIGRlc2NyaXB0aW9uLCBzb3VyY2UpOwogIH0KCiAgLy8g
Y29uc3RydWN0IGEgbmV3IHJvdXRpbmcgaW5zdHJ1Y3Rpb24KICBwdWJsaWMgUm91dGUoU3RyaW5n
IG1ldGhvZCwgU3RyaW5nIHVyaSwgU3RyaW5nIHRhcmdldCwgU3RyaW5nIGRlc2NyaXB0aW9uLCBq
YXZhLmlvLkZpbGUgc291cmNlKSB7CiAgICBpbml0aWFsaXplKG1ldGhvZCwgdXJpLCB0YXJnZXQs
IGRlc2NyaXB0aW9uLCBzb3VyY2UpOwogIH0KCiAgLy8gY29uc3RydWN0IGEgbmV3IHJvdXRpbmcg
aW5zdHJ1Y3Rpb24KICBwdWJsaWMgUm91dGUoaW50IG1ldGhvZCwgU3RyaW5nIHVyaSwgU3RyaW5n
IHRhcmdldCwgU3RyaW5nIGRlc2NyaXB0aW9uLCBqYXZhLmlvLkZpbGUgc291cmNlKSB7CiAgICBp
bml0aWFsaXplKG1ldGhvZCwgdXJpLCB0YXJnZXQsIGRlc2NyaXB0aW9uLCBzb3VyY2UpOwogIH0K
CiAgLy8gY29uc3RydWN0IGEgbmV3IHJvdXRpbmcgaW5zdHJ1Y3Rpb24gZnJvbSB0aGUgZ2l2ZW4g
SURhdGEgZG9jdW1lbnQKICBwdWJsaWMgUm91dGUoSURhdGEgaW5wdXQpIHsKICAgIHNldElEYXRh
KGlucHV0KTsKICB9CgogIC8vIHJldHVybnMgdGhlIEhUVFAgcmVxdWVzdCBtZXRob2QgdGhpcyBy
b3V0aW5nIGluc3RydWN0aW9uIG1hdGNoZXMKICBwdWJsaWMgTWV0aG9kIGdldE1ldGhvZCgpIHsK
ICAgIHJldHVybiBtZXRob2Q7CiAgfQoKICAvLyByZXR1cm5zIHRoZSBVUkkgdGVtcGxhdGUgdGhp
cyByb3V0aW5nIGluc3RydWN0aW9uIG1hdGNoZXMKICBwdWJsaWMgb3JnLnNwcmluZ2ZyYW1ld29y
ay53ZWIudXRpbC5VcmlUZW1wbGF0ZSBnZXRVUkkoKSB7CiAgICByZXR1cm4gdXJpOwogIH0KCiAg
Ly8gcmV0dXJucyB0aGUgdGFyZ2V0IHdoaWNoIGlzIGV4ZWN1dGVkIGZvciB0aGlzIHJvdXRpbmcg
aW5zdHJ1Y3Rpb24KICBwdWJsaWMgU3RyaW5nIGdldFRhcmdldCgpIHsKICAgIHJldHVybiB0YXJn
ZXQ7CiAgfQoKICAvLyByZXR1cm5zIHRydWUgaWYgdGhlIHRhcmdldCBpcyBhIHNlcnZpY2UgaW52
b2NhdGlvbgogIHB1YmxpYyBib29sZWFuIGlzSW52b2tlKCkgewogICAgcmV0dXJuIGlzSW52b2tl
OwogIH0KCiAgLy8gcmV0dXJucyB0cnVlIGlmIHRoZSB0YXJnZXQgaXMgYSBkb2N1bWVudAogIHB1
YmxpYyBib29sZWFuIGlzRG9jdW1lbnQoKSB7CiAgICByZXR1cm4gIWlzSW52b2tlOwogIH0KCiAg
Ly8gcmV0dXJucyB0aGUgc2VydmljZSB3aGljaCBpcyBpbnZva2VkIGZvciB0aGlzIHJvdXRpbmcg
aW5zdHJ1Y3Rpb24KICBwdWJsaWMgY29tLndtLmxhbmcubnMuTlNOYW1lIGdldFNlcnZpY2UoKSB7
CiAgICByZXR1cm4gc2VydmljZTsKICB9CgogIC8vIHJldHVybnMgdGhlIGRlc2NyaXB0aW9uIG9m
IHRoaXMgcm91dGluZyBpbnN0cnVjdGlvbgogIHB1YmxpYyBTdHJpbmcgZ2V0RGVzY3JpcHRpb24o
KSB7CiAgICByZXR1cm4gZGVzY3JpcHRpb247CiAgfQoKICAvLyByZXR1cm5zIHRoZSBzb3VyY2Ug
ZmlsZSBmb3IgdGhpcyByb3V0aW5nIGluc3RydWN0aW9uCiAgcHVibGljIGphdmEuaW8uRmlsZSBn
ZXRTb3VyY2UoKSB7CiAgICByZXR1cm4gc291cmNlOwogIH0gIAoKICAvLyByZXR1cm5zIHRoZSBI
VFRQIHJlcXVlc3QgZGlzcGF0Y2hlciBkaXJlY3RpdmUgZm9yIHRoaXMgSFRUUCByb3V0aW5nIGlu
c3RydWN0aW9uCiAgcHVibGljIFN0cmluZyBnZXREaXJlY3RpdmUoKSB7CiAgICByZXR1cm4gZ2V0
RGlyZWN0aXZlKHVyaS50b1N0cmluZygpKTsKICB9CgogIC8vIHJldHVybnMgdGhlIEhUVFAgcmVx
dWVzdCBkaXNwYXRjaGVyIGRpcmVjdGl2ZSBmb3IgdGhpcyBnaXZlbiBVUkkgc3RyaW5nCiAgcHVi
bGljIHN0YXRpYyBTdHJpbmcgZ2V0RGlyZWN0aXZlKFN0cmluZyB1cmkpIHsKICAgIGlmICh1cmkg
PT0gbnVsbCkgcmV0dXJuIG51bGw7CgogICAgdXJpID0gdXJpLnRyaW0oKTsKICAgIGlmICh1cmku
c3RhcnRzV2l0aCgiLyIpKSB1cmkgPSB1cmkuc3Vic3RyaW5nKDEsIHVyaS5sZW5ndGgoKSk7CiAg
ICBpbnQgaW5kZXggPSB1cmkuaW5kZXhPZigiLyIpOwogICAgaWYgKGluZGV4ID49IDApIHVyaSA9
IHVyaS5zdWJzdHJpbmcoMCwgaW5kZXgpOwoKICAgIHJldHVybiB1cmk7CiAgfQoKICAvLyByZXR1
cm5zIHRydWUgaWYgdGhlIGdpdmVuIEhUVFAgcmVxdWVzdCBtZXRob2QgYW5kIFVSSSBtYXRjaCB0
aGlzIHJvdXRpbmcgaW5zdHJ1Y3Rpb24KICBwdWJsaWMgYm9vbGVhbiBtYXRjaGVzKE1ldGhvZCBt
ZXRob2QsIFN0cmluZyB1cmkpIHsKICAgIHJldHVybiB0aGlzLm1ldGhvZCAhPSBudWxsICYmIHRo
aXMubWV0aG9kID09IG1ldGhvZCAmJiB0aGlzLnVyaSAhPSBudWxsICYmIHRoaXMudXJpLm1hdGNo
ZXModXJpKTsKICB9CgogIC8vIHJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gSFRUUCByZXF1ZXN0
IG1ldGhvZCBhbmQgVVJJIG1hdGNoIHRoaXMgcm91dGluZyBpbnN0cnVjdGlvbgogIHB1YmxpYyBi
b29sZWFuIG1hdGNoZXMoU3RyaW5nIG1ldGhvZCwgU3RyaW5nIHVyaSkgewogICAgcmV0dXJuIG1h
dGNoZXMoTWV0aG9kLnZhbHVlT2YobWV0aG9kLnRvVXBwZXJDYXNlKCkpLCB1cmkpOwogIH0KCiAg
Ly8gcmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBIVFRQIHJlcXVlc3QgbWV0aG9kIGFuZCBVUkkg
bWF0Y2ggdGhpcyByb3V0aW5nIGluc3RydWN0aW9uCiAgcHVibGljIGJvb2xlYW4gbWF0Y2hlcyhp
bnQgbWV0aG9kLCBTdHJpbmcgdXJpKSB7CiAgICByZXR1cm4gbWF0Y2hlcyhNZXRob2QudmFsdWVP
ZihtZXRob2QpLCB1cmkpOwogIH0KCiAgLy8gcmV0dXJucyBhbiBJRGF0YSBkb2N1bWVudCBjb250
YWluaW5nIG1hdGNoZWQgVVJJIHRlbXBsYXRlIHBhcmFtZXRlcnMgZXh0cmFjdGVkIGZyb20gdGhl
IGdpdmVuIFVSSQogIHB1YmxpYyBJRGF0YSBtYXRjaChNZXRob2QgbWV0aG9kLCBTdHJpbmcgdXJp
KSB7CiAgICBJRGF0YSBvdXRwdXQgPSBudWxsOwoKICAgIGlmIChtYXRjaGVzKG1ldGhvZCwgdXJp
KSkgewogICAgICBvdXRwdXQgPSBJRGF0YUZhY3RvcnkuY3JlYXRlKCk7CiAgICAgIElEYXRhQ3Vy
c29yIGN1cnNvciA9IG91dHB1dC5nZXRDdXJzb3IoKTsKICAgICAgamF2YS51dGlsLk1hcDxTdHJp
bmcsIFN0cmluZz4gcGFyYW1ldGVycyA9IHRoaXMudXJpLm1hdGNoKHVyaSk7CiAgICAgIGZvciAo
U3RyaW5nIGtleSA6IHBhcmFtZXRlcnMua2V5U2V0KCkpIHsKICAgICAgICBTdHJpbmcgdmFsdWUg
PSBwYXJhbWV0ZXJzLmdldChrZXkpOwogICAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSBJRGF0YVV0
aWwucHV0KGN1cnNvciwga2V5LCB2YWx1ZSk7CiAgICAgIH0KICAgICAgY3Vyc29yLmRlc3Ryb3ko
KTsKICAgIH0KCiAgICByZXR1cm4gb3V0cHV0OwogIH0KCiAgLy8gcmV0dXJucyBhbiBJRGF0YSBk
b2N1bWVudCBjb250YWluaW5nIG1hdGNoZWQgVVJJIHRlbXBsYXRlIHBhcmFtZXRlcnMgZXh0cmFj
dGVkIGZyb20gdGhlIGdpdmVuIFVSSQogIHB1YmxpYyBJRGF0YSBtYXRjaChTdHJpbmcgbWV0aG9k
LCBTdHJpbmcgdXJpKSB7CiAgICByZXR1cm4gbWF0Y2goTWV0aG9kLnZhbHVlT2YobWV0aG9kLnRv
VXBwZXJDYXNlKCkpLCB1cmkpOwogIH0KCiAgLy8gcmV0dXJucyBhbiBJRGF0YSBkb2N1bWVudCBj
b250YWluaW5nIG1hdGNoZWQgVVJJIHRlbXBsYXRlIHBhcmFtZXRlcnMgZXh0cmFjdGVkIGZyb20g
dGhlIGdpdmVuIFVSSQogIHB1YmxpYyBJRGF0YSBtYXRjaChpbnQgbWV0aG9kLCBTdHJpbmcgdXJp
KSB7CiAgICByZXR1cm4gbWF0Y2goTWV0aG9kLnZhbHVlT2YobWV0aG9kKSwgdXJpKTsKICB9Cgog
IC8vIHJldHVybnMgdGhpcyBIVFRQIHJvdXRpbmcgaW5zdHJ1Y3Rpb24gYXMgYW4gSURhdGEgZG9j
dW1lbnQKICBwdWJsaWMgSURhdGEgZ2V0SURhdGEoKSB7CiAgICBJRGF0YSBvdXRwdXQgPSBJRGF0
YUZhY3RvcnkuY3JlYXRlKCk7CgogICAgSURhdGFDdXJzb3IgY3Vyc29yID0gb3V0cHV0LmdldEN1
cnNvcigpOwogICAgSURhdGFVdGlsLnB1dChjdXJzb3IsICJtZXRob2QiLCBtZXRob2QubmFtZSgp
LnRvTG93ZXJDYXNlKCkpOwogICAgSURhdGFVdGlsLnB1dChjdXJzb3IsICJ1cmkiLCB1cmkudG9T
dHJpbmcoKSk7CiAgICBJRGF0YVV0aWwucHV0KGN1cnNvciwgInRhcmdldCIsIHRhcmdldCk7CiAg
ICBpZiAoZGVzY3JpcHRpb24gIT0gbnVsbCkgSURhdGFVdGlsLnB1dChjdXJzb3IsICJkZXNjcmlw
dGlvbiIsIGRlc2NyaXB0aW9uKTsKICAgIGlmIChzb3VyY2UgIT0gbnVsbCkgewogICAgICB0cnkg
ewogICAgICAgIElEYXRhVXRpbC5wdXQoY3Vyc29yLCAic291cmNlIiwgdHVuZHJhLnN1cHBvcnQu
ZmlsZS5ub3JtYWxpemUoc291cmNlKSk7CiAgICAgIH0gY2F0Y2goU2VydmljZUV4Y2VwdGlvbiBl
eCkgewogICAgICAgIElEYXRhVXRpbC5wdXQoY3Vyc29yLCAic291cmNlIiwgc291cmNlLnRvVVJJ
KCkudG9TdHJpbmcoKSk7CiAgICAgIH0KICAgIH0KICAgIGN1cnNvci5kZXN0cm95KCk7CgogICAg
cmV0dXJuIG91dHB1dDsKICB9CgogIC8vIGluaXRpYWxpemVzIHRoaXMgSFRUUCByb3V0aW5nIGlu
c3RydWN0aW9uIGZyb20gdGhlIGdpdmVuIElEYXRhCiAgcHVibGljIHZvaWQgc2V0SURhdGEoSURh
dGEgaW5wdXQpIHsKICAgIGlmIChpbnB1dCA9PSBudWxsKSByZXR1cm47CgogICAgSURhdGFDdXJz
b3IgY3Vyc29yID0gaW5wdXQuZ2V0Q3Vyc29yKCk7CiAgICBTdHJpbmcgbWV0aG9kID0gSURhdGFV
dGlsLmdldFN0cmluZyhjdXJzb3IsICJtZXRob2QiKTsKICAgIFN0cmluZyB1cmkgPSBJRGF0YVV0
aWwuZ2V0U3RyaW5nKGN1cnNvciwgInVyaSIpOwogICAgU3RyaW5nIHRhcmdldCA9IElEYXRhVXRp
bC5nZXRTdHJpbmcoY3Vyc29yLCAidGFyZ2V0Iik7CiAgICBTdHJpbmcgZGVzY3JpcHRpb24gPSBJ
RGF0YVV0aWwuZ2V0U3RyaW5nKGN1cnNvciwgImRlc2NyaXB0aW9uIik7CiAgICBTdHJpbmcgc291
cmNlID0gSURhdGFVdGlsLmdldFN0cmluZyhjdXJzb3IsICJzb3VyY2UiKTsKICAgIGN1cnNvci5k
ZXN0cm95KCk7CgogICAgaW5pdGlhbGl6ZShtZXRob2QsIHVyaSwgdGFyZ2V0LCBkZXNjcmlwdGlv
biwgc291cmNlKTsKICB9CgogIC8vIGNvbnN0cnVjdCBhIG5ldyByb3V0aW5nIGluc3RydWN0aW9u
CiAgcHJvdGVjdGVkIHZvaWQgaW5pdGlhbGl6ZShpbnQgbWV0aG9kLCBTdHJpbmcgdXJpLCBTdHJp
bmcgdGFyZ2V0LCBTdHJpbmcgZGVzY3JpcHRpb24sIGphdmEuaW8uRmlsZSBzb3VyY2UpIHsKICAg
IGluaXRpYWxpemUoTWV0aG9kLnZhbHVlT2YobWV0aG9kKSwgdXJpLCB0YXJnZXQsIGRlc2NyaXB0
aW9uLCBzb3VyY2UpOwogIH0KCiAgLy8gY29uc3RydWN0IGEgbmV3IHJvdXRpbmcgaW5zdHJ1Y3Rp
b24KICBwcm90ZWN0ZWQgdm9pZCBpbml0aWFsaXplKFN0cmluZyBtZXRob2QsIFN0cmluZyB1cmks
IFN0cmluZyB0YXJnZXQsIFN0cmluZyBkZXNjcmlwdGlvbiwgU3RyaW5nIHNvdXJjZSkgewogICAg
aW5pdGlhbGl6ZShNZXRob2QudmFsdWVPZihtZXRob2QudG9VcHBlckNhc2UoKSksIHVyaSwgdGFy
Z2V0LCBkZXNjcmlwdGlvbiwgbmV3IGphdmEuaW8uRmlsZShzb3VyY2UpKTsKICB9CgogIC8vIGNv
bnN0cnVjdCBhIG5ldyByb3V0aW5nIGluc3RydWN0aW9uCiAgcHJvdGVjdGVkIHZvaWQgaW5pdGlh
bGl6ZShTdHJpbmcgbWV0aG9kLCBTdHJpbmcgdXJpLCBTdHJpbmcgdGFyZ2V0LCBTdHJpbmcgZGVz
Y3JpcHRpb24sIGphdmEuaW8uRmlsZSBzb3VyY2UpIHsKICAgIGluaXRpYWxpemUoTWV0aG9kLnZh
bHVlT2YobWV0aG9kLnRvVXBwZXJDYXNlKCkpLCB1cmksIHRhcmdldCwgZGVzY3JpcHRpb24sIHNv
dXJjZSk7CiAgfQoKICAvLyBjb25zdHJ1Y3QgYSBuZXcgcm91dGluZyBpbnN0cnVjdGlvbgogIHBy
b3RlY3RlZCB2b2lkIGluaXRpYWxpemUoTWV0aG9kIG1ldGhvZCwgU3RyaW5nIHVyaSwgU3RyaW5n
IHRhcmdldCwgU3RyaW5nIGRlc2NyaXB0aW9uLCBqYXZhLmlvLkZpbGUgc291cmNlKSB7CiAgICBp
bml0aWFsaXplKG1ldGhvZCwgbmV3IG9yZy5zcHJpbmdmcmFtZXdvcmsud2ViLnV0aWwuVXJpVGVt
cGxhdGUodXJpKSwgdGFyZ2V0LCBkZXNjcmlwdGlvbiwgc291cmNlKTsKICB9CgogIC8vIGNvbnN0
cnVjdCBhIG5ldyByb3V0aW5nIGluc3RydWN0aW9uCiAgcHJvdGVjdGVkIHZvaWQgaW5pdGlhbGl6
ZShNZXRob2QgbWV0aG9kLCBvcmcuc3ByaW5nZnJhbWV3b3JrLndlYi51dGlsLlVyaVRlbXBsYXRl
IHVyaSwgU3RyaW5nIHRhcmdldCwgU3RyaW5nIGRlc2NyaXB0aW9uLCBqYXZhLmlvLkZpbGUgc291
cmNlKSB7CiAgICB0aGlzLm1ldGhvZCA9IG1ldGhvZDsKICAgIHRoaXMudXJpID0gdXJpOwogICAg
dGhpcy50YXJnZXQgPSB0YXJnZXQ7CgogICAgamF2YS51dGlsLnJlZ2V4Lk1hdGNoZXIgbWF0Y2hl
ciA9IFNFUlZJQ0VfUEFUVEVSTi5tYXRjaGVyKHRhcmdldCk7CiAgICBpc0ludm9rZSA9IG1hdGNo
ZXIubWF0Y2hlcygpOwoKICAgIGlmIChpc0ludm9rZSkgewogICAgICBzZXJ2aWNlID0gY29tLndt
LmxhbmcubnMuTlNOYW1lLmNyZWF0ZSh0YXJnZXQpOwogICAgfQoKICAgIHRoaXMuZGVzY3JpcHRp
b24gPSBkZXNjcmlwdGlvbjsKICAgIHRoaXMuc291cmNlID0gc291cmNlOwogIH0KCiAgLy8gY29t
cGFyZXMgdGhpcyBvYmplY3Qgd2l0aCBhbm90aGVyIG9iamVjdCBmb3IgZXF1YWxpdHkKICBwdWJs
aWMgYm9vbGVhbiBlcXVhbHMoT2JqZWN0IG9iaikgewogICAgYm9vbGVhbiByZXN1bHQgPSBmYWxz
ZTsKICAgIGlmIChvYmogIT0gbnVsbCkgewogICAgICBpZiAob2JqLmdldENsYXNzKCkgPT0gdGhp
cy5nZXRDbGFzcygpKSB7CiAgICAgICAgUm91dGUgb3RoZXIgPSAoUm91dGUpb2JqOwogICAgICAg
IHJlc3VsdCA9IHRoaXMuZ2V0TWV0aG9kKCkgPT0gb3RoZXIuZ2V0TWV0aG9kKCkgJiYgdGhpcy5n
ZXRVUkkoKS50b1N0cmluZygpLmVxdWFscyhvdGhlci5nZXRVUkkoKS50b1N0cmluZygpKSAmJiB0
aGlzLmdldFRhcmdldCgpLmVxdWFscyhvdGhlci5nZXRUYXJnZXQoKSk7CiAgICAgIH0KICAgIH0K
ICAgIHJldHVybiByZXN1bHQ7CiAgfQp9CgovLyBSZXByZXNlbnRzIGFsbCB0aGUgcG9zc2libGUg
YWxsb3dlZCBIVFRQIHJlcXVlc3QgbWV0aG9kcwpwdWJsaWMgZW51bSBNZXRob2QgewogIEdFVCgw
KSwgUFVUKDEpLCBQT1NUKDIpLCBIRUFEKDMpLCBDT05ORUNUKDQpLCBPUFRJT05TKDUpLCBERUxF
VEUoNiksIFRSQUNFKDcpOwoKICBwcml2YXRlIGludCB2YWx1ZTsKICBwcml2YXRlIHN0YXRpYyBq
YXZhLnV0aWwuTWFwPEludGVnZXIsIE1ldGhvZD4gbWFwID0gbmV3IGphdmEudXRpbC5IYXNoTWFw
PEludGVnZXIsIE1ldGhvZD4oKTsKCiAgcHJpdmF0ZSBNZXRob2QoaW50IHZhbHVlKSB7CiAgICB0
aGlzLnZhbHVlID0gdmFsdWU7CiAgfQoKICBzdGF0aWMgewogICAgZm9yIChNZXRob2QgbWV0aG9k
IDogTWV0aG9kLnZhbHVlcygpKSB7CiAgICAgIG1hcC5wdXQobWV0aG9kLnZhbHVlLCBtZXRob2Qp
OwogICAgfQogIH0KCiAgLy8gcmV0dXJucyB0aGUgSFRUUCByZXF1ZXN0IG1ldGhvZCBmb3IgdGhl
IGdpdmVuIG9yZGluYWwgdmFsdWUKICBwdWJsaWMgc3RhdGljIE1ldGhvZCB2YWx1ZU9mKGludCB2
YWx1ZSkgewogICAgcmV0dXJuIG1hcC5nZXQodmFsdWUpOwogIH0KfQ==</value>
  <value name="encodeutf8">true</value>
  <value name="extends"></value>
  <array name="implements" type="value" depth="1">
  </array>
  <array name="imports" type="value" depth="1">
  </array>
</Values>
