<?xml version="1.0" encoding="UTF-8"?>

<Values version="2.0">
  <value name="node_type">interface</value>
  <value name="node_nsName">tundra.datetime</value>
  <value name="shared">cHJvdGVjdGVkIHN0YXRpYyBmaW5hbCBTdHJpbmcgREVGQVVMVF9EQVRFVElNRV9QQVRURVJOID0g
ImRhdGV0aW1lIjsKCnByb3RlY3RlZCBzdGF0aWMgZmluYWwgamF2YS51dGlsLk1hcDxTdHJpbmcs
IFN0cmluZz4gbmFtZWRQYXR0ZXJucyA9IGNvbnN0cnVjdE5hbWVkUGF0dGVybnMoKTsKCnByb3Rl
Y3RlZCBzdGF0aWMgZmluYWwgamF2YS51dGlsLk1hcDxTdHJpbmcsIFN0cmluZz4gY29uc3RydWN0
TmFtZWRQYXR0ZXJucygpIHsKICAgIGphdmEudXRpbC5NYXA8U3RyaW5nLCBTdHJpbmc+IG1hcCA9
IG5ldyBqYXZhLnV0aWwuVHJlZU1hcDxTdHJpbmcsIFN0cmluZz4oKTsKCiAgICBtYXAucHV0KCJk
YXRldGltZS5qZGJjIiwgInl5eXktTU0tZGQgSEg6bW06c3MuU1NTIik7CiAgICBtYXAucHV0KCJk
YXRlIiwgInl5eXktTU0tZGQiKTsKICAgIG1hcC5wdXQoImRhdGUuamRiYyIsICJ5eXl5LU1NLWRk
Iik7CiAgICBtYXAucHV0KCJkYXRlLnhtbCIsICJ5eXl5LU1NLWRkIik7CiAgICBtYXAucHV0KCJ0
aW1lIiwgIkhIOm1tOnNzLlNTUyIpOwogICAgbWFwLnB1dCgidGltZS5qZGJjIiwgIkhIOm1tOnNz
Iik7CiAgICBtYXAucHV0KCJ0aW1lLnhtbCIsICJISDptbTpzcy5TU1MiKTsKCiAgICByZXR1cm4g
bWFwOwp9CgovLyBhZGRzIHRoZSBnaXZlbiB4bWwgZHVyYXRpb24gdG8gdGhlIGdpdmVuIHhtbCBk
YXRldGltZSByZXR1cm5pbmcgdGhlIHJlc3VsdApwdWJsaWMgc3RhdGljIFN0cmluZyBhZGQoU3Ry
aW5nIGRhdGV0aW1lLCBTdHJpbmcgZHVyYXRpb24pIHRocm93cyBTZXJ2aWNlRXhjZXB0aW9uIHsK
ICAgIHJldHVybiBhZGQoZGF0ZXRpbWUsIG51bGwsIGR1cmF0aW9uKTsKfQoKLy8gYWRkcyB0aGUg
Z2l2ZW4geG1sIGR1cmF0aW9uIHRvIHRoZSBnaXZlbiB4bWwgZGF0ZXRpbWUgcmV0dXJuaW5nIHRo
ZSByZXN1bHQKcHVibGljIHN0YXRpYyBTdHJpbmcgYWRkKFN0cmluZyBkYXRldGltZSwgU3RyaW5n
IHBhdHRlcm4sIFN0cmluZyBkdXJhdGlvbikgdGhyb3dzIFNlcnZpY2VFeGNlcHRpb24gewogICAg
cmV0dXJuIGFkZChkYXRldGltZSwgcGF0dGVybiwgZHVyYXRpb24sIG51bGwpOwp9CgovLyBhZGRz
IHRoZSBnaXZlbiB4bWwgZHVyYXRpb24gdG8gdGhlIGdpdmVuIHhtbCBkYXRldGltZSByZXR1cm5p
bmcgdGhlIHJlc3VsdApwdWJsaWMgc3RhdGljIFN0cmluZyBhZGQoU3RyaW5nIGRhdGV0aW1lLCBT
dHJpbmcgZGF0ZXRpbWVQYXR0ZXJuLCBTdHJpbmcgZHVyYXRpb24sIFN0cmluZyBkdXJhdGlvblBh
dHRlcm4pIHRocm93cyBTZXJ2aWNlRXhjZXB0aW9uIHsKICAgIHJldHVybiBlbWl0KGFkZChwYXJz
ZShkYXRldGltZSwgZGF0ZXRpbWVQYXR0ZXJuKSwgRHVyYXRpb25IZWxwZXIucGFyc2UoZHVyYXRp
b24sIGR1cmF0aW9uUGF0dGVybikpLCBkYXRldGltZVBhdHRlcm4pOwp9CgovLyBhZGRzIHRoZSBn
aXZlbiB4bWwgZHVyYXRpb24gdG8gdGhlIGdpdmVuIHhtbCBkYXRldGltZSByZXR1cm5pbmcgdGhl
IHJlc3VsdApwdWJsaWMgc3RhdGljIGphdmEudXRpbC5DYWxlbmRhciBhZGQoamF2YS51dGlsLkNh
bGVuZGFyIGNhbGVuZGFyLCBqYXZheC54bWwuZGF0YXR5cGUuRHVyYXRpb24gZHVyYXRpb24pIHRo
cm93cyBTZXJ2aWNlRXhjZXB0aW9uIHsKICAgIGlmIChjYWxlbmRhciA9PSBudWxsIHx8IGR1cmF0
aW9uID09IG51bGwpIHJldHVybiBjYWxlbmRhcjsKCiAgICB0cnkgewogICAgICAgIGphdmEudXRp
bC5HcmVnb3JpYW5DYWxlbmRhciBnY2FsID0gbmV3IGphdmEudXRpbC5HcmVnb3JpYW5DYWxlbmRh
cigpOwogICAgICAgIGdjYWwuc2V0VGltZShjYWxlbmRhci5nZXRUaW1lKCkpOwogICAgICAgIGdj
YWwuc2V0VGltZVpvbmUoY2FsZW5kYXIuZ2V0VGltZVpvbmUoKSk7CiAgICAgICAgamF2YXgueG1s
LmRhdGF0eXBlLlhNTEdyZWdvcmlhbkNhbGVuZGFyIHhjYWwgPSBqYXZheC54bWwuZGF0YXR5cGUu
RGF0YXR5cGVGYWN0b3J5Lm5ld0luc3RhbmNlKCkubmV3WE1MR3JlZ29yaWFuQ2FsZW5kYXIoZ2Nh
bCk7CiAgICAgICAgeGNhbC5hZGQoZHVyYXRpb24pOwoKICAgICAgICBjYWxlbmRhciA9IHhjYWwu
dG9HcmVnb3JpYW5DYWxlbmRhcigpOwogICAgfSBjYXRjaCAoamF2YXgueG1sLmRhdGF0eXBlLkRh
dGF0eXBlQ29uZmlndXJhdGlvbkV4Y2VwdGlvbiBleCkgewogICAgICAgIEV4Y2VwdGlvbkhlbHBl
ci5yYWlzZShleCk7CiAgICB9CgogICAgcmV0dXJuIGNhbGVuZGFyOwp9CgovLyBjb21wYXJlcyB0
d28geG1sIGRhdGV0aW1lIHN0cmluZ3MKcHVibGljIHN0YXRpYyBpbnQgY29tcGFyZShTdHJpbmcg
ZHgsIFN0cmluZyBkeSkgewogICAgcmV0dXJuIGNvbXBhcmUoZHgsIGR5LCBudWxsKTsKfQoKLy8g
Y29tcGFyZXMgdHdvIHhtbCBkYXRldGltZSBzdHJpbmdzCnB1YmxpYyBzdGF0aWMgaW50IGNvbXBh
cmUoU3RyaW5nIGR4LCBTdHJpbmcgZHksIFN0cmluZyBwYXR0ZXJuKSB7CiAgICByZXR1cm4gY29t
cGFyZShwYXJzZShkeCwgcGF0dGVybiksIHBhcnNlKGR5LCBwYXR0ZXJuKSk7Cn0KCgovLyBjb21w
YXJlcyB0d28gZGF0ZXRpbWVzCnB1YmxpYyBzdGF0aWMgaW50IGNvbXBhcmUoamF2YS51dGlsLkNh
bGVuZGFyIGN4LCBqYXZhLnV0aWwuQ2FsZW5kYXIgY3kpIHsKICAgIGlmIChjeCA9PSBudWxsICYm
IGN5ID09IG51bGwpIHJldHVybiAwOwogICAgaWYgKGN4ID09IG51bGwgJiYgY3kgIT0gbnVsbCkg
cmV0dXJuIC0xOwogICAgaWYgKGN4ICE9IG51bGwgJiYgY3kgPT0gbnVsbCkgcmV0dXJuIDE7Cgog
ICAgcmV0dXJuIGN4LmNvbXBhcmVUbyhjeSk7Cn0KCi8vIGNvbmNhdGVuYXRlcyBhIHhtbCBkYXRl
IGFuZCB4bWwgdGltZSB0b2dldGhlciB0byBmb3JtIGFuIHhtbCBkYXRldGltZQpwdWJsaWMgc3Rh
dGljIFN0cmluZyBjb25jYXRlbmF0ZShTdHJpbmcgZGF0ZSwgU3RyaW5nIHRpbWUpIHsKICAgIHJl
dHVybiBlbWl0KGNvbmNhdGVuYXRlKHBhcnNlKGRhdGUsICJkYXRlIiksIHBhcnNlKHRpbWUsICJ0
aW1lIikpKTsKfQoKLy8gYWRkcyB0d28gZGF0ZXMgdG9nZXRoZXIKcHVibGljIHN0YXRpYyBqYXZh
LnV0aWwuQ2FsZW5kYXIgY29uY2F0ZW5hdGUoamF2YS51dGlsLkNhbGVuZGFyIGRhdGUsIGphdmEu
dXRpbC5DYWxlbmRhciB0aW1lKSB7CiAgICBqYXZhLnV0aWwuQ2FsZW5kYXIgbG9jYWxEYXRlVGlt
ZSA9IG5ldyBqYXZhLnV0aWwuR3JlZ29yaWFuQ2FsZW5kYXIoKTsKICAgIGxvY2FsRGF0ZVRpbWUu
c2V0VGltZUluTWlsbGlzKGRhdGUuZ2V0VGltZUluTWlsbGlzKCkgKyB0aW1lLmdldFRpbWVJbk1p
bGxpcygpKTsKCiAgICByZXR1cm4gbG9jYWxEYXRlVGltZTsKfQoKLy8gcmV0dXJucyB0aGUgeG1s
IGR1cmF0aW9uIGJldHdlZW4gdHdvIGdpdmVuIHhtbCBkYXRldGltZXMKcHVibGljIHN0YXRpYyBT
dHJpbmcgZHVyYXRpb24oU3RyaW5nIHN0YXJ0LCBTdHJpbmcgZW5kKSB7CiAgICByZXR1cm4gZHVy
YXRpb24oc3RhcnQsIGVuZCwgbnVsbCk7Cn0KCi8vIHJldHVybnMgdGhlIHhtbCBkdXJhdGlvbiBi
ZXR3ZWVuIHR3byBnaXZlbiB4bWwgZGF0ZXRpbWVzCnB1YmxpYyBzdGF0aWMgU3RyaW5nIGR1cmF0
aW9uKFN0cmluZyBzdGFydCwgU3RyaW5nIGVuZCwgU3RyaW5nIGRhdGV0aW1lUGF0dGVybikgewog
ICAgcmV0dXJuIGR1cmF0aW9uKHN0YXJ0LCBlbmQsIGRhdGV0aW1lUGF0dGVybiwgbnVsbCk7Cn0K
Ci8vIHJldHVybnMgdGhlIHhtbCBkdXJhdGlvbiBiZXR3ZWVuIHR3byBnaXZlbiB4bWwgZGF0ZXRp
bWVzCnB1YmxpYyBzdGF0aWMgU3RyaW5nIGR1cmF0aW9uKFN0cmluZyBzdGFydCwgU3RyaW5nIGVu
ZCwgU3RyaW5nIGRhdGV0aW1lUGF0dGVybiwgU3RyaW5nIGR1cmF0aW9uUGF0dGVybikgewogICAg
cmV0dXJuIER1cmF0aW9uSGVscGVyLmVtaXQoZHVyYXRpb24ocGFyc2Uoc3RhcnQsIGRhdGV0aW1l
UGF0dGVybiksIHBhcnNlKGVuZCwgZGF0ZXRpbWVQYXR0ZXJuKSksIGR1cmF0aW9uUGF0dGVybik7
Cn0KCi8vIHJldHVybnMgdGhlIHhtbCBkdXJhdGlvbiBiZXR3ZWVuIHR3byBnaXZlbiB4bWwgZGF0
ZXRpbWVzCnB1YmxpYyBzdGF0aWMgamF2YXgueG1sLmRhdGF0eXBlLkR1cmF0aW9uIGR1cmF0aW9u
KGphdmEudXRpbC5DYWxlbmRhciBzdGFydCwgamF2YS51dGlsLkNhbGVuZGFyIGVuZCkgewogICAg
aWYgKHN0YXJ0ID09IG51bGwgfHwgZW5kID09IG51bGwpIHJldHVybiBudWxsOwogICAgcmV0dXJu
IER1cmF0aW9uSGVscGVyLnBhcnNlKGVuZC5nZXRUaW1lSW5NaWxsaXMoKSAtIHN0YXJ0LmdldFRp
bWVJbk1pbGxpcygpKTsKfQoKLy8gcmV0dXJucyB0aGUgZ2l2ZW4gZGF0ZXRpbWUgYXMgYW4geG1s
IGRhdGV0aW1lIHN0cmluZwpwdWJsaWMgc3RhdGljIFN0cmluZyBlbWl0KGphdmEudXRpbC5EYXRl
IGlucHV0KSB7CiAgICByZXR1cm4gZW1pdChpbnB1dCwgbnVsbCk7Cn0KCi8vIHJldHVybnMgdGhl
IGdpdmVuIGRhdGV0aW1lIGFzIGEgc3RyaW5nIGFkaGVyaW5nIHRvIHRoZSBnaXZlbiBwYXR0ZXJu
CnB1YmxpYyBzdGF0aWMgU3RyaW5nIGVtaXQoamF2YS51dGlsLkRhdGUgaW5wdXQsIFN0cmluZyBw
YXR0ZXJuKSB7CiAgICByZXR1cm4gZW1pdChpbnB1dCwgcGF0dGVybiwgbnVsbCk7Cn0KCi8vIHJl
dHVybnMgdGhlIGdpdmVuIGRhdGV0aW1lIGFzIGEgc3RyaW5nIGFkaGVyaW5nIHRvIHRoZSBnaXZl
biBwYXR0ZXJuCnB1YmxpYyBzdGF0aWMgU3RyaW5nIGVtaXQoamF2YS51dGlsLkRhdGUgaW5wdXQs
IFN0cmluZyBwYXR0ZXJuLCBTdHJpbmcgdGltZXpvbmUpIHsKICAgIGlmIChpbnB1dCA9PSBudWxs
KSByZXR1cm4gbnVsbDsKCiAgICBqYXZhLnV0aWwuQ2FsZW5kYXIgY2FsZW5kYXIgPSBqYXZhLnV0
aWwuQ2FsZW5kYXIuZ2V0SW5zdGFuY2UoKTsKICAgIGNhbGVuZGFyLnNldFRpbWUoaW5wdXQpOwoK
ICAgIHJldHVybiBlbWl0KGNhbGVuZGFyLCBwYXR0ZXJuLCB0aW1lem9uZSk7Cn0KCi8vIHJldHVy
bnMgdGhlIGdpdmVuIGRhdGV0aW1lIGFzIGFuIHhtbCBkYXRldGltZSBzdHJpbmcKcHVibGljIHN0
YXRpYyBTdHJpbmcgZW1pdChqYXZhLnV0aWwuQ2FsZW5kYXIgaW5wdXQpIHsKICAgIHJldHVybiBl
bWl0KGlucHV0LCBudWxsKTsKfQoKLy8gcmV0dXJucyB0aGUgZ2l2ZW4gZGF0ZXRpbWUgZm9ybWF0
dGVkIGFzIGEgc3RyaW5nIGFkaGVyaW5nIHRvIHRoZSBnaXZlbiBwYXR0ZXJuCnB1YmxpYyBzdGF0
aWMgU3RyaW5nIGVtaXQoamF2YS51dGlsLkNhbGVuZGFyIGlucHV0LCBTdHJpbmcgcGF0dGVybikg
ewogICAgcmV0dXJuIGVtaXQoaW5wdXQsIHBhdHRlcm4sIG51bGwpOwp9CgovLyByZXR1cm5zIHRo
ZSBnaXZlbiBkYXRldGltZSBmb3JtYXR0ZWQgYXMgYSBzdHJpbmcgYWRoZXJpbmcgdG8gdGhlIGdp
dmVuIHBhdHRlcm4KcHVibGljIHN0YXRpYyBTdHJpbmcgZW1pdChqYXZhLnV0aWwuQ2FsZW5kYXIg
aW5wdXQsIFN0cmluZyBwYXR0ZXJuLCBTdHJpbmcgdGltZXpvbmUpIHsKICAgIGlmIChwYXR0ZXJu
ID09IG51bGwpIHBhdHRlcm4gPSBERUZBVUxUX0RBVEVUSU1FX1BBVFRFUk47CiAgICBTdHJpbmcg
b3V0cHV0ID0gbnVsbDsKCiAgICBpZiAoaW5wdXQgIT0gbnVsbCkgewogICAgICAgIGlmICh0aW1l
em9uZSAhPSBudWxsKSBpbnB1dCA9IHR1bmRyYS5zdXBwb3J0LnRpbWV6b25lLmNvbnZlcnQoaW5w
dXQsIHRpbWV6b25lKTsKCiAgICAgICAgaWYgKHBhdHRlcm4uZXF1YWxzKCJkYXRldGltZSIpIHx8
IHBhdHRlcm4uZXF1YWxzKCJkYXRldGltZS54bWwiKSkgewogICAgICAgICAgICBvdXRwdXQgPSBq
YXZheC54bWwuYmluZC5EYXRhdHlwZUNvbnZlcnRlci5wcmludERhdGVUaW1lKGlucHV0KTsKICAg
ICAgICB9IGVsc2UgaWYgKHBhdHRlcm4uZXF1YWxzKCJtaWxsaXNlY29uZHMiKSkgewogICAgICAg
ICAgICBvdXRwdXQgPSAiIiArIGlucHV0LmdldFRpbWVJbk1pbGxpcygpOwogICAgICAgIH0gZWxz
ZSB7CiAgICAgICAgICAgIGlmIChuYW1lZFBhdHRlcm5zLmNvbnRhaW5zS2V5KHBhdHRlcm4pKSBw
YXR0ZXJuID0gbmFtZWRQYXR0ZXJucy5nZXQocGF0dGVybik7CiAgICAgICAgICAgIGphdmEudGV4
dC5EYXRlRm9ybWF0IGZvcm1hdHRlciA9IG5ldyBqYXZhLnRleHQuU2ltcGxlRGF0ZUZvcm1hdChw
YXR0ZXJuKTsKICAgICAgICAgICAgZm9ybWF0dGVyLnNldFRpbWVab25lKGlucHV0LmdldFRpbWVa
b25lKCkpOwogICAgICAgICAgICBmb3JtYXR0ZXIuc2V0TGVuaWVudChmYWxzZSk7CiAgICAgICAg
ICAgIG91dHB1dCA9IGZvcm1hdHRlci5mb3JtYXQoaW5wdXQuZ2V0VGltZSgpKTsKICAgICAgICB9
CiAgICB9CgogICAgcmV0dXJuIG91dHB1dDsKfQoKLy8gcmV0dXJucyB0aGUgZ2l2ZW4gZGF0ZXRp
bWUgZm9ybWF0dGVkIGFzIGEgc3RyaW5nIGFkaGVyaW5nIHRvIHRoZSBnaXZlbiBwYXR0ZXJuCnB1
YmxpYyBzdGF0aWMgU3RyaW5nW10gZW1pdChqYXZhLnV0aWwuQ2FsZW5kYXJbXSBpbnB1dHMsIFN0
cmluZyBwYXR0ZXJuKSB7CiAgICByZXR1cm4gZW1pdChpbnB1dHMsIHBhdHRlcm4sIG51bGwpOwp9
CgovLyByZXR1cm5zIHRoZSBnaXZlbiBkYXRldGltZSBmb3JtYXR0ZWQgYXMgYSBzdHJpbmcgYWRo
ZXJpbmcgdG8gdGhlIGdpdmVuIHBhdHRlcm4KcHVibGljIHN0YXRpYyBTdHJpbmdbXSBlbWl0KGph
dmEudXRpbC5DYWxlbmRhcltdIGlucHV0cywgU3RyaW5nIHBhdHRlcm4sIFN0cmluZyB0aW1lem9u
ZSkgewogICAgU3RyaW5nW10gb3V0cHV0cyA9IG51bGw7CiAgICBpZiAoaW5wdXRzICE9IG51bGwp
IHsKICAgICAgICBvdXRwdXRzID0gbmV3IFN0cmluZ1tpbnB1dHMubGVuZ3RoXTsKICAgICAgICBm
b3IgKGludCBpID0gMDsgaSA8IGlucHV0cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBvdXRw
dXRzW2ldID0gZW1pdChpbnB1dHNbaV0sIHBhdHRlcm4sIHRpbWV6b25lKTsKICAgICAgICB9CiAg
ICB9CiAgICByZXR1cm4gb3V0cHV0czsKfQoKLy8gcmVmb3JtYXRzIGEgZGF0ZXRpbWUgc3RyaW5n
IGFjY29yZGluZyB0byB0aGUgZ2l2ZW4gcGF0dGVybnMKcHVibGljIHN0YXRpYyBTdHJpbmcgZm9y
bWF0KFN0cmluZyBpbnB1dCwgU3RyaW5nIGluUGF0dGVybiwgU3RyaW5nIG91dFBhdHRlcm4pIHsK
ICAgIHJldHVybiBmb3JtYXQoaW5wdXQsIGluUGF0dGVybiwgbnVsbCwgb3V0UGF0dGVybiwgbnVs
bCk7Cn0KCi8vIHJlZm9ybWF0cyBhIGRhdGV0aW1lIHN0cmluZyBhY2NvcmRpbmcgdG8gdGhlIGdp
dmVuIHBhdHRlcm5zCnB1YmxpYyBzdGF0aWMgU3RyaW5nIGZvcm1hdChTdHJpbmcgaW5wdXQsIFN0
cmluZyBpblBhdHRlcm4sIFN0cmluZyBpblRpbWVab25lLCBTdHJpbmcgb3V0UGF0dGVybiwgU3Ry
aW5nIG91dFRpbWVab25lKSB7CiAgICByZXR1cm4gZW1pdChwYXJzZShpbnB1dCwgaW5QYXR0ZXJu
LCBpblRpbWVab25lKSwgb3V0UGF0dGVybiwgb3V0VGltZVpvbmUpOwp9CgovLyByZWZvcm1hdHMg
YSBkYXRldGltZSBzdHJpbmcgYWNjb3JkaW5nIHRvIHRoZSBnaXZlbiBwYXR0ZXJucwpwdWJsaWMg
c3RhdGljIFN0cmluZyBmb3JtYXQoU3RyaW5nIGlucHV0LCBTdHJpbmdbXSBpblBhdHRlcm5zLCBT
dHJpbmcgb3V0UGF0dGVybikgewogICAgcmV0dXJuIGZvcm1hdChpbnB1dCwgaW5QYXR0ZXJucywg
bnVsbCwgb3V0UGF0dGVybiwgbnVsbCk7Cn0KCi8vIHJlZm9ybWF0cyBhIGRhdGV0aW1lIHN0cmlu
ZyBhY2NvcmRpbmcgdG8gdGhlIGdpdmVuIHBhdHRlcm5zCnB1YmxpYyBzdGF0aWMgU3RyaW5nIGZv
cm1hdChTdHJpbmcgaW5wdXQsIFN0cmluZ1tdIGluUGF0dGVybnMsIFN0cmluZyBpblRpbWVab25l
LCBTdHJpbmcgb3V0UGF0dGVybiwgU3RyaW5nIG91dFRpbWVab25lKSB7CiAgICByZXR1cm4gZW1p
dChwYXJzZShpbnB1dCwgaW5QYXR0ZXJucywgaW5UaW1lWm9uZSksIG91dFBhdHRlcm4sIG91dFRp
bWVab25lKTsKfQoKLy8gcmVmb3JtYXRzIGEgbGlzdCBkYXRldGltZSBzdHJpbmdzIGFjY29yZGlu
ZyB0byB0aGUgZ2l2ZW4gcGF0dGVybnMKcHVibGljIHN0YXRpYyBTdHJpbmdbXSBmb3JtYXQoU3Ry
aW5nW10gaW5wdXRzLCBTdHJpbmcgaW5QYXR0ZXJuLCBTdHJpbmcgb3V0UGF0dGVybikgewogICAg
cmV0dXJuIGZvcm1hdChpbnB1dHMsIGluUGF0dGVybiwgbnVsbCwgb3V0UGF0dGVybiwgbnVsbCk7
Cn0KCi8vIHJlZm9ybWF0cyBhIGxpc3QgZGF0ZXRpbWUgc3RyaW5ncyBhY2NvcmRpbmcgdG8gdGhl
IGdpdmVuIHBhdHRlcm5zCnB1YmxpYyBzdGF0aWMgU3RyaW5nW10gZm9ybWF0KFN0cmluZ1tdIGlu
cHV0cywgU3RyaW5nIGluUGF0dGVybiwgU3RyaW5nIGluVGltZVpvbmUsIFN0cmluZyBvdXRQYXR0
ZXJuLCBTdHJpbmcgb3V0VGltZVpvbmUpIHsKICAgIFN0cmluZ1tdIG91dHB1dHMgPSBudWxsOwog
ICAgaWYgKGlucHV0cyAhPSBudWxsKSB7CiAgICAgICAgb3V0cHV0cyA9IG5ldyBTdHJpbmdbaW5w
dXRzLmxlbmd0aF07CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBpbnB1dHMubGVuZ3RoOyBp
KyspIHsKICAgICAgICAgICAgb3V0cHV0c1tpXSA9IHR1bmRyYS5kYXRldGltZS5mb3JtYXQoaW5w
dXRzW2ldLCBpblBhdHRlcm4sIGluVGltZVpvbmUsIG91dFBhdHRlcm4sIG91dFRpbWVab25lKTsK
ICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gb3V0cHV0czsKfQoKLy8gcmVmb3JtYXRzIGEgbGlz
dCBkYXRldGltZSBzdHJpbmdzIGFjY29yZGluZyB0byB0aGUgZ2l2ZW4gcGF0dGVybnMKcHVibGlj
IHN0YXRpYyBTdHJpbmdbXSBmb3JtYXQoU3RyaW5nW10gaW5wdXRzLCBTdHJpbmdbXSBpblBhdHRl
cm5zLCBTdHJpbmcgb3V0UGF0dGVybikgewogICAgcmV0dXJuIGZvcm1hdChpbnB1dHMsIGluUGF0
dGVybnMsIG51bGwsIG91dFBhdHRlcm4sIG51bGwpOwp9CgovLyByZWZvcm1hdHMgYSBsaXN0IGRh
dGV0aW1lIHN0cmluZ3MgYWNjb3JkaW5nIHRvIHRoZSBnaXZlbiBwYXR0ZXJucwpwdWJsaWMgc3Rh
dGljIFN0cmluZ1tdIGZvcm1hdChTdHJpbmdbXSBpbnB1dHMsIFN0cmluZ1tdIGluUGF0dGVybnMs
IFN0cmluZyBpblRpbWVab25lLCBTdHJpbmcgb3V0UGF0dGVybiwgU3RyaW5nIG91dFRpbWVab25l
KSB7CiAgICBTdHJpbmdbXSBvdXRwdXRzID0gbnVsbDsKICAgIGlmIChpbnB1dHMgIT0gbnVsbCkg
ewogICAgICAgIG91dHB1dHMgPSBuZXcgU3RyaW5nW2lucHV0cy5sZW5ndGhdOwogICAgICAgIGZv
ciAoaW50IGkgPSAwOyBpIDwgaW5wdXRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIG91dHB1
dHNbaV0gPSB0dW5kcmEuZGF0ZXRpbWUuZm9ybWF0KGlucHV0c1tpXSwgaW5QYXR0ZXJucywgaW5U
aW1lWm9uZSwgb3V0UGF0dGVybiwgb3V0VGltZVpvbmUpOwogICAgICAgIH0KICAgIH0KICAgIHJl
dHVybiBvdXRwdXRzOwp9CgovLyByZXR1cm5zIHRoZSBjdXJyZW50IGRhdGV0aW1lIGFzIGFuIHht
bCBkYXRldGltZSBzdHJpbmcKcHVibGljIHN0YXRpYyBTdHJpbmcgbm93KCkgewogICAgcmV0dXJu
IG5vdygiZGF0ZXRpbWUiKTsKfQoKLy8gcmV0dXJucyB0aGUgY3VycmVudCBkYXRldGltZSBhcyBh
biBkYXRldGltZSBzdHJpbmcgZm9ybWF0dGVkIGFjY29yZGluZyB0byB0aGUgZ2l2ZW4gcGF0dGVy
bgpwdWJsaWMgc3RhdGljIFN0cmluZyBub3coU3RyaW5nIHBhdHRlcm4pIHsKICAgIHJldHVybiBu
b3cocGF0dGVybiwgbnVsbCk7Cn0KCi8vIHJldHVybnMgdGhlIGN1cnJlbnQgZGF0ZXRpbWUgYXMg
YW4gZGF0ZXRpbWUgc3RyaW5nIGZvcm1hdHRlZCBhY2NvcmRpbmcgdG8gdGhlIGdpdmVuIHBhdHRl
cm4KcHVibGljIHN0YXRpYyBTdHJpbmcgbm93KFN0cmluZyBwYXR0ZXJuLCBTdHJpbmcgdGltZXpv
bmUpIHsKICAgIHJldHVybiBlbWl0KGphdmEudXRpbC5DYWxlbmRhci5nZXRJbnN0YW5jZSgpLCBw
YXR0ZXJuLCB0aW1lem9uZSk7Cn0KCi8vIHBhcnNlcyBhbiB4bWwgZGF0ZXRpbWUgc3RyaW5nIGFu
ZCByZXR1cm5zIGEgamF2YS51dGlsLkRhdGUgb2JqZWN0CnB1YmxpYyBzdGF0aWMgamF2YS51dGls
LkNhbGVuZGFyIHBhcnNlKFN0cmluZyBpbnB1dCkgewogICAgcmV0dXJuIHBhcnNlKGlucHV0LCAo
U3RyaW5nKW51bGwpOwp9CgovLyBwYXJzZXMgYSBkYXRldGltZSBzdHJpbmcgdGhhdCBhZGhlcmVz
IHRvIHRoZSBnaXZlbiBwYXR0ZXJuIGFuZCByZXR1cm5zIGEgamF2YS51dGlsLkRhdGUgb2JqZWN0
CnB1YmxpYyBzdGF0aWMgamF2YS51dGlsLkNhbGVuZGFyIHBhcnNlKFN0cmluZyBpbnB1dCwgU3Ry
aW5nIHBhdHRlcm4pIHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gewogICAgcmV0dXJu
IHBhcnNlKGlucHV0LCBwYXR0ZXJuLCAoU3RyaW5nKW51bGwpOwp9CgovLyBwYXJzZXMgYSBkYXRl
dGltZSBzdHJpbmcgdGhhdCBhZGhlcmVzIHRvIHRoZSBnaXZlbiBwYXR0ZXJuIGFuZCByZXR1cm5z
IGEgamF2YS51dGlsLkRhdGUgb2JqZWN0CnB1YmxpYyBzdGF0aWMgamF2YS51dGlsLkNhbGVuZGFy
IHBhcnNlKFN0cmluZyBpbnB1dCwgU3RyaW5nIHBhdHRlcm4sIFN0cmluZyB0aW1lem9uZSkgdGhy
b3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiB7CiAgICBpZiAocGF0dGVybiA9PSBudWxsKSBw
YXR0ZXJuID0gREVGQVVMVF9EQVRFVElNRV9QQVRURVJOOwoKICAgIGphdmEudXRpbC5DYWxlbmRh
ciBvdXRwdXQgPSBudWxsOwoKICAgIGlmIChpbnB1dCAhPSBudWxsKSB7CiAgICAgICAgdHJ5IHsK
ICAgICAgICAgICAgaWYgKHBhdHRlcm4uZXF1YWxzKCJkYXRldGltZSIpIHx8IHBhdHRlcm4uZXF1
YWxzKCJkYXRldGltZS54bWwiKSkgewogICAgICAgICAgICAgICAgb3V0cHV0ID0gamF2YXgueG1s
LmJpbmQuRGF0YXR5cGVDb252ZXJ0ZXIucGFyc2VEYXRlVGltZShpbnB1dCk7CiAgICAgICAgICAg
IH0gZWxzZSBpZiAocGF0dGVybi5lcXVhbHMoImRhdGV0aW1lLmpkYmMiKSkgewogICAgICAgICAg
ICAgICAgb3V0cHV0ID0gamF2YS51dGlsLkNhbGVuZGFyLmdldEluc3RhbmNlKCk7CiAgICAgICAg
ICAgICAgICBvdXRwdXQuc2V0VGltZShqYXZhLnNxbC5UaW1lc3RhbXAudmFsdWVPZihpbnB1dCkp
OwogICAgICAgICAgICB9IGVsc2UgaWYgKHBhdHRlcm4uZXF1YWxzKCJkYXRlIikgfHwgcGF0dGVy
bi5lcXVhbHMoImRhdGUueG1sIikpIHsKICAgICAgICAgICAgICAgIG91dHB1dCA9IGphdmF4Lnht
bC5iaW5kLkRhdGF0eXBlQ29udmVydGVyLnBhcnNlRGF0ZShpbnB1dCk7CiAgICAgICAgICAgIH0g
ZWxzZSBpZiAocGF0dGVybi5lcXVhbHMoInRpbWUiKSB8fCBwYXR0ZXJuLmVxdWFscygidGltZS54
bWwiKSkgewogICAgICAgICAgICAgICAgb3V0cHV0ID0gamF2YXgueG1sLmJpbmQuRGF0YXR5cGVD
b252ZXJ0ZXIucGFyc2VUaW1lKGlucHV0KTsKICAgICAgICAgICAgfSBlbHNlIGlmIChwYXR0ZXJu
LmVxdWFscygibWlsbGlzZWNvbmRzIikpIHsKICAgICAgICAgICAgICAgIG91dHB1dCA9IGphdmEu
dXRpbC5DYWxlbmRhci5nZXRJbnN0YW5jZSgpOwogICAgICAgICAgICAgICAgb3V0cHV0LnNldFRp
bWVJbk1pbGxpcyhMb25nLnBhcnNlTG9uZyhpbnB1dCkpOwogICAgICAgICAgICB9IGVsc2Ugewog
ICAgICAgICAgICAgICAgaWYgKG5hbWVkUGF0dGVybnMuY29udGFpbnNLZXkocGF0dGVybikpIHBh
dHRlcm4gPSBuYW1lZFBhdHRlcm5zLmdldChwYXR0ZXJuKTsKCiAgICAgICAgICAgICAgICBqYXZh
LnRleHQuRGF0ZUZvcm1hdCBmb3JtYXR0ZXIgPSBuZXcgamF2YS50ZXh0LlNpbXBsZURhdGVGb3Jt
YXQocGF0dGVybik7CiAgICAgICAgICAgICAgICBmb3JtYXR0ZXIuc2V0TGVuaWVudChmYWxzZSk7
CiAgICAgICAgICAgICAgICBvdXRwdXQgPSBqYXZhLnV0aWwuQ2FsZW5kYXIuZ2V0SW5zdGFuY2Uo
KTsKICAgICAgICAgICAgICAgIG91dHB1dC5zZXRUaW1lKGZvcm1hdHRlci5wYXJzZShpbnB1dCkp
OwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAodGltZXpvbmUgIT0gbnVsbCkgb3V0cHV0
ID0gdHVuZHJhLnN1cHBvcnQudGltZXpvbmUucmVwbGFjZShvdXRwdXQsIHRpbWV6b25lKTsKICAg
ICAgICB9IGNhdGNoIChFeGNlcHRpb24gZXgpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVn
YWxBcmd1bWVudEV4Y2VwdGlvbigiVW5wYXJzZWFibGUgZGF0ZXRpbWU6ICciICsgaW5wdXQgKyAi
JyBkb2VzIG5vdCBjb25mb3JtIHRvIHBhdHRlcm4gJyIgKyBwYXR0ZXJuICsgIiciKTsKICAgICAg
ICB9CiAgICB9CgogICAgcmV0dXJuIG91dHB1dDsKfQoKLy8gcGFyc2VzIGEgZGF0ZXRpbWUgc3Ry
aW5nIHRoYXQgYWRoZXJlcyB0byB0aGUgZ2l2ZW4gcGF0dGVybiBhbmQgcmV0dXJucyBhIGphdmEu
dXRpbC5EYXRlIG9iamVjdApwdWJsaWMgc3RhdGljIGphdmEudXRpbC5DYWxlbmRhciBwYXJzZShT
dHJpbmcgaW5wdXQsIFN0cmluZ1tdIHBhdHRlcm5zKSB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhj
ZXB0aW9uIHsKICAgIHJldHVybiBwYXJzZShpbnB1dCwgcGF0dGVybnMsIChTdHJpbmcpbnVsbCk7
Cn0KCi8vIHBhcnNlcyBhIGRhdGV0aW1lIHN0cmluZyB0aGF0IGFkaGVyZXMgdG8gdGhlIGdpdmVu
IHBhdHRlcm4gYW5kIHJldHVybnMgYSBqYXZhLnV0aWwuRGF0ZSBvYmplY3QKcHVibGljIHN0YXRp
YyBqYXZhLnV0aWwuQ2FsZW5kYXIgcGFyc2UoU3RyaW5nIGlucHV0LCBTdHJpbmdbXSBwYXR0ZXJu
cywgU3RyaW5nIHRpbWV6b25lKSB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIHsKICAg
IGphdmEudXRpbC5DYWxlbmRhciBvdXRwdXQgPSBudWxsOwoKICAgIGlmIChwYXR0ZXJucyA9PSBu
dWxsKSBwYXR0ZXJucyA9IG5ldyBTdHJpbmdbMV07CgogICAgamF2YS51dGlsLkxpc3Q8VGhyb3dh
YmxlPiBleGNlcHRpb25zID0gbmV3IGphdmEudXRpbC5BcnJheUxpc3Q8VGhyb3dhYmxlPigpOwoK
ICAgIGlmIChpbnB1dCAhPSBudWxsKSB7CiAgICAgICAgYm9vbGVhbiBwYXJzZWQgPSBmYWxzZTsK
ICAgICAgICBmb3IgKFN0cmluZyBwYXR0ZXJuIDogcGF0dGVybnMpIHsKICAgICAgICAgICAgdHJ5
IHsKICAgICAgICAgICAgICAgIG91dHB1dCA9IHBhcnNlKGlucHV0LCBwYXR0ZXJuLCB0aW1lem9u
ZSk7CiAgICAgICAgICAgICAgICBwYXJzZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgYnJlYWs7
CiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkgewogICAgICAgICAgICAgICAgZXhj
ZXB0aW9ucy5hZGQoZXgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghcGFy
c2VkKSB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKEV4Y2VwdGlvbkhlbHBlci5n
ZXRNZXNzYWdlKGV4Y2VwdGlvbnMpKTsKICAgIH0KCiAgICByZXR1cm4gb3V0cHV0Owp9CgovLyBw
YXJzZXMgYSBsaXN0IG9mIGRhdGV0aW1lIHN0cmluZ3MgdGhhdCBhZGhlcmVzIHRvIHRoZSBnaXZl
biBwYXR0ZXJuIGFuZCByZXR1cm5zIGEgamF2YS51dGlsLkRhdGUgb2JqZWN0CnB1YmxpYyBzdGF0
aWMgamF2YS51dGlsLkNhbGVuZGFyW10gcGFyc2UoU3RyaW5nW10gaW5wdXRzLCBTdHJpbmcgcGF0
dGVybikgdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiB7CiAgICByZXR1cm4gcGFyc2Uo
aW5wdXRzLCBwYXR0ZXJuLCAoU3RyaW5nKW51bGwpOwp9CgovLyBwYXJzZXMgYSBsaXN0IG9mIGRh
dGV0aW1lIHN0cmluZ3MgdGhhdCBhZGhlcmVzIHRvIHRoZSBnaXZlbiBwYXR0ZXJuIGFuZCByZXR1
cm5zIGEgamF2YS51dGlsLkRhdGUgb2JqZWN0CnB1YmxpYyBzdGF0aWMgamF2YS51dGlsLkNhbGVu
ZGFyW10gcGFyc2UoU3RyaW5nW10gaW5wdXRzLCBTdHJpbmcgcGF0dGVybiwgU3RyaW5nIHRpbWV6
b25lKSB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIHsKICAgIGphdmEudXRpbC5DYWxl
bmRhcltdIG91dHB1dHMgPSBudWxsOwogICAgaWYgKGlucHV0cyAhPSBudWxsKSB7CiAgICAgICAg
b3V0cHV0cyA9IG5ldyBqYXZhLnV0aWwuQ2FsZW5kYXJbaW5wdXRzLmxlbmd0aF07CiAgICAgICAg
Zm9yIChpbnQgaSA9IDA7IGkgPCBpbnB1dHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgb3V0
cHV0c1tpXSA9IHBhcnNlKGlucHV0c1tpXSwgcGF0dGVybiwgdGltZXpvbmUpOwogICAgICAgIH0K
ICAgIH0KICAgIHJldHVybiBvdXRwdXRzOwp9CgovLyBwYXJzZXMgYSBsaXN0IG9mIGRhdGV0aW1l
IHN0cmluZ3MgdGhhdCBhZGhlcmVzIHRvIHRoZSBnaXZlbiBwYXR0ZXJucyBhbmQgcmV0dXJucyBh
IGphdmEudXRpbC5EYXRlIG9iamVjdApwdWJsaWMgc3RhdGljIGphdmEudXRpbC5DYWxlbmRhcltd
IHBhcnNlKFN0cmluZ1tdIGlucHV0cywgU3RyaW5nW10gcGF0dGVybnMpIHRocm93cyBJbGxlZ2Fs
QXJndW1lbnRFeGNlcHRpb24gewogICAgcmV0dXJuIHBhcnNlKGlucHV0cywgcGF0dGVybnMsIChT
dHJpbmcpbnVsbCk7Cn0KCi8vIHBhcnNlcyBhIGxpc3Qgb2YgZGF0ZXRpbWUgc3RyaW5ncyB0aGF0
IGFkaGVyZXMgdG8gdGhlIGdpdmVuIHBhdHRlcm5zIGFuZCByZXR1cm5zIGEgamF2YS51dGlsLkRh
dGUgb2JqZWN0CnB1YmxpYyBzdGF0aWMgamF2YS51dGlsLkNhbGVuZGFyW10gcGFyc2UoU3RyaW5n
W10gaW5wdXRzLCBTdHJpbmdbXSBwYXR0ZXJucywgU3RyaW5nIHRpbWV6b25lKSB0aHJvd3MgSWxs
ZWdhbEFyZ3VtZW50RXhjZXB0aW9uIHsKICAgIGphdmEudXRpbC5DYWxlbmRhcltdIG91dHB1dHMg
PSBudWxsOwogICAgaWYgKGlucHV0cyAhPSBudWxsKSB7CiAgICAgICAgb3V0cHV0cyA9IG5ldyBq
YXZhLnV0aWwuQ2FsZW5kYXJbaW5wdXRzLmxlbmd0aF07CiAgICAgICAgZm9yIChpbnQgaSA9IDA7
IGkgPCBpbnB1dHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgb3V0cHV0c1tpXSA9IHBhcnNl
KGlucHV0c1tpXSwgcGF0dGVybnMsIHRpbWV6b25lKTsKICAgICAgICB9CiAgICB9CiAgICByZXR1
cm4gb3V0cHV0czsKfQoKLy8gc3VidHJhY3RzIHRoZSBnaXZlbiB4bWwgZHVyYXRpb24gZnJvbSB0
aGUgZ2l2ZW4geG1sIGRhdGV0aW1lIHJldHVybmluZyB0aGUgcmVzdWx0CnB1YmxpYyBzdGF0aWMg
U3RyaW5nIHN1YnRyYWN0KFN0cmluZyBkYXRldGltZSwgU3RyaW5nIGR1cmF0aW9uKSB0aHJvd3Mg
U2VydmljZUV4Y2VwdGlvbiB7CiAgICByZXR1cm4gc3VidHJhY3QoZGF0ZXRpbWUsIG51bGwsIGR1
cmF0aW9uKTsKfQoKLy8gc3VidHJhY3RzIHRoZSBnaXZlbiB4bWwgZHVyYXRpb24gZnJvbSB0aGUg
Z2l2ZW4geG1sIGRhdGV0aW1lIHJldHVybmluZyB0aGUgcmVzdWx0CnB1YmxpYyBzdGF0aWMgU3Ry
aW5nIHN1YnRyYWN0KFN0cmluZyBkYXRldGltZSwgU3RyaW5nIGRhdGV0aW1lUGF0dGVybiwgU3Ry
aW5nIGR1cmF0aW9uKSB0aHJvd3MgU2VydmljZUV4Y2VwdGlvbiB7CiAgICByZXR1cm4gc3VidHJh
Y3QoZGF0ZXRpbWUsIGRhdGV0aW1lUGF0dGVybiwgZHVyYXRpb24sIG51bGwpOwp9CgovLyBzdWJ0
cmFjdHMgdGhlIGdpdmVuIHhtbCBkdXJhdGlvbiBmcm9tIHRoZSBnaXZlbiB4bWwgZGF0ZXRpbWUg
cmV0dXJuaW5nIHRoZSByZXN1bHQKcHVibGljIHN0YXRpYyBTdHJpbmcgc3VidHJhY3QoU3RyaW5n
IGRhdGV0aW1lLCBTdHJpbmcgZGF0ZXRpbWVQYXR0ZXJuLCBTdHJpbmcgZHVyYXRpb24sIFN0cmlu
ZyBkdXJhdGlvblBhdHRlcm4pIHRocm93cyBTZXJ2aWNlRXhjZXB0aW9uIHsKICAgIHJldHVybiBl
bWl0KHN1YnRyYWN0KHBhcnNlKGRhdGV0aW1lLCBkYXRldGltZVBhdHRlcm4pLCBEdXJhdGlvbkhl
bHBlci5wYXJzZShkdXJhdGlvbiwgZHVyYXRpb25QYXR0ZXJuKSksIGRhdGV0aW1lUGF0dGVybik7
Cn0KCi8vIHN1YnRyYWN0cyB0aGUgZ2l2ZW4gZHVyYXRpb24gZnJvbSB0aGUgZ2l2ZW4gZGF0ZXRp
bWUgcmV0dXJuaW5nIHRoZSByZXN1bHQKcHVibGljIHN0YXRpYyBqYXZhLnV0aWwuQ2FsZW5kYXIg
c3VidHJhY3QoamF2YS51dGlsLkNhbGVuZGFyIGNhbGVuZGFyLCBqYXZheC54bWwuZGF0YXR5cGUu
RHVyYXRpb24gZHVyYXRpb24pIHRocm93cyBTZXJ2aWNlRXhjZXB0aW9uIHsKICAgIGlmIChkdXJh
dGlvbiAhPSBudWxsKSBkdXJhdGlvbiA9IGR1cmF0aW9uLm5lZ2F0ZSgpOwogICAgcmV0dXJuIGFk
ZChjYWxlbmRhciwgZHVyYXRpb24pOwp9CgovLyByZXR1cm5zIHRoZSBjdXJyZW50IGRhdGV0aW1l
IG1pbnVzIHRoZSBnaXZlbiBYTUwgZHVyYXRpb24KcHVibGljIHN0YXRpYyBTdHJpbmcgZWFybGll
cihTdHJpbmcgZHVyYXRpb24pIHRocm93cyBTZXJ2aWNlRXhjZXB0aW9uIHsKICAgIHJldHVybiBl
YXJsaWVyKG51bGwsIGR1cmF0aW9uLCBudWxsKTsKfQoKLy8gcmV0dXJucyB0aGUgY3VycmVudCBk
YXRldGltZSBtaW51cyB0aGUgZ2l2ZW4gZHVyYXRpb24KcHVibGljIHN0YXRpYyBTdHJpbmcgZWFy
bGllcihTdHJpbmcgZHVyYXRpb24sIFN0cmluZyBkdXJhdGlvblBhdHRlcm4pIHRocm93cyBTZXJ2
aWNlRXhjZXB0aW9uIHsKICAgIHJldHVybiBlYXJsaWVyKG51bGwsIGR1cmF0aW9uLCBkdXJhdGlv
blBhdHRlcm4pOwp9CgovLyByZXR1cm5zIHRoZSBjdXJyZW50IGRhdGV0aW1lIG1pbnVzIHRoZSBn
aXZlbiBkdXJhdGlvbgpwdWJsaWMgc3RhdGljIFN0cmluZyBlYXJsaWVyKFN0cmluZyBkYXRldGlt
ZVBhdHRlcm4sIFN0cmluZyBkdXJhdGlvbiwgU3RyaW5nIGR1cmF0aW9uUGF0dGVybikgdGhyb3dz
IFNlcnZpY2VFeGNlcHRpb24gewogICAgcmV0dXJuIGVhcmxpZXIoZGF0ZXRpbWVQYXR0ZXJuLCBk
dXJhdGlvbiwgZHVyYXRpb25QYXR0ZXJuLCBudWxsKTsKfQoKLy8gcmV0dXJucyB0aGUgY3VycmVu
dCBkYXRldGltZSBtaW51cyB0aGUgZ2l2ZW4gZHVyYXRpb24KcHVibGljIHN0YXRpYyBTdHJpbmcg
ZWFybGllcihTdHJpbmcgZGF0ZXRpbWVQYXR0ZXJuLCBTdHJpbmcgZHVyYXRpb24sIFN0cmluZyBk
dXJhdGlvblBhdHRlcm4sIFN0cmluZyB0aW1lem9uZSkgdGhyb3dzIFNlcnZpY2VFeGNlcHRpb24g
ewogICAgcmV0dXJuIGVtaXQoZWFybGllcihEdXJhdGlvbkhlbHBlci5wYXJzZShkdXJhdGlvbiwg
ZHVyYXRpb25QYXR0ZXJuKSksIGRhdGV0aW1lUGF0dGVybiwgdGltZXpvbmUpOwp9CgovLyByZXR1
cm5zIHRoZSBjdXJyZW50IGRhdGV0aW1lIG1pbnVzIHRoZSBnaXZlbiBkdXJhdGlvbgpwdWJsaWMg
c3RhdGljIGphdmEudXRpbC5DYWxlbmRhciBlYXJsaWVyKGphdmF4LnhtbC5kYXRhdHlwZS5EdXJh
dGlvbiBkdXJhdGlvbikgdGhyb3dzIFNlcnZpY2VFeGNlcHRpb24gewogICAgcmV0dXJuIHN1YnRy
YWN0KGphdmEudXRpbC5DYWxlbmRhci5nZXRJbnN0YW5jZSgpLCBkdXJhdGlvbik7Cn0KCi8vIHJl
dHVybnMgdGhlIGN1cnJlbnQgZGF0ZXRpbWUgcGx1cyB0aGUgZ2l2ZW4gWE1MIGR1cmF0aW9uCnB1
YmxpYyBzdGF0aWMgU3RyaW5nIGxhdGVyKFN0cmluZyBkdXJhdGlvbikgdGhyb3dzIFNlcnZpY2VF
eGNlcHRpb24gewogICAgcmV0dXJuIGxhdGVyKG51bGwsIGR1cmF0aW9uLCBudWxsKTsKfQoKLy8g
cmV0dXJucyB0aGUgY3VycmVudCBkYXRldGltZSBwbHVzIHRoZSBnaXZlbiBkdXJhdGlvbgpwdWJs
aWMgc3RhdGljIFN0cmluZyBsYXRlcihTdHJpbmcgZHVyYXRpb24sIFN0cmluZyBkdXJhdGlvblBh
dHRlcm4pIHRocm93cyBTZXJ2aWNlRXhjZXB0aW9uIHsKICAgIHJldHVybiBsYXRlcihudWxsLCBk
dXJhdGlvbiwgZHVyYXRpb25QYXR0ZXJuKTsKfQoKLy8gcmV0dXJucyB0aGUgY3VycmVudCBkYXRl
dGltZSBwbHVzIHRoZSBnaXZlbiBkdXJhdGlvbgpwdWJsaWMgc3RhdGljIFN0cmluZyBsYXRlcihT
dHJpbmcgZGF0ZXRpbWVQYXR0ZXJuLCBTdHJpbmcgZHVyYXRpb24sIFN0cmluZyBkdXJhdGlvblBh
dHRlcm4pIHRocm93cyBTZXJ2aWNlRXhjZXB0aW9uIHsKICAgIHJldHVybiBsYXRlcihkYXRldGlt
ZVBhdHRlcm4sIGR1cmF0aW9uLCBkdXJhdGlvblBhdHRlcm4sIG51bGwpOwp9CgovLyByZXR1cm5z
IHRoZSBjdXJyZW50IGRhdGV0aW1lIHBsdXMgdGhlIGdpdmVuIGR1cmF0aW9uCnB1YmxpYyBzdGF0
aWMgU3RyaW5nIGxhdGVyKFN0cmluZyBkYXRldGltZVBhdHRlcm4sIFN0cmluZyBkdXJhdGlvbiwg
U3RyaW5nIGR1cmF0aW9uUGF0dGVybiwgU3RyaW5nIHRpbWV6b25lKSB0aHJvd3MgU2VydmljZUV4
Y2VwdGlvbiB7CiAgICByZXR1cm4gZW1pdChsYXRlcihEdXJhdGlvbkhlbHBlci5wYXJzZShkdXJh
dGlvbiwgZHVyYXRpb25QYXR0ZXJuKSksIGRhdGV0aW1lUGF0dGVybiwgdGltZXpvbmUpOwp9Cgov
LyByZXR1cm5zIHRoZSBjdXJyZW50IGRhdGV0aW1lIHBsdXMgdGhlIGdpdmVuIGR1cmF0aW9uCnB1
YmxpYyBzdGF0aWMgamF2YS51dGlsLkNhbGVuZGFyIGxhdGVyKGphdmF4LnhtbC5kYXRhdHlwZS5E
dXJhdGlvbiBkdXJhdGlvbikgdGhyb3dzIFNlcnZpY2VFeGNlcHRpb24gewogICAgcmV0dXJuIGFk
ZChqYXZhLnV0aWwuQ2FsZW5kYXIuZ2V0SW5zdGFuY2UoKSwgZHVyYXRpb24pOwp9CgovLyByZXR1
cm5zIHRoZSBsYXJnZXN0IGRhdGV0aW1lIGZyb20gdGhlIGdpdmVuIGxpc3Qgb2YgZGF0ZXRpbWUg
c3RyaW5ncwpwdWJsaWMgc3RhdGljIFN0cmluZyBtYXhpbXVtKFN0cmluZ1tdIGRhdGV0aW1lcywg
U3RyaW5nIHBhdHRlcm4pIHsKICAgIGlmIChkYXRldGltZXMgPT0gbnVsbCB8fCBkYXRldGltZXMu
bGVuZ3RoID09IDApIHJldHVybiBudWxsOwoKICAgIGphdmEudXRpbC5DYWxlbmRhcltdIGNhbGVu
ZGFycyA9IHBhcnNlKGRhdGV0aW1lcywgcGF0dGVybik7CiAgICBqYXZhLnV0aWwuU29ydGVkU2V0
PGphdmEudXRpbC5DYWxlbmRhcj4gc2V0ID0gbmV3IGphdmEudXRpbC5UcmVlU2V0PGphdmEudXRp
bC5DYWxlbmRhcj4oamF2YS51dGlsLkFycmF5cy5hc0xpc3QoY2FsZW5kYXJzKSk7CiAgICByZXR1
cm4gZW1pdChzZXQubGFzdCgpLCBwYXR0ZXJuKTsKfQoKLy8gcmV0dXJucyB0aGUgc21hbGxlc3Qg
ZGF0ZXRpbWUgZnJvbSB0aGUgZ2l2ZW4gbGlzdCBvZiBkYXRldGltZSBzdHJpbmdzCnB1YmxpYyBz
dGF0aWMgU3RyaW5nIG1pbmltdW0oU3RyaW5nW10gZGF0ZXRpbWVzLCBTdHJpbmcgcGF0dGVybikg
ewogICAgaWYgKGRhdGV0aW1lcyA9PSBudWxsIHx8IGRhdGV0aW1lcy5sZW5ndGggPT0gMCkgcmV0
dXJuIG51bGw7CgogICAgamF2YS51dGlsLkNhbGVuZGFyW10gY2FsZW5kYXJzID0gcGFyc2UoZGF0
ZXRpbWVzLCBwYXR0ZXJuKTsKICAgIGphdmEudXRpbC5Tb3J0ZWRTZXQ8amF2YS51dGlsLkNhbGVu
ZGFyPiBzZXQgPSBuZXcgamF2YS51dGlsLlRyZWVTZXQ8amF2YS51dGlsLkNhbGVuZGFyPihqYXZh
LnV0aWwuQXJyYXlzLmFzTGlzdChjYWxlbmRhcnMpKTsKICAgIHJldHVybiBlbWl0KHNldC5maXJz
dCgpLCBwYXR0ZXJuKTsKfQ==</value>
  <value name="encodeutf8">true</value>
  <value name="extends"></value>
  <array name="implements" type="value" depth="1">
  </array>
  <array name="imports" type="value" depth="1">
    <value>permafrost.tundra.lang.BooleanHelper</value>
    <value>permafrost.tundra.lang.ExceptionHelper</value>
    <value>permafrost.tundra.time.DateTimeHelper</value>
    <value>permafrost.tundra.time.DurationHelper</value>
  </array>
</Values>
