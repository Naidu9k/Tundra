<?xml version="1.0" encoding="UTF-8"?>

<Values version="2.0">
  <value name="node_type">interface</value>
  <value name="node_nsName">tundra.datetime</value>
  <value name="shared">cHJvdGVjdGVkIHN0YXRpYyBmaW5hbCBTdHJpbmcgREVGQVVMVF9EQVRFVElNRV9QQVRURVJOID0g
ImRhdGV0aW1lIjsKCnByb3RlY3RlZCBzdGF0aWMgZmluYWwgamF2YS51dGlsLk1hcDxTdHJpbmcs
IFN0cmluZz4gbmFtZWRQYXR0ZXJucyA9IGNvbnN0cnVjdE5hbWVkUGF0dGVybnMoKTsKCnByb3Rl
Y3RlZCBzdGF0aWMgZmluYWwgamF2YS51dGlsLk1hcDxTdHJpbmcsIFN0cmluZz4gY29uc3RydWN0
TmFtZWRQYXR0ZXJucygpIHsKICAgIGphdmEudXRpbC5NYXA8U3RyaW5nLCBTdHJpbmc+IG1hcCA9
IG5ldyBqYXZhLnV0aWwuVHJlZU1hcDxTdHJpbmcsIFN0cmluZz4oKTsKCiAgICBtYXAucHV0KCJk
YXRldGltZS5qZGJjIiwgInl5eXktTU0tZGQgSEg6bW06c3MuU1NTIik7CiAgICBtYXAucHV0KCJk
YXRlIiwgInl5eXktTU0tZGQiKTsKICAgIG1hcC5wdXQoImRhdGUuamRiYyIsICJ5eXl5LU1NLWRk
Iik7CiAgICBtYXAucHV0KCJkYXRlLnhtbCIsICJ5eXl5LU1NLWRkIik7CiAgICBtYXAucHV0KCJ0
aW1lIiwgIkhIOm1tOnNzLlNTUyIpOwogICAgbWFwLnB1dCgidGltZS5qZGJjIiwgIkhIOm1tOnNz
Iik7CiAgICBtYXAucHV0KCJ0aW1lLnhtbCIsICJISDptbTpzcy5TU1MiKTsKCiAgICByZXR1cm4g
bWFwOwp9CgovLyBhZGRzIHRoZSBnaXZlbiB4bWwgZHVyYXRpb24gdG8gdGhlIGdpdmVuIHhtbCBk
YXRldGltZSByZXR1cm5pbmcgdGhlIHJlc3VsdApwdWJsaWMgc3RhdGljIFN0cmluZyBhZGQoU3Ry
aW5nIGRhdGV0aW1lLCBTdHJpbmcgZHVyYXRpb24pIHRocm93cyBTZXJ2aWNlRXhjZXB0aW9uIHsK
ICAgIHJldHVybiBhZGQoZGF0ZXRpbWUsIG51bGwsIGR1cmF0aW9uKTsKfQoKLy8gYWRkcyB0aGUg
Z2l2ZW4geG1sIGR1cmF0aW9uIHRvIHRoZSBnaXZlbiB4bWwgZGF0ZXRpbWUgcmV0dXJuaW5nIHRo
ZSByZXN1bHQKcHVibGljIHN0YXRpYyBTdHJpbmcgYWRkKFN0cmluZyBkYXRldGltZSwgU3RyaW5n
IHBhdHRlcm4sIFN0cmluZyBkdXJhdGlvbikgdGhyb3dzIFNlcnZpY2VFeGNlcHRpb24gewogICAg
cmV0dXJuIGFkZChkYXRldGltZSwgcGF0dGVybiwgZHVyYXRpb24sIG51bGwpOwp9CgovLyBhZGRz
IHRoZSBnaXZlbiB4bWwgZHVyYXRpb24gdG8gdGhlIGdpdmVuIHhtbCBkYXRldGltZSByZXR1cm5p
bmcgdGhlIHJlc3VsdApwdWJsaWMgc3RhdGljIFN0cmluZyBhZGQoU3RyaW5nIGRhdGV0aW1lLCBT
dHJpbmcgZGF0ZXRpbWVQYXR0ZXJuLCBTdHJpbmcgZHVyYXRpb24sIFN0cmluZyBkdXJhdGlvblBh
dHRlcm4pIHRocm93cyBTZXJ2aWNlRXhjZXB0aW9uIHsKICAgIHJldHVybiBlbWl0KGFkZChwYXJz
ZShkYXRldGltZSwgZGF0ZXRpbWVQYXR0ZXJuKSwgdHVuZHJhLmR1cmF0aW9uLnBhcnNlKGR1cmF0
aW9uLCBkdXJhdGlvblBhdHRlcm4pKSwgZGF0ZXRpbWVQYXR0ZXJuKTsKfQoKLy8gYWRkcyB0aGUg
Z2l2ZW4geG1sIGR1cmF0aW9uIHRvIHRoZSBnaXZlbiB4bWwgZGF0ZXRpbWUgcmV0dXJuaW5nIHRo
ZSByZXN1bHQKcHVibGljIHN0YXRpYyBqYXZhLnV0aWwuQ2FsZW5kYXIgYWRkKGphdmEudXRpbC5D
YWxlbmRhciBjYWxlbmRhciwgamF2YXgueG1sLmRhdGF0eXBlLkR1cmF0aW9uIGR1cmF0aW9uKSB0
aHJvd3MgU2VydmljZUV4Y2VwdGlvbiB7CiAgICBpZiAoY2FsZW5kYXIgPT0gbnVsbCB8fCBkdXJh
dGlvbiA9PSBudWxsKSByZXR1cm4gY2FsZW5kYXI7CgogICAgdHJ5IHsKICAgICAgICBqYXZhLnV0
aWwuR3JlZ29yaWFuQ2FsZW5kYXIgZ2NhbCA9IG5ldyBqYXZhLnV0aWwuR3JlZ29yaWFuQ2FsZW5k
YXIoKTsKICAgICAgICBnY2FsLnNldFRpbWUoY2FsZW5kYXIuZ2V0VGltZSgpKTsKICAgICAgICBn
Y2FsLnNldFRpbWVab25lKGNhbGVuZGFyLmdldFRpbWVab25lKCkpOwogICAgICAgIGphdmF4Lnht
bC5kYXRhdHlwZS5YTUxHcmVnb3JpYW5DYWxlbmRhciB4Y2FsID0gamF2YXgueG1sLmRhdGF0eXBl
LkRhdGF0eXBlRmFjdG9yeS5uZXdJbnN0YW5jZSgpLm5ld1hNTEdyZWdvcmlhbkNhbGVuZGFyKGdj
YWwpOwogICAgICAgIHhjYWwuYWRkKGR1cmF0aW9uKTsKCiAgICAgICAgY2FsZW5kYXIgPSB4Y2Fs
LnRvR3JlZ29yaWFuQ2FsZW5kYXIoKTsKICAgIH0gY2F0Y2ggKGphdmF4LnhtbC5kYXRhdHlwZS5E
YXRhdHlwZUNvbmZpZ3VyYXRpb25FeGNlcHRpb24gZXgpIHsKICAgICAgICBFeGNlcHRpb25IZWxw
ZXIucmFpc2UoZXgpOwogICAgfQoKICAgIHJldHVybiBjYWxlbmRhcjsKfQoKLy8gY29tcGFyZXMg
dHdvIHhtbCBkYXRldGltZSBzdHJpbmdzCnB1YmxpYyBzdGF0aWMgaW50IGNvbXBhcmUoU3RyaW5n
IGR4LCBTdHJpbmcgZHkpIHsKICAgIHJldHVybiBjb21wYXJlKGR4LCBkeSwgbnVsbCk7Cn0KCi8v
IGNvbXBhcmVzIHR3byB4bWwgZGF0ZXRpbWUgc3RyaW5ncwpwdWJsaWMgc3RhdGljIGludCBjb21w
YXJlKFN0cmluZyBkeCwgU3RyaW5nIGR5LCBTdHJpbmcgcGF0dGVybikgewogICAgcmV0dXJuIGNv
bXBhcmUocGFyc2UoZHgsIHBhdHRlcm4pLCBwYXJzZShkeSwgcGF0dGVybikpOwp9CgoKLy8gY29t
cGFyZXMgdHdvIGRhdGV0aW1lcwpwdWJsaWMgc3RhdGljIGludCBjb21wYXJlKGphdmEudXRpbC5D
YWxlbmRhciBjeCwgamF2YS51dGlsLkNhbGVuZGFyIGN5KSB7CiAgICBpZiAoY3ggPT0gbnVsbCAm
JiBjeSA9PSBudWxsKSByZXR1cm4gMDsKICAgIGlmIChjeCA9PSBudWxsICYmIGN5ICE9IG51bGwp
IHJldHVybiAtMTsKICAgIGlmIChjeCAhPSBudWxsICYmIGN5ID09IG51bGwpIHJldHVybiAxOwoK
ICAgIHJldHVybiBjeC5jb21wYXJlVG8oY3kpOwp9CgovLyBjb25jYXRlbmF0ZXMgYSB4bWwgZGF0
ZSBhbmQgeG1sIHRpbWUgdG9nZXRoZXIgdG8gZm9ybSBhbiB4bWwgZGF0ZXRpbWUKcHVibGljIHN0
YXRpYyBTdHJpbmcgY29uY2F0ZW5hdGUoU3RyaW5nIGRhdGUsIFN0cmluZyB0aW1lKSB7CiAgICBy
ZXR1cm4gZW1pdChjb25jYXRlbmF0ZShwYXJzZShkYXRlLCAiZGF0ZSIpLCBwYXJzZSh0aW1lLCAi
dGltZSIpKSk7Cn0KCi8vIGFkZHMgdHdvIGRhdGVzIHRvZ2V0aGVyCnB1YmxpYyBzdGF0aWMgamF2
YS51dGlsLkNhbGVuZGFyIGNvbmNhdGVuYXRlKGphdmEudXRpbC5DYWxlbmRhciBkYXRlLCBqYXZh
LnV0aWwuQ2FsZW5kYXIgdGltZSkgewogICAgamF2YS51dGlsLkNhbGVuZGFyIGxvY2FsRGF0ZVRp
bWUgPSBuZXcgamF2YS51dGlsLkdyZWdvcmlhbkNhbGVuZGFyKCk7CiAgICBsb2NhbERhdGVUaW1l
LnNldFRpbWVJbk1pbGxpcyhkYXRlLmdldFRpbWVJbk1pbGxpcygpICsgdGltZS5nZXRUaW1lSW5N
aWxsaXMoKSk7CgogICAgcmV0dXJuIGxvY2FsRGF0ZVRpbWU7Cn0KCi8vIHJldHVybnMgdGhlIHht
bCBkdXJhdGlvbiBiZXR3ZWVuIHR3byBnaXZlbiB4bWwgZGF0ZXRpbWVzCnB1YmxpYyBzdGF0aWMg
U3RyaW5nIGR1cmF0aW9uKFN0cmluZyBzdGFydCwgU3RyaW5nIGVuZCkgewogICAgcmV0dXJuIGR1
cmF0aW9uKHN0YXJ0LCBlbmQsIG51bGwpOwp9CgovLyByZXR1cm5zIHRoZSB4bWwgZHVyYXRpb24g
YmV0d2VlbiB0d28gZ2l2ZW4geG1sIGRhdGV0aW1lcwpwdWJsaWMgc3RhdGljIFN0cmluZyBkdXJh
dGlvbihTdHJpbmcgc3RhcnQsIFN0cmluZyBlbmQsIFN0cmluZyBkYXRldGltZVBhdHRlcm4pIHsK
ICAgIHJldHVybiBkdXJhdGlvbihzdGFydCwgZW5kLCBkYXRldGltZVBhdHRlcm4sIG51bGwpOwp9
CgovLyByZXR1cm5zIHRoZSB4bWwgZHVyYXRpb24gYmV0d2VlbiB0d28gZ2l2ZW4geG1sIGRhdGV0
aW1lcwpwdWJsaWMgc3RhdGljIFN0cmluZyBkdXJhdGlvbihTdHJpbmcgc3RhcnQsIFN0cmluZyBl
bmQsIFN0cmluZyBkYXRldGltZVBhdHRlcm4sIFN0cmluZyBkdXJhdGlvblBhdHRlcm4pIHsKICAg
IHJldHVybiB0dW5kcmEuZHVyYXRpb24uZW1pdChkdXJhdGlvbihwYXJzZShzdGFydCwgZGF0ZXRp
bWVQYXR0ZXJuKSwgcGFyc2UoZW5kLCBkYXRldGltZVBhdHRlcm4pKSwgZHVyYXRpb25QYXR0ZXJu
KTsKfQoKLy8gcmV0dXJucyB0aGUgeG1sIGR1cmF0aW9uIGJldHdlZW4gdHdvIGdpdmVuIHhtbCBk
YXRldGltZXMKcHVibGljIHN0YXRpYyBqYXZheC54bWwuZGF0YXR5cGUuRHVyYXRpb24gZHVyYXRp
b24oamF2YS51dGlsLkNhbGVuZGFyIHN0YXJ0LCBqYXZhLnV0aWwuQ2FsZW5kYXIgZW5kKSB7CiAg
ICBpZiAoc3RhcnQgPT0gbnVsbCB8fCBlbmQgPT0gbnVsbCkgcmV0dXJuIG51bGw7CiAgICByZXR1
cm4gdHVuZHJhLmR1cmF0aW9uLnBhcnNlKCIiICsgKGVuZC5nZXRUaW1lSW5NaWxsaXMoKSAtIHN0
YXJ0LmdldFRpbWVJbk1pbGxpcygpKSwgIm1pbGxpc2Vjb25kcyIpOwp9CgovLyByZXR1cm5zIHRo
ZSBnaXZlbiBkYXRldGltZSBhcyBhbiB4bWwgZGF0ZXRpbWUgc3RyaW5nCnB1YmxpYyBzdGF0aWMg
U3RyaW5nIGVtaXQoamF2YS51dGlsLkRhdGUgaW5wdXQpIHsKICAgIHJldHVybiBlbWl0KGlucHV0
LCBudWxsKTsKfQoKLy8gcmV0dXJucyB0aGUgZ2l2ZW4gZGF0ZXRpbWUgYXMgYSBzdHJpbmcgYWRo
ZXJpbmcgdG8gdGhlIGdpdmVuIHBhdHRlcm4KcHVibGljIHN0YXRpYyBTdHJpbmcgZW1pdChqYXZh
LnV0aWwuRGF0ZSBpbnB1dCwgU3RyaW5nIHBhdHRlcm4pIHsKICAgIHJldHVybiBlbWl0KGlucHV0
LCBwYXR0ZXJuLCBudWxsKTsKfQoKLy8gcmV0dXJucyB0aGUgZ2l2ZW4gZGF0ZXRpbWUgYXMgYSBz
dHJpbmcgYWRoZXJpbmcgdG8gdGhlIGdpdmVuIHBhdHRlcm4KcHVibGljIHN0YXRpYyBTdHJpbmcg
ZW1pdChqYXZhLnV0aWwuRGF0ZSBpbnB1dCwgU3RyaW5nIHBhdHRlcm4sIFN0cmluZyB0aW1lem9u
ZSkgewogICAgaWYgKGlucHV0ID09IG51bGwpIHJldHVybiBudWxsOwoKICAgIGphdmEudXRpbC5D
YWxlbmRhciBjYWxlbmRhciA9IGphdmEudXRpbC5DYWxlbmRhci5nZXRJbnN0YW5jZSgpOwogICAg
Y2FsZW5kYXIuc2V0VGltZShpbnB1dCk7CgogICAgcmV0dXJuIGVtaXQoY2FsZW5kYXIsIHBhdHRl
cm4sIHRpbWV6b25lKTsKfQoKLy8gcmV0dXJucyB0aGUgZ2l2ZW4gZGF0ZXRpbWUgYXMgYW4geG1s
IGRhdGV0aW1lIHN0cmluZwpwdWJsaWMgc3RhdGljIFN0cmluZyBlbWl0KGphdmEudXRpbC5DYWxl
bmRhciBpbnB1dCkgewogICAgcmV0dXJuIGVtaXQoaW5wdXQsIG51bGwpOwp9CgovLyByZXR1cm5z
IHRoZSBnaXZlbiBkYXRldGltZSBmb3JtYXR0ZWQgYXMgYSBzdHJpbmcgYWRoZXJpbmcgdG8gdGhl
IGdpdmVuIHBhdHRlcm4KcHVibGljIHN0YXRpYyBTdHJpbmcgZW1pdChqYXZhLnV0aWwuQ2FsZW5k
YXIgaW5wdXQsIFN0cmluZyBwYXR0ZXJuKSB7CiAgICByZXR1cm4gZW1pdChpbnB1dCwgcGF0dGVy
biwgbnVsbCk7Cn0KCi8vIHJldHVybnMgdGhlIGdpdmVuIGRhdGV0aW1lIGZvcm1hdHRlZCBhcyBh
IHN0cmluZyBhZGhlcmluZyB0byB0aGUgZ2l2ZW4gcGF0dGVybgpwdWJsaWMgc3RhdGljIFN0cmlu
ZyBlbWl0KGphdmEudXRpbC5DYWxlbmRhciBpbnB1dCwgU3RyaW5nIHBhdHRlcm4sIFN0cmluZyB0
aW1lem9uZSkgewogICAgaWYgKHBhdHRlcm4gPT0gbnVsbCkgcGF0dGVybiA9IERFRkFVTFRfREFU
RVRJTUVfUEFUVEVSTjsKICAgIFN0cmluZyBvdXRwdXQgPSBudWxsOwoKICAgIGlmIChpbnB1dCAh
PSBudWxsKSB7CiAgICAgICAgaWYgKHRpbWV6b25lICE9IG51bGwpIGlucHV0ID0gdHVuZHJhLnN1
cHBvcnQudGltZXpvbmUuY29udmVydChpbnB1dCwgdGltZXpvbmUpOwoKICAgICAgICBpZiAocGF0
dGVybi5lcXVhbHMoImRhdGV0aW1lIikgfHwgcGF0dGVybi5lcXVhbHMoImRhdGV0aW1lLnhtbCIp
KSB7CiAgICAgICAgICAgIG91dHB1dCA9IGphdmF4LnhtbC5iaW5kLkRhdGF0eXBlQ29udmVydGVy
LnByaW50RGF0ZVRpbWUoaW5wdXQpOwogICAgICAgIH0gZWxzZSBpZiAocGF0dGVybi5lcXVhbHMo
Im1pbGxpc2Vjb25kcyIpKSB7CiAgICAgICAgICAgIG91dHB1dCA9ICIiICsgaW5wdXQuZ2V0VGlt
ZUluTWlsbGlzKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYgKG5hbWVkUGF0dGVy
bnMuY29udGFpbnNLZXkocGF0dGVybikpIHBhdHRlcm4gPSBuYW1lZFBhdHRlcm5zLmdldChwYXR0
ZXJuKTsKICAgICAgICAgICAgamF2YS50ZXh0LkRhdGVGb3JtYXQgZm9ybWF0dGVyID0gbmV3IGph
dmEudGV4dC5TaW1wbGVEYXRlRm9ybWF0KHBhdHRlcm4pOwogICAgICAgICAgICBmb3JtYXR0ZXIu
c2V0VGltZVpvbmUoaW5wdXQuZ2V0VGltZVpvbmUoKSk7CiAgICAgICAgICAgIGZvcm1hdHRlci5z
ZXRMZW5pZW50KGZhbHNlKTsKICAgICAgICAgICAgb3V0cHV0ID0gZm9ybWF0dGVyLmZvcm1hdChp
bnB1dC5nZXRUaW1lKCkpOwogICAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gb3V0cHV0Owp9Cgov
LyByZXR1cm5zIHRoZSBnaXZlbiBkYXRldGltZSBmb3JtYXR0ZWQgYXMgYSBzdHJpbmcgYWRoZXJp
bmcgdG8gdGhlIGdpdmVuIHBhdHRlcm4KcHVibGljIHN0YXRpYyBTdHJpbmdbXSBlbWl0KGphdmEu
dXRpbC5DYWxlbmRhcltdIGlucHV0cywgU3RyaW5nIHBhdHRlcm4pIHsKICAgIHJldHVybiBlbWl0
KGlucHV0cywgcGF0dGVybiwgbnVsbCk7Cn0KCi8vIHJldHVybnMgdGhlIGdpdmVuIGRhdGV0aW1l
IGZvcm1hdHRlZCBhcyBhIHN0cmluZyBhZGhlcmluZyB0byB0aGUgZ2l2ZW4gcGF0dGVybgpwdWJs
aWMgc3RhdGljIFN0cmluZ1tdIGVtaXQoamF2YS51dGlsLkNhbGVuZGFyW10gaW5wdXRzLCBTdHJp
bmcgcGF0dGVybiwgU3RyaW5nIHRpbWV6b25lKSB7CiAgICBTdHJpbmdbXSBvdXRwdXRzID0gbnVs
bDsKICAgIGlmIChpbnB1dHMgIT0gbnVsbCkgewogICAgICAgIG91dHB1dHMgPSBuZXcgU3RyaW5n
W2lucHV0cy5sZW5ndGhdOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgaW5wdXRzLmxlbmd0
aDsgaSsrKSB7CiAgICAgICAgICAgIG91dHB1dHNbaV0gPSBlbWl0KGlucHV0c1tpXSwgcGF0dGVy
biwgdGltZXpvbmUpOwogICAgICAgIH0KICAgIH0KICAgIHJldHVybiBvdXRwdXRzOwp9CgovLyBy
ZWZvcm1hdHMgYSBkYXRldGltZSBzdHJpbmcgYWNjb3JkaW5nIHRvIHRoZSBnaXZlbiBwYXR0ZXJu
cwpwdWJsaWMgc3RhdGljIFN0cmluZyBmb3JtYXQoU3RyaW5nIGlucHV0LCBTdHJpbmcgaW5QYXR0
ZXJuLCBTdHJpbmcgb3V0UGF0dGVybikgewogICAgcmV0dXJuIGZvcm1hdChpbnB1dCwgaW5QYXR0
ZXJuLCBudWxsLCBvdXRQYXR0ZXJuLCBudWxsKTsKfQoKLy8gcmVmb3JtYXRzIGEgZGF0ZXRpbWUg
c3RyaW5nIGFjY29yZGluZyB0byB0aGUgZ2l2ZW4gcGF0dGVybnMKcHVibGljIHN0YXRpYyBTdHJp
bmcgZm9ybWF0KFN0cmluZyBpbnB1dCwgU3RyaW5nIGluUGF0dGVybiwgU3RyaW5nIGluVGltZVpv
bmUsIFN0cmluZyBvdXRQYXR0ZXJuLCBTdHJpbmcgb3V0VGltZVpvbmUpIHsKICAgIHJldHVybiBl
bWl0KHBhcnNlKGlucHV0LCBpblBhdHRlcm4sIGluVGltZVpvbmUpLCBvdXRQYXR0ZXJuLCBvdXRU
aW1lWm9uZSk7Cn0KCi8vIHJlZm9ybWF0cyBhIGRhdGV0aW1lIHN0cmluZyBhY2NvcmRpbmcgdG8g
dGhlIGdpdmVuIHBhdHRlcm5zCnB1YmxpYyBzdGF0aWMgU3RyaW5nIGZvcm1hdChTdHJpbmcgaW5w
dXQsIFN0cmluZ1tdIGluUGF0dGVybnMsIFN0cmluZyBvdXRQYXR0ZXJuKSB7CiAgICByZXR1cm4g
Zm9ybWF0KGlucHV0LCBpblBhdHRlcm5zLCBudWxsLCBvdXRQYXR0ZXJuLCBudWxsKTsKfQoKLy8g
cmVmb3JtYXRzIGEgZGF0ZXRpbWUgc3RyaW5nIGFjY29yZGluZyB0byB0aGUgZ2l2ZW4gcGF0dGVy
bnMKcHVibGljIHN0YXRpYyBTdHJpbmcgZm9ybWF0KFN0cmluZyBpbnB1dCwgU3RyaW5nW10gaW5Q
YXR0ZXJucywgU3RyaW5nIGluVGltZVpvbmUsIFN0cmluZyBvdXRQYXR0ZXJuLCBTdHJpbmcgb3V0
VGltZVpvbmUpIHsKICAgIHJldHVybiBlbWl0KHBhcnNlKGlucHV0LCBpblBhdHRlcm5zLCBpblRp
bWVab25lKSwgb3V0UGF0dGVybiwgb3V0VGltZVpvbmUpOwp9CgovLyByZWZvcm1hdHMgYSBsaXN0
IGRhdGV0aW1lIHN0cmluZ3MgYWNjb3JkaW5nIHRvIHRoZSBnaXZlbiBwYXR0ZXJucwpwdWJsaWMg
c3RhdGljIFN0cmluZ1tdIGZvcm1hdChTdHJpbmdbXSBpbnB1dHMsIFN0cmluZyBpblBhdHRlcm4s
IFN0cmluZyBvdXRQYXR0ZXJuKSB7CiAgICByZXR1cm4gZm9ybWF0KGlucHV0cywgaW5QYXR0ZXJu
LCBudWxsLCBvdXRQYXR0ZXJuLCBudWxsKTsKfQoKLy8gcmVmb3JtYXRzIGEgbGlzdCBkYXRldGlt
ZSBzdHJpbmdzIGFjY29yZGluZyB0byB0aGUgZ2l2ZW4gcGF0dGVybnMKcHVibGljIHN0YXRpYyBT
dHJpbmdbXSBmb3JtYXQoU3RyaW5nW10gaW5wdXRzLCBTdHJpbmcgaW5QYXR0ZXJuLCBTdHJpbmcg
aW5UaW1lWm9uZSwgU3RyaW5nIG91dFBhdHRlcm4sIFN0cmluZyBvdXRUaW1lWm9uZSkgewogICAg
U3RyaW5nW10gb3V0cHV0cyA9IG51bGw7CiAgICBpZiAoaW5wdXRzICE9IG51bGwpIHsKICAgICAg
ICBvdXRwdXRzID0gbmV3IFN0cmluZ1tpbnB1dHMubGVuZ3RoXTsKICAgICAgICBmb3IgKGludCBp
ID0gMDsgaSA8IGlucHV0cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBvdXRwdXRzW2ldID0g
dHVuZHJhLmRhdGV0aW1lLmZvcm1hdChpbnB1dHNbaV0sIGluUGF0dGVybiwgaW5UaW1lWm9uZSwg
b3V0UGF0dGVybiwgb3V0VGltZVpvbmUpOwogICAgICAgIH0KICAgIH0KICAgIHJldHVybiBvdXRw
dXRzOwp9CgovLyByZWZvcm1hdHMgYSBsaXN0IGRhdGV0aW1lIHN0cmluZ3MgYWNjb3JkaW5nIHRv
IHRoZSBnaXZlbiBwYXR0ZXJucwpwdWJsaWMgc3RhdGljIFN0cmluZ1tdIGZvcm1hdChTdHJpbmdb
XSBpbnB1dHMsIFN0cmluZ1tdIGluUGF0dGVybnMsIFN0cmluZyBvdXRQYXR0ZXJuKSB7CiAgICBy
ZXR1cm4gZm9ybWF0KGlucHV0cywgaW5QYXR0ZXJucywgbnVsbCwgb3V0UGF0dGVybiwgbnVsbCk7
Cn0KCi8vIHJlZm9ybWF0cyBhIGxpc3QgZGF0ZXRpbWUgc3RyaW5ncyBhY2NvcmRpbmcgdG8gdGhl
IGdpdmVuIHBhdHRlcm5zCnB1YmxpYyBzdGF0aWMgU3RyaW5nW10gZm9ybWF0KFN0cmluZ1tdIGlu
cHV0cywgU3RyaW5nW10gaW5QYXR0ZXJucywgU3RyaW5nIGluVGltZVpvbmUsIFN0cmluZyBvdXRQ
YXR0ZXJuLCBTdHJpbmcgb3V0VGltZVpvbmUpIHsKICAgIFN0cmluZ1tdIG91dHB1dHMgPSBudWxs
OwogICAgaWYgKGlucHV0cyAhPSBudWxsKSB7CiAgICAgICAgb3V0cHV0cyA9IG5ldyBTdHJpbmdb
aW5wdXRzLmxlbmd0aF07CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBpbnB1dHMubGVuZ3Ro
OyBpKyspIHsKICAgICAgICAgICAgb3V0cHV0c1tpXSA9IHR1bmRyYS5kYXRldGltZS5mb3JtYXQo
aW5wdXRzW2ldLCBpblBhdHRlcm5zLCBpblRpbWVab25lLCBvdXRQYXR0ZXJuLCBvdXRUaW1lWm9u
ZSk7CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuIG91dHB1dHM7Cn0KCi8vIHJldHVybnMgdGhl
IGN1cnJlbnQgZGF0ZXRpbWUgYXMgYW4geG1sIGRhdGV0aW1lIHN0cmluZwpwdWJsaWMgc3RhdGlj
IFN0cmluZyBub3coKSB7CiAgICByZXR1cm4gbm93KCJkYXRldGltZSIpOwp9CgovLyByZXR1cm5z
IHRoZSBjdXJyZW50IGRhdGV0aW1lIGFzIGFuIGRhdGV0aW1lIHN0cmluZyBmb3JtYXR0ZWQgYWNj
b3JkaW5nIHRvIHRoZSBnaXZlbiBwYXR0ZXJuCnB1YmxpYyBzdGF0aWMgU3RyaW5nIG5vdyhTdHJp
bmcgcGF0dGVybikgewogICAgcmV0dXJuIG5vdyhwYXR0ZXJuLCBudWxsKTsKfQoKLy8gcmV0dXJu
cyB0aGUgY3VycmVudCBkYXRldGltZSBhcyBhbiBkYXRldGltZSBzdHJpbmcgZm9ybWF0dGVkIGFj
Y29yZGluZyB0byB0aGUgZ2l2ZW4gcGF0dGVybgpwdWJsaWMgc3RhdGljIFN0cmluZyBub3coU3Ry
aW5nIHBhdHRlcm4sIFN0cmluZyB0aW1lem9uZSkgewogICAgcmV0dXJuIGVtaXQoamF2YS51dGls
LkNhbGVuZGFyLmdldEluc3RhbmNlKCksIHBhdHRlcm4sIHRpbWV6b25lKTsKfQoKLy8gcGFyc2Vz
IGFuIHhtbCBkYXRldGltZSBzdHJpbmcgYW5kIHJldHVybnMgYSBqYXZhLnV0aWwuRGF0ZSBvYmpl
Y3QKcHVibGljIHN0YXRpYyBqYXZhLnV0aWwuQ2FsZW5kYXIgcGFyc2UoU3RyaW5nIGlucHV0KSB7
CiAgICByZXR1cm4gcGFyc2UoaW5wdXQsIChTdHJpbmcpbnVsbCk7Cn0KCi8vIHBhcnNlcyBhIGRh
dGV0aW1lIHN0cmluZyB0aGF0IGFkaGVyZXMgdG8gdGhlIGdpdmVuIHBhdHRlcm4gYW5kIHJldHVy
bnMgYSBqYXZhLnV0aWwuRGF0ZSBvYmplY3QKcHVibGljIHN0YXRpYyBqYXZhLnV0aWwuQ2FsZW5k
YXIgcGFyc2UoU3RyaW5nIGlucHV0LCBTdHJpbmcgcGF0dGVybikgdGhyb3dzIElsbGVnYWxBcmd1
bWVudEV4Y2VwdGlvbiB7CiAgICByZXR1cm4gcGFyc2UoaW5wdXQsIHBhdHRlcm4sIChTdHJpbmcp
bnVsbCk7Cn0KCi8vIHBhcnNlcyBhIGRhdGV0aW1lIHN0cmluZyB0aGF0IGFkaGVyZXMgdG8gdGhl
IGdpdmVuIHBhdHRlcm4gYW5kIHJldHVybnMgYSBqYXZhLnV0aWwuRGF0ZSBvYmplY3QKcHVibGlj
IHN0YXRpYyBqYXZhLnV0aWwuQ2FsZW5kYXIgcGFyc2UoU3RyaW5nIGlucHV0LCBTdHJpbmcgcGF0
dGVybiwgU3RyaW5nIHRpbWV6b25lKSB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIHsK
ICAgIGlmIChwYXR0ZXJuID09IG51bGwpIHBhdHRlcm4gPSBERUZBVUxUX0RBVEVUSU1FX1BBVFRF
Uk47CgogICAgamF2YS51dGlsLkNhbGVuZGFyIG91dHB1dCA9IG51bGw7CgogICAgaWYgKGlucHV0
ICE9IG51bGwpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBpZiAocGF0dGVybi5lcXVhbHMo
ImRhdGV0aW1lIikgfHwgcGF0dGVybi5lcXVhbHMoImRhdGV0aW1lLnhtbCIpKSB7CiAgICAgICAg
ICAgICAgICBvdXRwdXQgPSBqYXZheC54bWwuYmluZC5EYXRhdHlwZUNvbnZlcnRlci5wYXJzZURh
dGVUaW1lKGlucHV0KTsKICAgICAgICAgICAgfSBlbHNlIGlmIChwYXR0ZXJuLmVxdWFscygiZGF0
ZXRpbWUuamRiYyIpKSB7CiAgICAgICAgICAgICAgICBvdXRwdXQgPSBqYXZhLnV0aWwuQ2FsZW5k
YXIuZ2V0SW5zdGFuY2UoKTsKICAgICAgICAgICAgICAgIG91dHB1dC5zZXRUaW1lKGphdmEuc3Fs
LlRpbWVzdGFtcC52YWx1ZU9mKGlucHV0KSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAocGF0dGVy
bi5lcXVhbHMoImRhdGUiKSB8fCBwYXR0ZXJuLmVxdWFscygiZGF0ZS54bWwiKSkgewogICAgICAg
ICAgICAgICAgb3V0cHV0ID0gamF2YXgueG1sLmJpbmQuRGF0YXR5cGVDb252ZXJ0ZXIucGFyc2VE
YXRlKGlucHV0KTsKICAgICAgICAgICAgfSBlbHNlIGlmIChwYXR0ZXJuLmVxdWFscygidGltZSIp
IHx8IHBhdHRlcm4uZXF1YWxzKCJ0aW1lLnhtbCIpKSB7CiAgICAgICAgICAgICAgICBvdXRwdXQg
PSBqYXZheC54bWwuYmluZC5EYXRhdHlwZUNvbnZlcnRlci5wYXJzZVRpbWUoaW5wdXQpOwogICAg
ICAgICAgICB9IGVsc2UgaWYgKHBhdHRlcm4uZXF1YWxzKCJtaWxsaXNlY29uZHMiKSkgewogICAg
ICAgICAgICAgICAgb3V0cHV0ID0gamF2YS51dGlsLkNhbGVuZGFyLmdldEluc3RhbmNlKCk7CiAg
ICAgICAgICAgICAgICBvdXRwdXQuc2V0VGltZUluTWlsbGlzKExvbmcucGFyc2VMb25nKGlucHV0
KSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAobmFtZWRQYXR0ZXJu
cy5jb250YWluc0tleShwYXR0ZXJuKSkgcGF0dGVybiA9IG5hbWVkUGF0dGVybnMuZ2V0KHBhdHRl
cm4pOwoKICAgICAgICAgICAgICAgIGphdmEudGV4dC5EYXRlRm9ybWF0IGZvcm1hdHRlciA9IG5l
dyBqYXZhLnRleHQuU2ltcGxlRGF0ZUZvcm1hdChwYXR0ZXJuKTsKICAgICAgICAgICAgICAgIGZv
cm1hdHRlci5zZXRMZW5pZW50KGZhbHNlKTsKICAgICAgICAgICAgICAgIG91dHB1dCA9IGphdmEu
dXRpbC5DYWxlbmRhci5nZXRJbnN0YW5jZSgpOwogICAgICAgICAgICAgICAgb3V0cHV0LnNldFRp
bWUoZm9ybWF0dGVyLnBhcnNlKGlucHV0KSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlm
ICh0aW1lem9uZSAhPSBudWxsKSBvdXRwdXQgPSB0dW5kcmEuc3VwcG9ydC50aW1lem9uZS5yZXBs
YWNlKG91dHB1dCwgdGltZXpvbmUpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkgewog
ICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJVbnBhcnNlYWJs
ZSBkYXRldGltZTogJyIgKyBpbnB1dCArICInIGRvZXMgbm90IGNvbmZvcm0gdG8gcGF0dGVybiAn
IiArIHBhdHRlcm4gKyAiJyIpOwogICAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gb3V0cHV0Owp9
CgovLyBwYXJzZXMgYSBkYXRldGltZSBzdHJpbmcgdGhhdCBhZGhlcmVzIHRvIHRoZSBnaXZlbiBw
YXR0ZXJuIGFuZCByZXR1cm5zIGEgamF2YS51dGlsLkRhdGUgb2JqZWN0CnB1YmxpYyBzdGF0aWMg
amF2YS51dGlsLkNhbGVuZGFyIHBhcnNlKFN0cmluZyBpbnB1dCwgU3RyaW5nW10gcGF0dGVybnMp
IHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gewogICAgcmV0dXJuIHBhcnNlKGlucHV0
LCBwYXR0ZXJucywgKFN0cmluZyludWxsKTsKfQoKLy8gcGFyc2VzIGEgZGF0ZXRpbWUgc3RyaW5n
IHRoYXQgYWRoZXJlcyB0byB0aGUgZ2l2ZW4gcGF0dGVybiBhbmQgcmV0dXJucyBhIGphdmEudXRp
bC5EYXRlIG9iamVjdApwdWJsaWMgc3RhdGljIGphdmEudXRpbC5DYWxlbmRhciBwYXJzZShTdHJp
bmcgaW5wdXQsIFN0cmluZ1tdIHBhdHRlcm5zLCBTdHJpbmcgdGltZXpvbmUpIHRocm93cyBJbGxl
Z2FsQXJndW1lbnRFeGNlcHRpb24gewogICAgamF2YS51dGlsLkNhbGVuZGFyIG91dHB1dCA9IG51
bGw7CgogICAgaWYgKHBhdHRlcm5zID09IG51bGwpIHBhdHRlcm5zID0gbmV3IFN0cmluZ1sxXTsK
CiAgICBqYXZhLnV0aWwuTGlzdDxUaHJvd2FibGU+IGV4Y2VwdGlvbnMgPSBuZXcgamF2YS51dGls
LkFycmF5TGlzdDxUaHJvd2FibGU+KCk7CgogICAgaWYgKGlucHV0ICE9IG51bGwpIHsKICAgICAg
ICBib29sZWFuIHBhcnNlZCA9IGZhbHNlOwogICAgICAgIGZvciAoU3RyaW5nIHBhdHRlcm4gOiBw
YXR0ZXJucykgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgb3V0cHV0ID0gcGFy
c2UoaW5wdXQsIHBhdHRlcm4sIHRpbWV6b25lKTsKICAgICAgICAgICAgICAgIHBhcnNlZCA9IHRy
dWU7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9u
IGV4KSB7CiAgICAgICAgICAgICAgICBleGNlcHRpb25zLmFkZChleCk7CiAgICAgICAgICAgIH0K
ICAgICAgICB9CiAgICAgICAgaWYgKCFwYXJzZWQpIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRF
eGNlcHRpb24oRXhjZXB0aW9uSGVscGVyLmdldE1lc3NhZ2UoZXhjZXB0aW9ucykpOwogICAgfQoK
ICAgIHJldHVybiBvdXRwdXQ7Cn0KCi8vIHBhcnNlcyBhIGxpc3Qgb2YgZGF0ZXRpbWUgc3RyaW5n
cyB0aGF0IGFkaGVyZXMgdG8gdGhlIGdpdmVuIHBhdHRlcm4gYW5kIHJldHVybnMgYSBqYXZhLnV0
aWwuRGF0ZSBvYmplY3QKcHVibGljIHN0YXRpYyBqYXZhLnV0aWwuQ2FsZW5kYXJbXSBwYXJzZShT
dHJpbmdbXSBpbnB1dHMsIFN0cmluZyBwYXR0ZXJuKSB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhj
ZXB0aW9uIHsKICAgIHJldHVybiBwYXJzZShpbnB1dHMsIHBhdHRlcm4sIChTdHJpbmcpbnVsbCk7
Cn0KCi8vIHBhcnNlcyBhIGxpc3Qgb2YgZGF0ZXRpbWUgc3RyaW5ncyB0aGF0IGFkaGVyZXMgdG8g
dGhlIGdpdmVuIHBhdHRlcm4gYW5kIHJldHVybnMgYSBqYXZhLnV0aWwuRGF0ZSBvYmplY3QKcHVi
bGljIHN0YXRpYyBqYXZhLnV0aWwuQ2FsZW5kYXJbXSBwYXJzZShTdHJpbmdbXSBpbnB1dHMsIFN0
cmluZyBwYXR0ZXJuLCBTdHJpbmcgdGltZXpvbmUpIHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNl
cHRpb24gewogICAgamF2YS51dGlsLkNhbGVuZGFyW10gb3V0cHV0cyA9IG51bGw7CiAgICBpZiAo
aW5wdXRzICE9IG51bGwpIHsKICAgICAgICBvdXRwdXRzID0gbmV3IGphdmEudXRpbC5DYWxlbmRh
cltpbnB1dHMubGVuZ3RoXTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGlucHV0cy5sZW5n
dGg7IGkrKykgewogICAgICAgICAgICBvdXRwdXRzW2ldID0gcGFyc2UoaW5wdXRzW2ldLCBwYXR0
ZXJuLCB0aW1lem9uZSk7CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuIG91dHB1dHM7Cn0KCi8v
IHBhcnNlcyBhIGxpc3Qgb2YgZGF0ZXRpbWUgc3RyaW5ncyB0aGF0IGFkaGVyZXMgdG8gdGhlIGdp
dmVuIHBhdHRlcm5zIGFuZCByZXR1cm5zIGEgamF2YS51dGlsLkRhdGUgb2JqZWN0CnB1YmxpYyBz
dGF0aWMgamF2YS51dGlsLkNhbGVuZGFyW10gcGFyc2UoU3RyaW5nW10gaW5wdXRzLCBTdHJpbmdb
XSBwYXR0ZXJucykgdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiB7CiAgICByZXR1cm4g
cGFyc2UoaW5wdXRzLCBwYXR0ZXJucywgKFN0cmluZyludWxsKTsKfQoKLy8gcGFyc2VzIGEgbGlz
dCBvZiBkYXRldGltZSBzdHJpbmdzIHRoYXQgYWRoZXJlcyB0byB0aGUgZ2l2ZW4gcGF0dGVybnMg
YW5kIHJldHVybnMgYSBqYXZhLnV0aWwuRGF0ZSBvYmplY3QKcHVibGljIHN0YXRpYyBqYXZhLnV0
aWwuQ2FsZW5kYXJbXSBwYXJzZShTdHJpbmdbXSBpbnB1dHMsIFN0cmluZ1tdIHBhdHRlcm5zLCBT
dHJpbmcgdGltZXpvbmUpIHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gewogICAgamF2
YS51dGlsLkNhbGVuZGFyW10gb3V0cHV0cyA9IG51bGw7CiAgICBpZiAoaW5wdXRzICE9IG51bGwp
IHsKICAgICAgICBvdXRwdXRzID0gbmV3IGphdmEudXRpbC5DYWxlbmRhcltpbnB1dHMubGVuZ3Ro
XTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGlucHV0cy5sZW5ndGg7IGkrKykgewogICAg
ICAgICAgICBvdXRwdXRzW2ldID0gcGFyc2UoaW5wdXRzW2ldLCBwYXR0ZXJucywgdGltZXpvbmUp
OwogICAgICAgIH0KICAgIH0KICAgIHJldHVybiBvdXRwdXRzOwp9CgovLyBzdWJ0cmFjdHMgdGhl
IGdpdmVuIHhtbCBkdXJhdGlvbiBmcm9tIHRoZSBnaXZlbiB4bWwgZGF0ZXRpbWUgcmV0dXJuaW5n
IHRoZSByZXN1bHQKcHVibGljIHN0YXRpYyBTdHJpbmcgc3VidHJhY3QoU3RyaW5nIGRhdGV0aW1l
LCBTdHJpbmcgZHVyYXRpb24pIHRocm93cyBTZXJ2aWNlRXhjZXB0aW9uIHsKICAgIHJldHVybiBz
dWJ0cmFjdChkYXRldGltZSwgbnVsbCwgZHVyYXRpb24pOwp9CgovLyBzdWJ0cmFjdHMgdGhlIGdp
dmVuIHhtbCBkdXJhdGlvbiBmcm9tIHRoZSBnaXZlbiB4bWwgZGF0ZXRpbWUgcmV0dXJuaW5nIHRo
ZSByZXN1bHQKcHVibGljIHN0YXRpYyBTdHJpbmcgc3VidHJhY3QoU3RyaW5nIGRhdGV0aW1lLCBT
dHJpbmcgZGF0ZXRpbWVQYXR0ZXJuLCBTdHJpbmcgZHVyYXRpb24pIHRocm93cyBTZXJ2aWNlRXhj
ZXB0aW9uIHsKICAgIHJldHVybiBzdWJ0cmFjdChkYXRldGltZSwgZGF0ZXRpbWVQYXR0ZXJuLCBk
dXJhdGlvbiwgbnVsbCk7Cn0KCi8vIHN1YnRyYWN0cyB0aGUgZ2l2ZW4geG1sIGR1cmF0aW9uIGZy
b20gdGhlIGdpdmVuIHhtbCBkYXRldGltZSByZXR1cm5pbmcgdGhlIHJlc3VsdApwdWJsaWMgc3Rh
dGljIFN0cmluZyBzdWJ0cmFjdChTdHJpbmcgZGF0ZXRpbWUsIFN0cmluZyBkYXRldGltZVBhdHRl
cm4sIFN0cmluZyBkdXJhdGlvbiwgU3RyaW5nIGR1cmF0aW9uUGF0dGVybikgdGhyb3dzIFNlcnZp
Y2VFeGNlcHRpb24gewogICAgcmV0dXJuIGVtaXQoc3VidHJhY3QocGFyc2UoZGF0ZXRpbWUsIGRh
dGV0aW1lUGF0dGVybiksIHR1bmRyYS5kdXJhdGlvbi5wYXJzZShkdXJhdGlvbiwgZHVyYXRpb25Q
YXR0ZXJuKSksIGRhdGV0aW1lUGF0dGVybik7Cn0KCi8vIHN1YnRyYWN0cyB0aGUgZ2l2ZW4gZHVy
YXRpb24gZnJvbSB0aGUgZ2l2ZW4gZGF0ZXRpbWUgcmV0dXJuaW5nIHRoZSByZXN1bHQKcHVibGlj
IHN0YXRpYyBqYXZhLnV0aWwuQ2FsZW5kYXIgc3VidHJhY3QoamF2YS51dGlsLkNhbGVuZGFyIGNh
bGVuZGFyLCBqYXZheC54bWwuZGF0YXR5cGUuRHVyYXRpb24gZHVyYXRpb24pIHRocm93cyBTZXJ2
aWNlRXhjZXB0aW9uIHsKICAgIGlmIChkdXJhdGlvbiAhPSBudWxsKSBkdXJhdGlvbiA9IGR1cmF0
aW9uLm5lZ2F0ZSgpOwogICAgcmV0dXJuIGFkZChjYWxlbmRhciwgZHVyYXRpb24pOwp9CgovLyBy
ZXR1cm5zIHRoZSBjdXJyZW50IGRhdGV0aW1lIG1pbnVzIHRoZSBnaXZlbiBYTUwgZHVyYXRpb24K
cHVibGljIHN0YXRpYyBTdHJpbmcgZWFybGllcihTdHJpbmcgZHVyYXRpb24pIHRocm93cyBTZXJ2
aWNlRXhjZXB0aW9uIHsKICAgIHJldHVybiBlYXJsaWVyKG51bGwsIGR1cmF0aW9uLCBudWxsKTsK
fQoKLy8gcmV0dXJucyB0aGUgY3VycmVudCBkYXRldGltZSBtaW51cyB0aGUgZ2l2ZW4gZHVyYXRp
b24KcHVibGljIHN0YXRpYyBTdHJpbmcgZWFybGllcihTdHJpbmcgZHVyYXRpb24sIFN0cmluZyBk
dXJhdGlvblBhdHRlcm4pIHRocm93cyBTZXJ2aWNlRXhjZXB0aW9uIHsKICAgIHJldHVybiBlYXJs
aWVyKG51bGwsIGR1cmF0aW9uLCBkdXJhdGlvblBhdHRlcm4pOwp9CgovLyByZXR1cm5zIHRoZSBj
dXJyZW50IGRhdGV0aW1lIG1pbnVzIHRoZSBnaXZlbiBkdXJhdGlvbgpwdWJsaWMgc3RhdGljIFN0
cmluZyBlYXJsaWVyKFN0cmluZyBkYXRldGltZVBhdHRlcm4sIFN0cmluZyBkdXJhdGlvbiwgU3Ry
aW5nIGR1cmF0aW9uUGF0dGVybikgdGhyb3dzIFNlcnZpY2VFeGNlcHRpb24gewogICAgcmV0dXJu
IGVhcmxpZXIoZGF0ZXRpbWVQYXR0ZXJuLCBkdXJhdGlvbiwgZHVyYXRpb25QYXR0ZXJuLCBudWxs
KTsKfQoKLy8gcmV0dXJucyB0aGUgY3VycmVudCBkYXRldGltZSBtaW51cyB0aGUgZ2l2ZW4gZHVy
YXRpb24KcHVibGljIHN0YXRpYyBTdHJpbmcgZWFybGllcihTdHJpbmcgZGF0ZXRpbWVQYXR0ZXJu
LCBTdHJpbmcgZHVyYXRpb24sIFN0cmluZyBkdXJhdGlvblBhdHRlcm4sIFN0cmluZyB0aW1lem9u
ZSkgdGhyb3dzIFNlcnZpY2VFeGNlcHRpb24gewogICAgcmV0dXJuIGVtaXQoZWFybGllcih0dW5k
cmEuZHVyYXRpb24ucGFyc2UoZHVyYXRpb24sIGR1cmF0aW9uUGF0dGVybikpLCBkYXRldGltZVBh
dHRlcm4sIHRpbWV6b25lKTsKfQoKLy8gcmV0dXJucyB0aGUgY3VycmVudCBkYXRldGltZSBtaW51
cyB0aGUgZ2l2ZW4gZHVyYXRpb24KcHVibGljIHN0YXRpYyBqYXZhLnV0aWwuQ2FsZW5kYXIgZWFy
bGllcihqYXZheC54bWwuZGF0YXR5cGUuRHVyYXRpb24gZHVyYXRpb24pIHRocm93cyBTZXJ2aWNl
RXhjZXB0aW9uIHsKICAgIHJldHVybiBzdWJ0cmFjdChqYXZhLnV0aWwuQ2FsZW5kYXIuZ2V0SW5z
dGFuY2UoKSwgZHVyYXRpb24pOwp9CgovLyByZXR1cm5zIHRoZSBjdXJyZW50IGRhdGV0aW1lIHBs
dXMgdGhlIGdpdmVuIFhNTCBkdXJhdGlvbgpwdWJsaWMgc3RhdGljIFN0cmluZyBsYXRlcihTdHJp
bmcgZHVyYXRpb24pIHRocm93cyBTZXJ2aWNlRXhjZXB0aW9uIHsKICAgIHJldHVybiBsYXRlcihu
dWxsLCBkdXJhdGlvbiwgbnVsbCk7Cn0KCi8vIHJldHVybnMgdGhlIGN1cnJlbnQgZGF0ZXRpbWUg
cGx1cyB0aGUgZ2l2ZW4gZHVyYXRpb24KcHVibGljIHN0YXRpYyBTdHJpbmcgbGF0ZXIoU3RyaW5n
IGR1cmF0aW9uLCBTdHJpbmcgZHVyYXRpb25QYXR0ZXJuKSB0aHJvd3MgU2VydmljZUV4Y2VwdGlv
biB7CiAgICByZXR1cm4gbGF0ZXIobnVsbCwgZHVyYXRpb24sIGR1cmF0aW9uUGF0dGVybik7Cn0K
Ci8vIHJldHVybnMgdGhlIGN1cnJlbnQgZGF0ZXRpbWUgcGx1cyB0aGUgZ2l2ZW4gZHVyYXRpb24K
cHVibGljIHN0YXRpYyBTdHJpbmcgbGF0ZXIoU3RyaW5nIGRhdGV0aW1lUGF0dGVybiwgU3RyaW5n
IGR1cmF0aW9uLCBTdHJpbmcgZHVyYXRpb25QYXR0ZXJuKSB0aHJvd3MgU2VydmljZUV4Y2VwdGlv
biB7CiAgICByZXR1cm4gbGF0ZXIoZGF0ZXRpbWVQYXR0ZXJuLCBkdXJhdGlvbiwgZHVyYXRpb25Q
YXR0ZXJuLCBudWxsKTsKfQoKLy8gcmV0dXJucyB0aGUgY3VycmVudCBkYXRldGltZSBwbHVzIHRo
ZSBnaXZlbiBkdXJhdGlvbgpwdWJsaWMgc3RhdGljIFN0cmluZyBsYXRlcihTdHJpbmcgZGF0ZXRp
bWVQYXR0ZXJuLCBTdHJpbmcgZHVyYXRpb24sIFN0cmluZyBkdXJhdGlvblBhdHRlcm4sIFN0cmlu
ZyB0aW1lem9uZSkgdGhyb3dzIFNlcnZpY2VFeGNlcHRpb24gewogICAgcmV0dXJuIGVtaXQobGF0
ZXIodHVuZHJhLmR1cmF0aW9uLnBhcnNlKGR1cmF0aW9uLCBkdXJhdGlvblBhdHRlcm4pKSwgZGF0
ZXRpbWVQYXR0ZXJuLCB0aW1lem9uZSk7Cn0KCi8vIHJldHVybnMgdGhlIGN1cnJlbnQgZGF0ZXRp
bWUgcGx1cyB0aGUgZ2l2ZW4gZHVyYXRpb24KcHVibGljIHN0YXRpYyBqYXZhLnV0aWwuQ2FsZW5k
YXIgbGF0ZXIoamF2YXgueG1sLmRhdGF0eXBlLkR1cmF0aW9uIGR1cmF0aW9uKSB0aHJvd3MgU2Vy
dmljZUV4Y2VwdGlvbiB7CiAgICByZXR1cm4gYWRkKGphdmEudXRpbC5DYWxlbmRhci5nZXRJbnN0
YW5jZSgpLCBkdXJhdGlvbik7Cn0KCi8vIHJldHVybnMgdGhlIGxhcmdlc3QgZGF0ZXRpbWUgZnJv
bSB0aGUgZ2l2ZW4gbGlzdCBvZiBkYXRldGltZSBzdHJpbmdzCnB1YmxpYyBzdGF0aWMgU3RyaW5n
IG1heGltdW0oU3RyaW5nW10gZGF0ZXRpbWVzLCBTdHJpbmcgcGF0dGVybikgewogICAgaWYgKGRh
dGV0aW1lcyA9PSBudWxsIHx8IGRhdGV0aW1lcy5sZW5ndGggPT0gMCkgcmV0dXJuIG51bGw7Cgog
ICAgamF2YS51dGlsLkNhbGVuZGFyW10gY2FsZW5kYXJzID0gcGFyc2UoZGF0ZXRpbWVzLCBwYXR0
ZXJuKTsKICAgIGphdmEudXRpbC5Tb3J0ZWRTZXQ8amF2YS51dGlsLkNhbGVuZGFyPiBzZXQgPSBu
ZXcgamF2YS51dGlsLlRyZWVTZXQ8amF2YS51dGlsLkNhbGVuZGFyPihqYXZhLnV0aWwuQXJyYXlz
LmFzTGlzdChjYWxlbmRhcnMpKTsKICAgIHJldHVybiBlbWl0KHNldC5sYXN0KCksIHBhdHRlcm4p
Owp9CgovLyByZXR1cm5zIHRoZSBzbWFsbGVzdCBkYXRldGltZSBmcm9tIHRoZSBnaXZlbiBsaXN0
IG9mIGRhdGV0aW1lIHN0cmluZ3MKcHVibGljIHN0YXRpYyBTdHJpbmcgbWluaW11bShTdHJpbmdb
XSBkYXRldGltZXMsIFN0cmluZyBwYXR0ZXJuKSB7CiAgICBpZiAoZGF0ZXRpbWVzID09IG51bGwg
fHwgZGF0ZXRpbWVzLmxlbmd0aCA9PSAwKSByZXR1cm4gbnVsbDsKCiAgICBqYXZhLnV0aWwuQ2Fs
ZW5kYXJbXSBjYWxlbmRhcnMgPSBwYXJzZShkYXRldGltZXMsIHBhdHRlcm4pOwogICAgamF2YS51
dGlsLlNvcnRlZFNldDxqYXZhLnV0aWwuQ2FsZW5kYXI+IHNldCA9IG5ldyBqYXZhLnV0aWwuVHJl
ZVNldDxqYXZhLnV0aWwuQ2FsZW5kYXI+KGphdmEudXRpbC5BcnJheXMuYXNMaXN0KGNhbGVuZGFy
cykpOwogICAgcmV0dXJuIGVtaXQoc2V0LmZpcnN0KCksIHBhdHRlcm4pOwp9</value>
  <value name="encodeutf8">true</value>
  <value name="extends"></value>
  <array name="implements" type="value" depth="1">
  </array>
  <array name="imports" type="value" depth="1">
    <value>permafrost.tundra.lang.BooleanHelper</value>
    <value>permafrost.tundra.lang.ExceptionHelper</value>
    <value>permafrost.tundra.time.DateTimeHelper</value>
  </array>
</Values>
