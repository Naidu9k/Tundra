<?xml version="1.0" encoding="UTF-8"?>

<Values version="2.0">
  <value name="node_type">interface</value>
  <value name="node_nsName">tundra.datetime</value>
  <value name="shared">cHJvdGVjdGVkIHN0YXRpYyBmaW5hbCBTdHJpbmcgREVGQVVMVF9EQVRFVElNRV9QQVRURVJOID0g
ImRhdGV0aW1lIjsKCnByb3RlY3RlZCBzdGF0aWMgZmluYWwgamF2YS51dGlsLk1hcDxTdHJpbmcs
IFN0cmluZz4gbmFtZWRQYXR0ZXJucyA9IGNvbnN0cnVjdE5hbWVkUGF0dGVybnMoKTsKCnByb3Rl
Y3RlZCBzdGF0aWMgZmluYWwgamF2YS51dGlsLk1hcDxTdHJpbmcsIFN0cmluZz4gY29uc3RydWN0
TmFtZWRQYXR0ZXJucygpIHsKICAgIGphdmEudXRpbC5NYXA8U3RyaW5nLCBTdHJpbmc+IG1hcCA9
IG5ldyBqYXZhLnV0aWwuVHJlZU1hcDxTdHJpbmcsIFN0cmluZz4oKTsKCiAgICBtYXAucHV0KCJk
YXRldGltZS5qZGJjIiwgInl5eXktTU0tZGQgSEg6bW06c3MuU1NTIik7CiAgICBtYXAucHV0KCJk
YXRlIiwgInl5eXktTU0tZGQiKTsKICAgIG1hcC5wdXQoImRhdGUuamRiYyIsICJ5eXl5LU1NLWRk
Iik7CiAgICBtYXAucHV0KCJkYXRlLnhtbCIsICJ5eXl5LU1NLWRkIik7CiAgICBtYXAucHV0KCJ0
aW1lIiwgIkhIOm1tOnNzLlNTUyIpOwogICAgbWFwLnB1dCgidGltZS5qZGJjIiwgIkhIOm1tOnNz
Iik7CiAgICBtYXAucHV0KCJ0aW1lLnhtbCIsICJISDptbTpzcy5TU1MiKTsKCiAgICByZXR1cm4g
bWFwOwp9CgovLyBhZGRzIHRoZSBnaXZlbiB4bWwgZHVyYXRpb24gdG8gdGhlIGdpdmVuIHhtbCBk
YXRldGltZSByZXR1cm5pbmcgdGhlIHJlc3VsdApwdWJsaWMgc3RhdGljIFN0cmluZyBhZGQoU3Ry
aW5nIGRhdGV0aW1lLCBTdHJpbmcgZHVyYXRpb24pIHRocm93cyBTZXJ2aWNlRXhjZXB0aW9uIHsK
ICAgIHJldHVybiBhZGQoZGF0ZXRpbWUsIG51bGwsIGR1cmF0aW9uKTsKfQoKLy8gYWRkcyB0aGUg
Z2l2ZW4geG1sIGR1cmF0aW9uIHRvIHRoZSBnaXZlbiB4bWwgZGF0ZXRpbWUgcmV0dXJuaW5nIHRo
ZSByZXN1bHQKcHVibGljIHN0YXRpYyBTdHJpbmcgYWRkKFN0cmluZyBkYXRldGltZSwgU3RyaW5n
IHBhdHRlcm4sIFN0cmluZyBkdXJhdGlvbikgdGhyb3dzIFNlcnZpY2VFeGNlcHRpb24gewogICAg
cmV0dXJuIGFkZChkYXRldGltZSwgcGF0dGVybiwgZHVyYXRpb24sIG51bGwpOwp9CgovLyBhZGRz
IHRoZSBnaXZlbiB4bWwgZHVyYXRpb24gdG8gdGhlIGdpdmVuIHhtbCBkYXRldGltZSByZXR1cm5p
bmcgdGhlIHJlc3VsdApwdWJsaWMgc3RhdGljIFN0cmluZyBhZGQoU3RyaW5nIGRhdGV0aW1lLCBT
dHJpbmcgZGF0ZXRpbWVQYXR0ZXJuLCBTdHJpbmcgZHVyYXRpb24sIFN0cmluZyBkdXJhdGlvblBh
dHRlcm4pIHRocm93cyBTZXJ2aWNlRXhjZXB0aW9uIHsKICAgIHJldHVybiBlbWl0KGFkZChwYXJz
ZShkYXRldGltZSwgZGF0ZXRpbWVQYXR0ZXJuKSwgdHVuZHJhLmR1cmF0aW9uLnBhcnNlKGR1cmF0
aW9uLCBkdXJhdGlvblBhdHRlcm4pKSwgZGF0ZXRpbWVQYXR0ZXJuKTsKfQoKLy8gYWRkcyB0aGUg
Z2l2ZW4geG1sIGR1cmF0aW9uIHRvIHRoZSBnaXZlbiB4bWwgZGF0ZXRpbWUgcmV0dXJuaW5nIHRo
ZSByZXN1bHQKcHVibGljIHN0YXRpYyBqYXZhLnV0aWwuQ2FsZW5kYXIgYWRkKGphdmEudXRpbC5D
YWxlbmRhciBjYWxlbmRhciwgamF2YXgueG1sLmRhdGF0eXBlLkR1cmF0aW9uIGR1cmF0aW9uKSB0
aHJvd3MgU2VydmljZUV4Y2VwdGlvbiB7CiAgICBpZiAoY2FsZW5kYXIgPT0gbnVsbCB8fCBkdXJh
dGlvbiA9PSBudWxsKSByZXR1cm4gY2FsZW5kYXI7CgogICAgdHJ5IHsKICAgICAgICBqYXZhLnV0
aWwuR3JlZ29yaWFuQ2FsZW5kYXIgZ2NhbCA9IG5ldyBqYXZhLnV0aWwuR3JlZ29yaWFuQ2FsZW5k
YXIoKTsKICAgICAgICBnY2FsLnNldFRpbWUoY2FsZW5kYXIuZ2V0VGltZSgpKTsKICAgICAgICBn
Y2FsLnNldFRpbWVab25lKGNhbGVuZGFyLmdldFRpbWVab25lKCkpOwogICAgICAgIGphdmF4Lnht
bC5kYXRhdHlwZS5YTUxHcmVnb3JpYW5DYWxlbmRhciB4Y2FsID0gamF2YXgueG1sLmRhdGF0eXBl
LkRhdGF0eXBlRmFjdG9yeS5uZXdJbnN0YW5jZSgpLm5ld1hNTEdyZWdvcmlhbkNhbGVuZGFyKGdj
YWwpOwogICAgICAgIHhjYWwuYWRkKGR1cmF0aW9uKTsKCiAgICAgICAgY2FsZW5kYXIgPSB4Y2Fs
LnRvR3JlZ29yaWFuQ2FsZW5kYXIoKTsKICAgIH0gY2F0Y2ggKGphdmF4LnhtbC5kYXRhdHlwZS5E
YXRhdHlwZUNvbmZpZ3VyYXRpb25FeGNlcHRpb24gZXgpIHsKICAgICAgICB0dW5kcmEuZXhjZXB0
aW9uLnJhaXNlKGV4KTsKICAgIH0KCiAgICByZXR1cm4gY2FsZW5kYXI7Cn0KCi8vIGNvbXBhcmVz
IHR3byB4bWwgZGF0ZXRpbWUgc3RyaW5ncwpwdWJsaWMgc3RhdGljIGludCBjb21wYXJlKFN0cmlu
ZyBkeCwgU3RyaW5nIGR5KSB7CiAgICByZXR1cm4gY29tcGFyZShkeCwgZHksIG51bGwpOwp9Cgov
LyBjb21wYXJlcyB0d28geG1sIGRhdGV0aW1lIHN0cmluZ3MKcHVibGljIHN0YXRpYyBpbnQgY29t
cGFyZShTdHJpbmcgZHgsIFN0cmluZyBkeSwgU3RyaW5nIHBhdHRlcm4pIHsKICAgIHJldHVybiBj
b21wYXJlKHBhcnNlKGR4LCBwYXR0ZXJuKSwgcGFyc2UoZHksIHBhdHRlcm4pKTsKfQoKCi8vIGNv
bXBhcmVzIHR3byBkYXRldGltZXMKcHVibGljIHN0YXRpYyBpbnQgY29tcGFyZShqYXZhLnV0aWwu
Q2FsZW5kYXIgY3gsIGphdmEudXRpbC5DYWxlbmRhciBjeSkgewogICAgaWYgKGN4ID09IG51bGwg
JiYgY3kgPT0gbnVsbCkgcmV0dXJuIDA7CiAgICBpZiAoY3ggPT0gbnVsbCAmJiBjeSAhPSBudWxs
KSByZXR1cm4gLTE7CiAgICBpZiAoY3ggIT0gbnVsbCAmJiBjeSA9PSBudWxsKSByZXR1cm4gMTsK
CiAgICByZXR1cm4gY3guY29tcGFyZVRvKGN5KTsKfQoKLy8gY29uY2F0ZW5hdGVzIGEgeG1sIGRh
dGUgYW5kIHhtbCB0aW1lIHRvZ2V0aGVyIHRvIGZvcm0gYW4geG1sIGRhdGV0aW1lCnB1YmxpYyBz
dGF0aWMgU3RyaW5nIGNvbmNhdGVuYXRlKFN0cmluZyBkYXRlLCBTdHJpbmcgdGltZSkgewogICAg
cmV0dXJuIGVtaXQoY29uY2F0ZW5hdGUocGFyc2UoZGF0ZSwgImRhdGUiKSwgcGFyc2UodGltZSwg
InRpbWUiKSkpOwp9CgovLyBhZGRzIHR3byBkYXRlcyB0b2dldGhlcgpwdWJsaWMgc3RhdGljIGph
dmEudXRpbC5DYWxlbmRhciBjb25jYXRlbmF0ZShqYXZhLnV0aWwuQ2FsZW5kYXIgZGF0ZSwgamF2
YS51dGlsLkNhbGVuZGFyIHRpbWUpIHsKICAgIGphdmEudXRpbC5DYWxlbmRhciBsb2NhbERhdGVU
aW1lID0gbmV3IGphdmEudXRpbC5HcmVnb3JpYW5DYWxlbmRhcigpOwogICAgbG9jYWxEYXRlVGlt
ZS5zZXRUaW1lSW5NaWxsaXMoZGF0ZS5nZXRUaW1lSW5NaWxsaXMoKSArIHRpbWUuZ2V0VGltZUlu
TWlsbGlzKCkpOwoKICAgIHJldHVybiBsb2NhbERhdGVUaW1lOwp9CgovLyByZXR1cm5zIHRoZSB4
bWwgZHVyYXRpb24gYmV0d2VlbiB0d28gZ2l2ZW4geG1sIGRhdGV0aW1lcwpwdWJsaWMgc3RhdGlj
IFN0cmluZyBkdXJhdGlvbihTdHJpbmcgc3RhcnQsIFN0cmluZyBlbmQpIHsKICAgIHJldHVybiBk
dXJhdGlvbihzdGFydCwgZW5kLCBudWxsKTsKfQoKLy8gcmV0dXJucyB0aGUgeG1sIGR1cmF0aW9u
IGJldHdlZW4gdHdvIGdpdmVuIHhtbCBkYXRldGltZXMKcHVibGljIHN0YXRpYyBTdHJpbmcgZHVy
YXRpb24oU3RyaW5nIHN0YXJ0LCBTdHJpbmcgZW5kLCBTdHJpbmcgZGF0ZXRpbWVQYXR0ZXJuKSB7
CiAgICByZXR1cm4gZHVyYXRpb24oc3RhcnQsIGVuZCwgZGF0ZXRpbWVQYXR0ZXJuLCBudWxsKTsK
fQoKLy8gcmV0dXJucyB0aGUgeG1sIGR1cmF0aW9uIGJldHdlZW4gdHdvIGdpdmVuIHhtbCBkYXRl
dGltZXMKcHVibGljIHN0YXRpYyBTdHJpbmcgZHVyYXRpb24oU3RyaW5nIHN0YXJ0LCBTdHJpbmcg
ZW5kLCBTdHJpbmcgZGF0ZXRpbWVQYXR0ZXJuLCBTdHJpbmcgZHVyYXRpb25QYXR0ZXJuKSB7CiAg
ICByZXR1cm4gdHVuZHJhLmR1cmF0aW9uLmVtaXQoZHVyYXRpb24ocGFyc2Uoc3RhcnQsIGRhdGV0
aW1lUGF0dGVybiksIHBhcnNlKGVuZCwgZGF0ZXRpbWVQYXR0ZXJuKSksIGR1cmF0aW9uUGF0dGVy
bik7Cn0KCi8vIHJldHVybnMgdGhlIHhtbCBkdXJhdGlvbiBiZXR3ZWVuIHR3byBnaXZlbiB4bWwg
ZGF0ZXRpbWVzCnB1YmxpYyBzdGF0aWMgamF2YXgueG1sLmRhdGF0eXBlLkR1cmF0aW9uIGR1cmF0
aW9uKGphdmEudXRpbC5DYWxlbmRhciBzdGFydCwgamF2YS51dGlsLkNhbGVuZGFyIGVuZCkgewog
ICAgaWYgKHN0YXJ0ID09IG51bGwgfHwgZW5kID09IG51bGwpIHJldHVybiBudWxsOwogICAgcmV0
dXJuIHR1bmRyYS5kdXJhdGlvbi5wYXJzZSgiIiArIChlbmQuZ2V0VGltZUluTWlsbGlzKCkgLSBz
dGFydC5nZXRUaW1lSW5NaWxsaXMoKSksICJtaWxsaXNlY29uZHMiKTsKfQoKLy8gcmV0dXJucyB0
aGUgZ2l2ZW4gZGF0ZXRpbWUgYXMgYW4geG1sIGRhdGV0aW1lIHN0cmluZwpwdWJsaWMgc3RhdGlj
IFN0cmluZyBlbWl0KGphdmEudXRpbC5EYXRlIGlucHV0KSB7CiAgICByZXR1cm4gZW1pdChpbnB1
dCwgbnVsbCk7Cn0KCi8vIHJldHVybnMgdGhlIGdpdmVuIGRhdGV0aW1lIGFzIGEgc3RyaW5nIGFk
aGVyaW5nIHRvIHRoZSBnaXZlbiBwYXR0ZXJuCnB1YmxpYyBzdGF0aWMgU3RyaW5nIGVtaXQoamF2
YS51dGlsLkRhdGUgaW5wdXQsIFN0cmluZyBwYXR0ZXJuKSB7CiAgICByZXR1cm4gZW1pdChpbnB1
dCwgcGF0dGVybiwgbnVsbCk7Cn0KCi8vIHJldHVybnMgdGhlIGdpdmVuIGRhdGV0aW1lIGFzIGEg
c3RyaW5nIGFkaGVyaW5nIHRvIHRoZSBnaXZlbiBwYXR0ZXJuCnB1YmxpYyBzdGF0aWMgU3RyaW5n
IGVtaXQoamF2YS51dGlsLkRhdGUgaW5wdXQsIFN0cmluZyBwYXR0ZXJuLCBTdHJpbmcgdGltZXpv
bmUpIHsKICAgIGlmIChpbnB1dCA9PSBudWxsKSByZXR1cm4gbnVsbDsKCiAgICBqYXZhLnV0aWwu
Q2FsZW5kYXIgY2FsZW5kYXIgPSBqYXZhLnV0aWwuQ2FsZW5kYXIuZ2V0SW5zdGFuY2UoKTsKICAg
IGNhbGVuZGFyLnNldFRpbWUoaW5wdXQpOwoKICAgIHJldHVybiBlbWl0KGNhbGVuZGFyLCBwYXR0
ZXJuLCB0aW1lem9uZSk7Cn0KCi8vIHJldHVybnMgdGhlIGdpdmVuIGRhdGV0aW1lIGFzIGFuIHht
bCBkYXRldGltZSBzdHJpbmcKcHVibGljIHN0YXRpYyBTdHJpbmcgZW1pdChqYXZhLnV0aWwuQ2Fs
ZW5kYXIgaW5wdXQpIHsKICAgIHJldHVybiBlbWl0KGlucHV0LCBudWxsKTsKfQoKLy8gcmV0dXJu
cyB0aGUgZ2l2ZW4gZGF0ZXRpbWUgZm9ybWF0dGVkIGFzIGEgc3RyaW5nIGFkaGVyaW5nIHRvIHRo
ZSBnaXZlbiBwYXR0ZXJuCnB1YmxpYyBzdGF0aWMgU3RyaW5nIGVtaXQoamF2YS51dGlsLkNhbGVu
ZGFyIGlucHV0LCBTdHJpbmcgcGF0dGVybikgewogICAgcmV0dXJuIGVtaXQoaW5wdXQsIHBhdHRl
cm4sIG51bGwpOwp9CgovLyByZXR1cm5zIHRoZSBnaXZlbiBkYXRldGltZSBmb3JtYXR0ZWQgYXMg
YSBzdHJpbmcgYWRoZXJpbmcgdG8gdGhlIGdpdmVuIHBhdHRlcm4KcHVibGljIHN0YXRpYyBTdHJp
bmcgZW1pdChqYXZhLnV0aWwuQ2FsZW5kYXIgaW5wdXQsIFN0cmluZyBwYXR0ZXJuLCBTdHJpbmcg
dGltZXpvbmUpIHsKICAgIGlmIChwYXR0ZXJuID09IG51bGwpIHBhdHRlcm4gPSBERUZBVUxUX0RB
VEVUSU1FX1BBVFRFUk47CiAgICBTdHJpbmcgb3V0cHV0ID0gbnVsbDsKCiAgICBpZiAoaW5wdXQg
IT0gbnVsbCkgewogICAgICAgIGlmICh0aW1lem9uZSAhPSBudWxsKSBpbnB1dCA9IHR1bmRyYS5z
dXBwb3J0LnRpbWV6b25lLmNvbnZlcnQoaW5wdXQsIHRpbWV6b25lKTsKCiAgICAgICAgaWYgKHBh
dHRlcm4uZXF1YWxzKCJkYXRldGltZSIpIHx8IHBhdHRlcm4uZXF1YWxzKCJkYXRldGltZS54bWwi
KSkgewogICAgICAgICAgICBvdXRwdXQgPSBqYXZheC54bWwuYmluZC5EYXRhdHlwZUNvbnZlcnRl
ci5wcmludERhdGVUaW1lKGlucHV0KTsKICAgICAgICB9IGVsc2UgaWYgKHBhdHRlcm4uZXF1YWxz
KCJtaWxsaXNlY29uZHMiKSkgewogICAgICAgICAgICBvdXRwdXQgPSAiIiArIGlucHV0LmdldFRp
bWVJbk1pbGxpcygpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmIChuYW1lZFBhdHRl
cm5zLmNvbnRhaW5zS2V5KHBhdHRlcm4pKSBwYXR0ZXJuID0gbmFtZWRQYXR0ZXJucy5nZXQocGF0
dGVybik7CiAgICAgICAgICAgIGphdmEudGV4dC5EYXRlRm9ybWF0IGZvcm1hdHRlciA9IG5ldyBq
YXZhLnRleHQuU2ltcGxlRGF0ZUZvcm1hdChwYXR0ZXJuKTsKICAgICAgICAgICAgZm9ybWF0dGVy
LnNldFRpbWVab25lKGlucHV0LmdldFRpbWVab25lKCkpOwogICAgICAgICAgICBmb3JtYXR0ZXIu
c2V0TGVuaWVudChmYWxzZSk7CiAgICAgICAgICAgIG91dHB1dCA9IGZvcm1hdHRlci5mb3JtYXQo
aW5wdXQuZ2V0VGltZSgpKTsKICAgICAgICB9CiAgICB9CgogICAgcmV0dXJuIG91dHB1dDsKfQoK
Ly8gcmV0dXJucyB0aGUgZ2l2ZW4gZGF0ZXRpbWUgZm9ybWF0dGVkIGFzIGEgc3RyaW5nIGFkaGVy
aW5nIHRvIHRoZSBnaXZlbiBwYXR0ZXJuCnB1YmxpYyBzdGF0aWMgU3RyaW5nW10gZW1pdChqYXZh
LnV0aWwuQ2FsZW5kYXJbXSBpbnB1dHMsIFN0cmluZyBwYXR0ZXJuKSB7CiAgICByZXR1cm4gZW1p
dChpbnB1dHMsIHBhdHRlcm4sIG51bGwpOwp9CgovLyByZXR1cm5zIHRoZSBnaXZlbiBkYXRldGlt
ZSBmb3JtYXR0ZWQgYXMgYSBzdHJpbmcgYWRoZXJpbmcgdG8gdGhlIGdpdmVuIHBhdHRlcm4KcHVi
bGljIHN0YXRpYyBTdHJpbmdbXSBlbWl0KGphdmEudXRpbC5DYWxlbmRhcltdIGlucHV0cywgU3Ry
aW5nIHBhdHRlcm4sIFN0cmluZyB0aW1lem9uZSkgewogICAgU3RyaW5nW10gb3V0cHV0cyA9IG51
bGw7CiAgICBpZiAoaW5wdXRzICE9IG51bGwpIHsKICAgICAgICBvdXRwdXRzID0gbmV3IFN0cmlu
Z1tpbnB1dHMubGVuZ3RoXTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGlucHV0cy5sZW5n
dGg7IGkrKykgewogICAgICAgICAgICBvdXRwdXRzW2ldID0gZW1pdChpbnB1dHNbaV0sIHBhdHRl
cm4sIHRpbWV6b25lKTsKICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gb3V0cHV0czsKfQoKLy8g
cmVmb3JtYXRzIGEgZGF0ZXRpbWUgc3RyaW5nIGFjY29yZGluZyB0byB0aGUgZ2l2ZW4gcGF0dGVy
bnMKcHVibGljIHN0YXRpYyBTdHJpbmcgZm9ybWF0KFN0cmluZyBpbnB1dCwgU3RyaW5nIGluUGF0
dGVybiwgU3RyaW5nIG91dFBhdHRlcm4pIHsKICAgIHJldHVybiBmb3JtYXQoaW5wdXQsIGluUGF0
dGVybiwgbnVsbCwgb3V0UGF0dGVybiwgbnVsbCk7Cn0KCi8vIHJlZm9ybWF0cyBhIGRhdGV0aW1l
IHN0cmluZyBhY2NvcmRpbmcgdG8gdGhlIGdpdmVuIHBhdHRlcm5zCnB1YmxpYyBzdGF0aWMgU3Ry
aW5nIGZvcm1hdChTdHJpbmcgaW5wdXQsIFN0cmluZyBpblBhdHRlcm4sIFN0cmluZyBpblRpbWVa
b25lLCBTdHJpbmcgb3V0UGF0dGVybiwgU3RyaW5nIG91dFRpbWVab25lKSB7CiAgICByZXR1cm4g
ZW1pdChwYXJzZShpbnB1dCwgaW5QYXR0ZXJuLCBpblRpbWVab25lKSwgb3V0UGF0dGVybiwgb3V0
VGltZVpvbmUpOwp9CgovLyByZWZvcm1hdHMgYSBkYXRldGltZSBzdHJpbmcgYWNjb3JkaW5nIHRv
IHRoZSBnaXZlbiBwYXR0ZXJucwpwdWJsaWMgc3RhdGljIFN0cmluZyBmb3JtYXQoU3RyaW5nIGlu
cHV0LCBTdHJpbmdbXSBpblBhdHRlcm5zLCBTdHJpbmcgb3V0UGF0dGVybikgewogICAgcmV0dXJu
IGZvcm1hdChpbnB1dCwgaW5QYXR0ZXJucywgbnVsbCwgb3V0UGF0dGVybiwgbnVsbCk7Cn0KCi8v
IHJlZm9ybWF0cyBhIGRhdGV0aW1lIHN0cmluZyBhY2NvcmRpbmcgdG8gdGhlIGdpdmVuIHBhdHRl
cm5zCnB1YmxpYyBzdGF0aWMgU3RyaW5nIGZvcm1hdChTdHJpbmcgaW5wdXQsIFN0cmluZ1tdIGlu
UGF0dGVybnMsIFN0cmluZyBpblRpbWVab25lLCBTdHJpbmcgb3V0UGF0dGVybiwgU3RyaW5nIG91
dFRpbWVab25lKSB7CiAgICByZXR1cm4gZW1pdChwYXJzZShpbnB1dCwgaW5QYXR0ZXJucywgaW5U
aW1lWm9uZSksIG91dFBhdHRlcm4sIG91dFRpbWVab25lKTsKfQoKLy8gcmVmb3JtYXRzIGEgbGlz
dCBkYXRldGltZSBzdHJpbmdzIGFjY29yZGluZyB0byB0aGUgZ2l2ZW4gcGF0dGVybnMKcHVibGlj
IHN0YXRpYyBTdHJpbmdbXSBmb3JtYXQoU3RyaW5nW10gaW5wdXRzLCBTdHJpbmcgaW5QYXR0ZXJu
LCBTdHJpbmcgb3V0UGF0dGVybikgewogICAgcmV0dXJuIGZvcm1hdChpbnB1dHMsIGluUGF0dGVy
biwgbnVsbCwgb3V0UGF0dGVybiwgbnVsbCk7Cn0KCi8vIHJlZm9ybWF0cyBhIGxpc3QgZGF0ZXRp
bWUgc3RyaW5ncyBhY2NvcmRpbmcgdG8gdGhlIGdpdmVuIHBhdHRlcm5zCnB1YmxpYyBzdGF0aWMg
U3RyaW5nW10gZm9ybWF0KFN0cmluZ1tdIGlucHV0cywgU3RyaW5nIGluUGF0dGVybiwgU3RyaW5n
IGluVGltZVpvbmUsIFN0cmluZyBvdXRQYXR0ZXJuLCBTdHJpbmcgb3V0VGltZVpvbmUpIHsKICAg
IFN0cmluZ1tdIG91dHB1dHMgPSBudWxsOwogICAgaWYgKGlucHV0cyAhPSBudWxsKSB7CiAgICAg
ICAgb3V0cHV0cyA9IG5ldyBTdHJpbmdbaW5wdXRzLmxlbmd0aF07CiAgICAgICAgZm9yIChpbnQg
aSA9IDA7IGkgPCBpbnB1dHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgb3V0cHV0c1tpXSA9
IHR1bmRyYS5kYXRldGltZS5mb3JtYXQoaW5wdXRzW2ldLCBpblBhdHRlcm4sIGluVGltZVpvbmUs
IG91dFBhdHRlcm4sIG91dFRpbWVab25lKTsKICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gb3V0
cHV0czsKfQoKLy8gcmVmb3JtYXRzIGEgbGlzdCBkYXRldGltZSBzdHJpbmdzIGFjY29yZGluZyB0
byB0aGUgZ2l2ZW4gcGF0dGVybnMKcHVibGljIHN0YXRpYyBTdHJpbmdbXSBmb3JtYXQoU3RyaW5n
W10gaW5wdXRzLCBTdHJpbmdbXSBpblBhdHRlcm5zLCBTdHJpbmcgb3V0UGF0dGVybikgewogICAg
cmV0dXJuIGZvcm1hdChpbnB1dHMsIGluUGF0dGVybnMsIG51bGwsIG91dFBhdHRlcm4sIG51bGwp
Owp9CgovLyByZWZvcm1hdHMgYSBsaXN0IGRhdGV0aW1lIHN0cmluZ3MgYWNjb3JkaW5nIHRvIHRo
ZSBnaXZlbiBwYXR0ZXJucwpwdWJsaWMgc3RhdGljIFN0cmluZ1tdIGZvcm1hdChTdHJpbmdbXSBp
bnB1dHMsIFN0cmluZ1tdIGluUGF0dGVybnMsIFN0cmluZyBpblRpbWVab25lLCBTdHJpbmcgb3V0
UGF0dGVybiwgU3RyaW5nIG91dFRpbWVab25lKSB7CiAgICBTdHJpbmdbXSBvdXRwdXRzID0gbnVs
bDsKICAgIGlmIChpbnB1dHMgIT0gbnVsbCkgewogICAgICAgIG91dHB1dHMgPSBuZXcgU3RyaW5n
W2lucHV0cy5sZW5ndGhdOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgaW5wdXRzLmxlbmd0
aDsgaSsrKSB7CiAgICAgICAgICAgIG91dHB1dHNbaV0gPSB0dW5kcmEuZGF0ZXRpbWUuZm9ybWF0
KGlucHV0c1tpXSwgaW5QYXR0ZXJucywgaW5UaW1lWm9uZSwgb3V0UGF0dGVybiwgb3V0VGltZVpv
bmUpOwogICAgICAgIH0KICAgIH0KICAgIHJldHVybiBvdXRwdXRzOwp9CgovLyByZXR1cm5zIHRo
ZSBjdXJyZW50IGRhdGV0aW1lIGFzIGFuIHhtbCBkYXRldGltZSBzdHJpbmcKcHVibGljIHN0YXRp
YyBTdHJpbmcgbm93KCkgewogICAgcmV0dXJuIG5vdygiZGF0ZXRpbWUiKTsKfQoKLy8gcmV0dXJu
cyB0aGUgY3VycmVudCBkYXRldGltZSBhcyBhbiBkYXRldGltZSBzdHJpbmcgZm9ybWF0dGVkIGFj
Y29yZGluZyB0byB0aGUgZ2l2ZW4gcGF0dGVybgpwdWJsaWMgc3RhdGljIFN0cmluZyBub3coU3Ry
aW5nIHBhdHRlcm4pIHsKICAgIHJldHVybiBub3cocGF0dGVybiwgbnVsbCk7Cn0KCi8vIHJldHVy
bnMgdGhlIGN1cnJlbnQgZGF0ZXRpbWUgYXMgYW4gZGF0ZXRpbWUgc3RyaW5nIGZvcm1hdHRlZCBh
Y2NvcmRpbmcgdG8gdGhlIGdpdmVuIHBhdHRlcm4KcHVibGljIHN0YXRpYyBTdHJpbmcgbm93KFN0
cmluZyBwYXR0ZXJuLCBTdHJpbmcgdGltZXpvbmUpIHsKICAgIHJldHVybiBlbWl0KGphdmEudXRp
bC5DYWxlbmRhci5nZXRJbnN0YW5jZSgpLCBwYXR0ZXJuLCB0aW1lem9uZSk7Cn0KCi8vIHBhcnNl
cyBhbiB4bWwgZGF0ZXRpbWUgc3RyaW5nIGFuZCByZXR1cm5zIGEgamF2YS51dGlsLkRhdGUgb2Jq
ZWN0CnB1YmxpYyBzdGF0aWMgamF2YS51dGlsLkNhbGVuZGFyIHBhcnNlKFN0cmluZyBpbnB1dCkg
ewogICAgcmV0dXJuIHBhcnNlKGlucHV0LCAoU3RyaW5nKW51bGwpOwp9CgovLyBwYXJzZXMgYSBk
YXRldGltZSBzdHJpbmcgdGhhdCBhZGhlcmVzIHRvIHRoZSBnaXZlbiBwYXR0ZXJuIGFuZCByZXR1
cm5zIGEgamF2YS51dGlsLkRhdGUgb2JqZWN0CnB1YmxpYyBzdGF0aWMgamF2YS51dGlsLkNhbGVu
ZGFyIHBhcnNlKFN0cmluZyBpbnB1dCwgU3RyaW5nIHBhdHRlcm4pIHRocm93cyBJbGxlZ2FsQXJn
dW1lbnRFeGNlcHRpb24gewogICAgcmV0dXJuIHBhcnNlKGlucHV0LCBwYXR0ZXJuLCAoU3RyaW5n
KW51bGwpOwp9CgovLyBwYXJzZXMgYSBkYXRldGltZSBzdHJpbmcgdGhhdCBhZGhlcmVzIHRvIHRo
ZSBnaXZlbiBwYXR0ZXJuIGFuZCByZXR1cm5zIGEgamF2YS51dGlsLkRhdGUgb2JqZWN0CnB1Ymxp
YyBzdGF0aWMgamF2YS51dGlsLkNhbGVuZGFyIHBhcnNlKFN0cmluZyBpbnB1dCwgU3RyaW5nIHBh
dHRlcm4sIFN0cmluZyB0aW1lem9uZSkgdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiB7
CiAgICBpZiAocGF0dGVybiA9PSBudWxsKSBwYXR0ZXJuID0gREVGQVVMVF9EQVRFVElNRV9QQVRU
RVJOOwoKICAgIGphdmEudXRpbC5DYWxlbmRhciBvdXRwdXQgPSBudWxsOwoKICAgIGlmIChpbnB1
dCAhPSBudWxsKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKHBhdHRlcm4uZXF1YWxz
KCJkYXRldGltZSIpIHx8IHBhdHRlcm4uZXF1YWxzKCJkYXRldGltZS54bWwiKSkgewogICAgICAg
ICAgICAgICAgb3V0cHV0ID0gamF2YXgueG1sLmJpbmQuRGF0YXR5cGVDb252ZXJ0ZXIucGFyc2VE
YXRlVGltZShpbnB1dCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAocGF0dGVybi5lcXVhbHMoImRh
dGV0aW1lLmpkYmMiKSkgewogICAgICAgICAgICAgICAgb3V0cHV0ID0gamF2YS51dGlsLkNhbGVu
ZGFyLmdldEluc3RhbmNlKCk7CiAgICAgICAgICAgICAgICBvdXRwdXQuc2V0VGltZShqYXZhLnNx
bC5UaW1lc3RhbXAudmFsdWVPZihpbnB1dCkpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHBhdHRl
cm4uZXF1YWxzKCJkYXRlIikgfHwgcGF0dGVybi5lcXVhbHMoImRhdGUueG1sIikpIHsKICAgICAg
ICAgICAgICAgIG91dHB1dCA9IGphdmF4LnhtbC5iaW5kLkRhdGF0eXBlQ29udmVydGVyLnBhcnNl
RGF0ZShpbnB1dCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAocGF0dGVybi5lcXVhbHMoInRpbWUi
KSB8fCBwYXR0ZXJuLmVxdWFscygidGltZS54bWwiKSkgewogICAgICAgICAgICAgICAgb3V0cHV0
ID0gamF2YXgueG1sLmJpbmQuRGF0YXR5cGVDb252ZXJ0ZXIucGFyc2VUaW1lKGlucHV0KTsKICAg
ICAgICAgICAgfSBlbHNlIGlmIChwYXR0ZXJuLmVxdWFscygibWlsbGlzZWNvbmRzIikpIHsKICAg
ICAgICAgICAgICAgIG91dHB1dCA9IGphdmEudXRpbC5DYWxlbmRhci5nZXRJbnN0YW5jZSgpOwog
ICAgICAgICAgICAgICAgb3V0cHV0LnNldFRpbWVJbk1pbGxpcyhMb25nLnBhcnNlTG9uZyhpbnB1
dCkpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaWYgKG5hbWVkUGF0dGVy
bnMuY29udGFpbnNLZXkocGF0dGVybikpIHBhdHRlcm4gPSBuYW1lZFBhdHRlcm5zLmdldChwYXR0
ZXJuKTsKCiAgICAgICAgICAgICAgICBqYXZhLnRleHQuRGF0ZUZvcm1hdCBmb3JtYXR0ZXIgPSBu
ZXcgamF2YS50ZXh0LlNpbXBsZURhdGVGb3JtYXQocGF0dGVybik7CiAgICAgICAgICAgICAgICBm
b3JtYXR0ZXIuc2V0TGVuaWVudChmYWxzZSk7CiAgICAgICAgICAgICAgICBvdXRwdXQgPSBqYXZh
LnV0aWwuQ2FsZW5kYXIuZ2V0SW5zdGFuY2UoKTsKICAgICAgICAgICAgICAgIG91dHB1dC5zZXRU
aW1lKGZvcm1hdHRlci5wYXJzZShpbnB1dCkpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBp
ZiAodGltZXpvbmUgIT0gbnVsbCkgb3V0cHV0ID0gdHVuZHJhLnN1cHBvcnQudGltZXpvbmUucmVw
bGFjZShvdXRwdXQsIHRpbWV6b25lKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZXgpIHsK
ICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiVW5wYXJzZWFi
bGUgZGF0ZXRpbWU6ICciICsgaW5wdXQgKyAiJyBkb2VzIG5vdCBjb25mb3JtIHRvIHBhdHRlcm4g
JyIgKyBwYXR0ZXJuICsgIiciKTsKICAgICAgICB9CiAgICB9CgogICAgcmV0dXJuIG91dHB1dDsK
fQoKLy8gcGFyc2VzIGEgZGF0ZXRpbWUgc3RyaW5nIHRoYXQgYWRoZXJlcyB0byB0aGUgZ2l2ZW4g
cGF0dGVybiBhbmQgcmV0dXJucyBhIGphdmEudXRpbC5EYXRlIG9iamVjdApwdWJsaWMgc3RhdGlj
IGphdmEudXRpbC5DYWxlbmRhciBwYXJzZShTdHJpbmcgaW5wdXQsIFN0cmluZ1tdIHBhdHRlcm5z
KSB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIHsKICAgIHJldHVybiBwYXJzZShpbnB1
dCwgcGF0dGVybnMsIChTdHJpbmcpbnVsbCk7Cn0KCi8vIHBhcnNlcyBhIGRhdGV0aW1lIHN0cmlu
ZyB0aGF0IGFkaGVyZXMgdG8gdGhlIGdpdmVuIHBhdHRlcm4gYW5kIHJldHVybnMgYSBqYXZhLnV0
aWwuRGF0ZSBvYmplY3QKcHVibGljIHN0YXRpYyBqYXZhLnV0aWwuQ2FsZW5kYXIgcGFyc2UoU3Ry
aW5nIGlucHV0LCBTdHJpbmdbXSBwYXR0ZXJucywgU3RyaW5nIHRpbWV6b25lKSB0aHJvd3MgSWxs
ZWdhbEFyZ3VtZW50RXhjZXB0aW9uIHsKICAgIGphdmEudXRpbC5DYWxlbmRhciBvdXRwdXQgPSBu
dWxsOwoKICAgIGlmIChwYXR0ZXJucyA9PSBudWxsKSBwYXR0ZXJucyA9IG5ldyBTdHJpbmdbMV07
CgogICAgamF2YS51dGlsLkxpc3Q8VGhyb3dhYmxlPiBleGNlcHRpb25zID0gbmV3IGphdmEudXRp
bC5BcnJheUxpc3Q8VGhyb3dhYmxlPigpOwoKICAgIGlmIChpbnB1dCAhPSBudWxsKSB7CiAgICAg
ICAgYm9vbGVhbiBwYXJzZWQgPSBmYWxzZTsKICAgICAgICBmb3IgKFN0cmluZyBwYXR0ZXJuIDog
cGF0dGVybnMpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIG91dHB1dCA9IHBh
cnNlKGlucHV0LCBwYXR0ZXJuLCB0aW1lem9uZSk7CiAgICAgICAgICAgICAgICBwYXJzZWQgPSB0
cnVlOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlv
biBleCkgewogICAgICAgICAgICAgICAgZXhjZXB0aW9ucy5hZGQoZXgpOwogICAgICAgICAgICB9
CiAgICAgICAgfQogICAgICAgIGlmICghcGFyc2VkKSB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50
RXhjZXB0aW9uKHR1bmRyYS5leGNlcHRpb24ubWVzc2FnZShleGNlcHRpb25zKSk7CiAgICB9Cgog
ICAgcmV0dXJuIG91dHB1dDsKfQoKLy8gcGFyc2VzIGEgbGlzdCBvZiBkYXRldGltZSBzdHJpbmdz
IHRoYXQgYWRoZXJlcyB0byB0aGUgZ2l2ZW4gcGF0dGVybiBhbmQgcmV0dXJucyBhIGphdmEudXRp
bC5EYXRlIG9iamVjdApwdWJsaWMgc3RhdGljIGphdmEudXRpbC5DYWxlbmRhcltdIHBhcnNlKFN0
cmluZ1tdIGlucHV0cywgU3RyaW5nIHBhdHRlcm4pIHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNl
cHRpb24gewogICAgcmV0dXJuIHBhcnNlKGlucHV0cywgcGF0dGVybiwgKFN0cmluZyludWxsKTsK
fQoKLy8gcGFyc2VzIGEgbGlzdCBvZiBkYXRldGltZSBzdHJpbmdzIHRoYXQgYWRoZXJlcyB0byB0
aGUgZ2l2ZW4gcGF0dGVybiBhbmQgcmV0dXJucyBhIGphdmEudXRpbC5EYXRlIG9iamVjdApwdWJs
aWMgc3RhdGljIGphdmEudXRpbC5DYWxlbmRhcltdIHBhcnNlKFN0cmluZ1tdIGlucHV0cywgU3Ry
aW5nIHBhdHRlcm4sIFN0cmluZyB0aW1lem9uZSkgdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2Vw
dGlvbiB7CiAgICBqYXZhLnV0aWwuQ2FsZW5kYXJbXSBvdXRwdXRzID0gbnVsbDsKICAgIGlmIChp
bnB1dHMgIT0gbnVsbCkgewogICAgICAgIG91dHB1dHMgPSBuZXcgamF2YS51dGlsLkNhbGVuZGFy
W2lucHV0cy5sZW5ndGhdOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgaW5wdXRzLmxlbmd0
aDsgaSsrKSB7CiAgICAgICAgICAgIG91dHB1dHNbaV0gPSBwYXJzZShpbnB1dHNbaV0sIHBhdHRl
cm4sIHRpbWV6b25lKTsKICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gb3V0cHV0czsKfQoKLy8g
cGFyc2VzIGEgbGlzdCBvZiBkYXRldGltZSBzdHJpbmdzIHRoYXQgYWRoZXJlcyB0byB0aGUgZ2l2
ZW4gcGF0dGVybnMgYW5kIHJldHVybnMgYSBqYXZhLnV0aWwuRGF0ZSBvYmplY3QKcHVibGljIHN0
YXRpYyBqYXZhLnV0aWwuQ2FsZW5kYXJbXSBwYXJzZShTdHJpbmdbXSBpbnB1dHMsIFN0cmluZ1td
IHBhdHRlcm5zKSB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIHsKICAgIHJldHVybiBw
YXJzZShpbnB1dHMsIHBhdHRlcm5zLCAoU3RyaW5nKW51bGwpOwp9CgovLyBwYXJzZXMgYSBsaXN0
IG9mIGRhdGV0aW1lIHN0cmluZ3MgdGhhdCBhZGhlcmVzIHRvIHRoZSBnaXZlbiBwYXR0ZXJucyBh
bmQgcmV0dXJucyBhIGphdmEudXRpbC5EYXRlIG9iamVjdApwdWJsaWMgc3RhdGljIGphdmEudXRp
bC5DYWxlbmRhcltdIHBhcnNlKFN0cmluZ1tdIGlucHV0cywgU3RyaW5nW10gcGF0dGVybnMsIFN0
cmluZyB0aW1lem9uZSkgdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiB7CiAgICBqYXZh
LnV0aWwuQ2FsZW5kYXJbXSBvdXRwdXRzID0gbnVsbDsKICAgIGlmIChpbnB1dHMgIT0gbnVsbCkg
ewogICAgICAgIG91dHB1dHMgPSBuZXcgamF2YS51dGlsLkNhbGVuZGFyW2lucHV0cy5sZW5ndGhd
OwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgaW5wdXRzLmxlbmd0aDsgaSsrKSB7CiAgICAg
ICAgICAgIG91dHB1dHNbaV0gPSBwYXJzZShpbnB1dHNbaV0sIHBhdHRlcm5zLCB0aW1lem9uZSk7
CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuIG91dHB1dHM7Cn0KCi8vIHN1YnRyYWN0cyB0aGUg
Z2l2ZW4geG1sIGR1cmF0aW9uIGZyb20gdGhlIGdpdmVuIHhtbCBkYXRldGltZSByZXR1cm5pbmcg
dGhlIHJlc3VsdApwdWJsaWMgc3RhdGljIFN0cmluZyBzdWJ0cmFjdChTdHJpbmcgZGF0ZXRpbWUs
IFN0cmluZyBkdXJhdGlvbikgdGhyb3dzIFNlcnZpY2VFeGNlcHRpb24gewogICAgcmV0dXJuIHN1
YnRyYWN0KGRhdGV0aW1lLCBudWxsLCBkdXJhdGlvbik7Cn0KCi8vIHN1YnRyYWN0cyB0aGUgZ2l2
ZW4geG1sIGR1cmF0aW9uIGZyb20gdGhlIGdpdmVuIHhtbCBkYXRldGltZSByZXR1cm5pbmcgdGhl
IHJlc3VsdApwdWJsaWMgc3RhdGljIFN0cmluZyBzdWJ0cmFjdChTdHJpbmcgZGF0ZXRpbWUsIFN0
cmluZyBkYXRldGltZVBhdHRlcm4sIFN0cmluZyBkdXJhdGlvbikgdGhyb3dzIFNlcnZpY2VFeGNl
cHRpb24gewogICAgcmV0dXJuIHN1YnRyYWN0KGRhdGV0aW1lLCBkYXRldGltZVBhdHRlcm4sIGR1
cmF0aW9uLCBudWxsKTsKfQoKLy8gc3VidHJhY3RzIHRoZSBnaXZlbiB4bWwgZHVyYXRpb24gZnJv
bSB0aGUgZ2l2ZW4geG1sIGRhdGV0aW1lIHJldHVybmluZyB0aGUgcmVzdWx0CnB1YmxpYyBzdGF0
aWMgU3RyaW5nIHN1YnRyYWN0KFN0cmluZyBkYXRldGltZSwgU3RyaW5nIGRhdGV0aW1lUGF0dGVy
biwgU3RyaW5nIGR1cmF0aW9uLCBTdHJpbmcgZHVyYXRpb25QYXR0ZXJuKSB0aHJvd3MgU2Vydmlj
ZUV4Y2VwdGlvbiB7CiAgICByZXR1cm4gZW1pdChzdWJ0cmFjdChwYXJzZShkYXRldGltZSwgZGF0
ZXRpbWVQYXR0ZXJuKSwgdHVuZHJhLmR1cmF0aW9uLnBhcnNlKGR1cmF0aW9uLCBkdXJhdGlvblBh
dHRlcm4pKSwgZGF0ZXRpbWVQYXR0ZXJuKTsKfQoKLy8gc3VidHJhY3RzIHRoZSBnaXZlbiBkdXJh
dGlvbiBmcm9tIHRoZSBnaXZlbiBkYXRldGltZSByZXR1cm5pbmcgdGhlIHJlc3VsdApwdWJsaWMg
c3RhdGljIGphdmEudXRpbC5DYWxlbmRhciBzdWJ0cmFjdChqYXZhLnV0aWwuQ2FsZW5kYXIgY2Fs
ZW5kYXIsIGphdmF4LnhtbC5kYXRhdHlwZS5EdXJhdGlvbiBkdXJhdGlvbikgdGhyb3dzIFNlcnZp
Y2VFeGNlcHRpb24gewogICAgaWYgKGR1cmF0aW9uICE9IG51bGwpIGR1cmF0aW9uID0gZHVyYXRp
b24ubmVnYXRlKCk7CiAgICByZXR1cm4gYWRkKGNhbGVuZGFyLCBkdXJhdGlvbik7Cn0KCi8vIHJl
dHVybnMgdGhlIGN1cnJlbnQgZGF0ZXRpbWUgbWludXMgdGhlIGdpdmVuIFhNTCBkdXJhdGlvbgpw
dWJsaWMgc3RhdGljIFN0cmluZyBlYXJsaWVyKFN0cmluZyBkdXJhdGlvbikgdGhyb3dzIFNlcnZp
Y2VFeGNlcHRpb24gewogICAgcmV0dXJuIGVhcmxpZXIobnVsbCwgZHVyYXRpb24sIG51bGwpOwp9
CgovLyByZXR1cm5zIHRoZSBjdXJyZW50IGRhdGV0aW1lIG1pbnVzIHRoZSBnaXZlbiBkdXJhdGlv
bgpwdWJsaWMgc3RhdGljIFN0cmluZyBlYXJsaWVyKFN0cmluZyBkdXJhdGlvbiwgU3RyaW5nIGR1
cmF0aW9uUGF0dGVybikgdGhyb3dzIFNlcnZpY2VFeGNlcHRpb24gewogICAgcmV0dXJuIGVhcmxp
ZXIobnVsbCwgZHVyYXRpb24sIGR1cmF0aW9uUGF0dGVybik7Cn0KCi8vIHJldHVybnMgdGhlIGN1
cnJlbnQgZGF0ZXRpbWUgbWludXMgdGhlIGdpdmVuIGR1cmF0aW9uCnB1YmxpYyBzdGF0aWMgU3Ry
aW5nIGVhcmxpZXIoU3RyaW5nIGRhdGV0aW1lUGF0dGVybiwgU3RyaW5nIGR1cmF0aW9uLCBTdHJp
bmcgZHVyYXRpb25QYXR0ZXJuKSB0aHJvd3MgU2VydmljZUV4Y2VwdGlvbiB7CiAgICByZXR1cm4g
ZWFybGllcihkYXRldGltZVBhdHRlcm4sIGR1cmF0aW9uLCBkdXJhdGlvblBhdHRlcm4sIG51bGwp
Owp9CgovLyByZXR1cm5zIHRoZSBjdXJyZW50IGRhdGV0aW1lIG1pbnVzIHRoZSBnaXZlbiBkdXJh
dGlvbgpwdWJsaWMgc3RhdGljIFN0cmluZyBlYXJsaWVyKFN0cmluZyBkYXRldGltZVBhdHRlcm4s
IFN0cmluZyBkdXJhdGlvbiwgU3RyaW5nIGR1cmF0aW9uUGF0dGVybiwgU3RyaW5nIHRpbWV6b25l
KSB0aHJvd3MgU2VydmljZUV4Y2VwdGlvbiB7CiAgICByZXR1cm4gZW1pdChlYXJsaWVyKHR1bmRy
YS5kdXJhdGlvbi5wYXJzZShkdXJhdGlvbiwgZHVyYXRpb25QYXR0ZXJuKSksIGRhdGV0aW1lUGF0
dGVybiwgdGltZXpvbmUpOwp9CgovLyByZXR1cm5zIHRoZSBjdXJyZW50IGRhdGV0aW1lIG1pbnVz
IHRoZSBnaXZlbiBkdXJhdGlvbgpwdWJsaWMgc3RhdGljIGphdmEudXRpbC5DYWxlbmRhciBlYXJs
aWVyKGphdmF4LnhtbC5kYXRhdHlwZS5EdXJhdGlvbiBkdXJhdGlvbikgdGhyb3dzIFNlcnZpY2VF
eGNlcHRpb24gewogICAgcmV0dXJuIHN1YnRyYWN0KGphdmEudXRpbC5DYWxlbmRhci5nZXRJbnN0
YW5jZSgpLCBkdXJhdGlvbik7Cn0KCi8vIHJldHVybnMgdGhlIGN1cnJlbnQgZGF0ZXRpbWUgcGx1
cyB0aGUgZ2l2ZW4gWE1MIGR1cmF0aW9uCnB1YmxpYyBzdGF0aWMgU3RyaW5nIGxhdGVyKFN0cmlu
ZyBkdXJhdGlvbikgdGhyb3dzIFNlcnZpY2VFeGNlcHRpb24gewogICAgcmV0dXJuIGxhdGVyKG51
bGwsIGR1cmF0aW9uLCBudWxsKTsKfQoKLy8gcmV0dXJucyB0aGUgY3VycmVudCBkYXRldGltZSBw
bHVzIHRoZSBnaXZlbiBkdXJhdGlvbgpwdWJsaWMgc3RhdGljIFN0cmluZyBsYXRlcihTdHJpbmcg
ZHVyYXRpb24sIFN0cmluZyBkdXJhdGlvblBhdHRlcm4pIHRocm93cyBTZXJ2aWNlRXhjZXB0aW9u
IHsKICAgIHJldHVybiBsYXRlcihudWxsLCBkdXJhdGlvbiwgZHVyYXRpb25QYXR0ZXJuKTsKfQoK
Ly8gcmV0dXJucyB0aGUgY3VycmVudCBkYXRldGltZSBwbHVzIHRoZSBnaXZlbiBkdXJhdGlvbgpw
dWJsaWMgc3RhdGljIFN0cmluZyBsYXRlcihTdHJpbmcgZGF0ZXRpbWVQYXR0ZXJuLCBTdHJpbmcg
ZHVyYXRpb24sIFN0cmluZyBkdXJhdGlvblBhdHRlcm4pIHRocm93cyBTZXJ2aWNlRXhjZXB0aW9u
IHsKICAgIHJldHVybiBsYXRlcihkYXRldGltZVBhdHRlcm4sIGR1cmF0aW9uLCBkdXJhdGlvblBh
dHRlcm4sIG51bGwpOwp9CgovLyByZXR1cm5zIHRoZSBjdXJyZW50IGRhdGV0aW1lIHBsdXMgdGhl
IGdpdmVuIGR1cmF0aW9uCnB1YmxpYyBzdGF0aWMgU3RyaW5nIGxhdGVyKFN0cmluZyBkYXRldGlt
ZVBhdHRlcm4sIFN0cmluZyBkdXJhdGlvbiwgU3RyaW5nIGR1cmF0aW9uUGF0dGVybiwgU3RyaW5n
IHRpbWV6b25lKSB0aHJvd3MgU2VydmljZUV4Y2VwdGlvbiB7CiAgICByZXR1cm4gZW1pdChsYXRl
cih0dW5kcmEuZHVyYXRpb24ucGFyc2UoZHVyYXRpb24sIGR1cmF0aW9uUGF0dGVybikpLCBkYXRl
dGltZVBhdHRlcm4sIHRpbWV6b25lKTsKfQoKLy8gcmV0dXJucyB0aGUgY3VycmVudCBkYXRldGlt
ZSBwbHVzIHRoZSBnaXZlbiBkdXJhdGlvbgpwdWJsaWMgc3RhdGljIGphdmEudXRpbC5DYWxlbmRh
ciBsYXRlcihqYXZheC54bWwuZGF0YXR5cGUuRHVyYXRpb24gZHVyYXRpb24pIHRocm93cyBTZXJ2
aWNlRXhjZXB0aW9uIHsKICAgIHJldHVybiBhZGQoamF2YS51dGlsLkNhbGVuZGFyLmdldEluc3Rh
bmNlKCksIGR1cmF0aW9uKTsKfQoKLy8gcmV0dXJucyB0aGUgbGFyZ2VzdCBkYXRldGltZSBmcm9t
IHRoZSBnaXZlbiBsaXN0IG9mIGRhdGV0aW1lIHN0cmluZ3MKcHVibGljIHN0YXRpYyBTdHJpbmcg
bWF4aW11bShTdHJpbmdbXSBkYXRldGltZXMsIFN0cmluZyBwYXR0ZXJuKSB7CiAgICBpZiAoZGF0
ZXRpbWVzID09IG51bGwgfHwgZGF0ZXRpbWVzLmxlbmd0aCA9PSAwKSByZXR1cm4gbnVsbDsKCiAg
ICBqYXZhLnV0aWwuQ2FsZW5kYXJbXSBjYWxlbmRhcnMgPSBwYXJzZShkYXRldGltZXMsIHBhdHRl
cm4pOwogICAgamF2YS51dGlsLlNvcnRlZFNldDxqYXZhLnV0aWwuQ2FsZW5kYXI+IHNldCA9IG5l
dyBqYXZhLnV0aWwuVHJlZVNldDxqYXZhLnV0aWwuQ2FsZW5kYXI+KGphdmEudXRpbC5BcnJheXMu
YXNMaXN0KGNhbGVuZGFycykpOwogICAgcmV0dXJuIGVtaXQoc2V0Lmxhc3QoKSwgcGF0dGVybik7
Cn0KCi8vIHJldHVybnMgdGhlIHNtYWxsZXN0IGRhdGV0aW1lIGZyb20gdGhlIGdpdmVuIGxpc3Qg
b2YgZGF0ZXRpbWUgc3RyaW5ncwpwdWJsaWMgc3RhdGljIFN0cmluZyBtaW5pbXVtKFN0cmluZ1td
IGRhdGV0aW1lcywgU3RyaW5nIHBhdHRlcm4pIHsKICAgIGlmIChkYXRldGltZXMgPT0gbnVsbCB8
fCBkYXRldGltZXMubGVuZ3RoID09IDApIHJldHVybiBudWxsOwoKICAgIGphdmEudXRpbC5DYWxl
bmRhcltdIGNhbGVuZGFycyA9IHBhcnNlKGRhdGV0aW1lcywgcGF0dGVybik7CiAgICBqYXZhLnV0
aWwuU29ydGVkU2V0PGphdmEudXRpbC5DYWxlbmRhcj4gc2V0ID0gbmV3IGphdmEudXRpbC5UcmVl
U2V0PGphdmEudXRpbC5DYWxlbmRhcj4oamF2YS51dGlsLkFycmF5cy5hc0xpc3QoY2FsZW5kYXJz
KSk7CiAgICByZXR1cm4gZW1pdChzZXQuZmlyc3QoKSwgcGF0dGVybik7Cn0=</value>
  <value name="encodeutf8">true</value>
  <value name="extends"></value>
  <array name="implements" type="value" depth="1">
  </array>
  <array name="imports" type="value" depth="1">
    <value>permafrost.tundra.lang.BooleanHelper</value>
    <value>permafrost.tundra.time.DateTimeHelper</value>
  </array>
</Values>
