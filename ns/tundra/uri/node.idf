<?xml version="1.0" encoding="UTF-8"?>

<Values version="2.0">
  <value name="node_type">interface</value>
  <value name="node_nsName">tundra.uri</value>
  <value name="encodeutf8">true</value>
  <value name="shared">cHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgREVGQVVMVF9DSEFSQUNURVJfRU5DT0RJTkcgPSAi
VVMtQVNDSUkiOwoKLy8gcGFyc2VzIGEgVVJJIHN0cmluZyBpbnRvIGFuIElEYXRhIHJlcHJlc2Vu
dGF0aW9uCnB1YmxpYyBzdGF0aWMgSURhdGEgcGFyc2UoU3RyaW5nIGlucHV0KSB0aHJvd3MgU2Vy
dmljZUV4Y2VwdGlvbiB7CiAgaWYgKGlucHV0ID09IG51bGwpIHJldHVybiBudWxsOwoKICAvLyB0
cmVhdCBXaW5kb3dzIFVOQyBmaWxlIFVSSXMgYXMgc2VydmVyLWJhc2VkIHJhdGhlciB0aGFuIHBh
dGgtYmFzZWQKICBpZiAoaW5wdXQudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKCJmaWxlOi8vLy8i
KSkgewogICAgaW5wdXQgPSAiZmlsZTovLyIgKyBpbnB1dC5zdWJzdHJpbmcoOSwgaW5wdXQubGVu
Z3RoKCkpOwogIH0KCiAgSURhdGEgb3V0cHV0ID0gSURhdGFGYWN0b3J5LmNyZWF0ZSgpOwogIElE
YXRhQ3Vyc29yIG9jID0gb3V0cHV0LmdldEN1cnNvcigpOwoKICB0cnkgewogICAgamF2YS5uZXQu
VVJJIHVyaSA9IG5ldyBqYXZhLm5ldC5VUkkoaW5wdXQpOwoJdXJpLm5vcm1hbGl6ZSgpOwogICAg
CiAgICBTdHJpbmcgc2NoZW1lID0gdXJpLmdldFNjaGVtZSgpOwogICAgLy8gc2NoZW1lcyBhcmUg
Y2FzZS1pbnNlbnNpdGl2ZSwgYWNjb3JkaW5nIHRvIFJGQyAyMzk2CiAgICBpZiAoc2NoZW1lICE9
IG51bGwpIHNjaGVtZSA9IHNjaGVtZS50b0xvd2VyQ2FzZSgpOwogICAgaWYgKHNjaGVtZSAhPSBu
dWxsKSBJRGF0YVV0aWwucHV0KG9jLCAic2NoZW1lIiwgc2NoZW1lKTsKCiAgICBTdHJpbmcgcXVl
cnkgPSBudWxsOwogICAgU3RyaW5nIHNzcCA9IHVyaS5nZXRTY2hlbWVTcGVjaWZpY1BhcnQoKTsK
CiAgICBpZiAodXJpLmlzT3BhcXVlKCkpIHsgCiAgICAgIGlmIChzc3AuY29udGFpbnMoIj8iKSkg
ewogICAgICAgIHF1ZXJ5ID0gc3NwLnN1YnN0cmluZyhzc3AuaW5kZXhPZigiPyIpICsgMSwgc3Nw
Lmxlbmd0aCgpKTsKICAgICAgICBzc3AgPSBzc3Auc3Vic3RyaW5nKDAsIHNzcC5pbmRleE9mKCI/
IikpOwogICAgICB9CiAgICAgIGlmIChzc3AgIT0gbnVsbCkgSURhdGFVdGlsLnB1dChvYywgImJv
ZHkiLCBzc3ApOwogICAgfSBlbHNlIHsKICAgICAgU3RyaW5nIGF1dGhvcml0eSA9IHVyaS5nZXRB
dXRob3JpdHkoKTsKICAgICAgaWYgKGF1dGhvcml0eSAhPSBudWxsKSB7CiAgICAgICAgSURhdGEg
c2VydmVyID0gSURhdGFGYWN0b3J5LmNyZWF0ZSgpOwogICAgICAgIElEYXRhQ3Vyc29yIHNjID0g
c2VydmVyLmdldEN1cnNvcigpOwoKICAgICAgICAvLyBwYXJzZSB1c2VyLWluZm8gY29tcG9uZW50
IGFjY29yZGluZyB0byB0aGUgZm9ybWF0IHVzZXI6W3Bhc3N3b3JkXQogICAgICAgIFN0cmluZyB1
c2VyID0gdXJpLmdldFVzZXJJbmZvKCk7CiAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gbnVsbDsK
ICAgICAgICBTdHJpbmcgdXNlckluZm9TZXBhcmF0b3IgPSAiOiI7CiAgICAgICAgaWYgKHVzZXIg
IT0gbnVsbCAmJiB1c2VyLmNvbnRhaW5zKHVzZXJJbmZvU2VwYXJhdG9yKSkgewogICAgICAgICAg
cGFzc3dvcmQgPSB1c2VyLnN1YnN0cmluZyh1c2VyLmluZGV4T2YodXNlckluZm9TZXBhcmF0b3Ip
ICsgMSwgdXNlci5sZW5ndGgoKSk7CiAgICAgICAgICB1c2VyID0gdXNlci5zdWJzdHJpbmcoMCwg
dXNlci5pbmRleE9mKHVzZXJJbmZvU2VwYXJhdG9yKSk7CiAgICAgICAgfQogICAgICAgIGlmICh1
c2VyICE9IG51bGwpIElEYXRhVXRpbC5wdXQoc2MsICJ1c2VyIiwgdXNlcik7CiAgICAgICAgaWYg
KHBhc3N3b3JkICE9IG51bGwpIElEYXRhVXRpbC5wdXQoc2MsICJwYXNzd29yZCIsIHBhc3N3b3Jk
KTsKCiAgICAgICAgLy8gaG9zdHMgYXJlIGNhc2UtaW5zZW5zaXRpdmUsIGFjY29yZGluZyB0byBS
RkMgMjM5NgogICAgICAgIFN0cmluZyBob3N0ID0gdXJpLmdldEhvc3QoKTsKICAgICAgICBpZiAo
aG9zdCAhPSBudWxsKSBJRGF0YVV0aWwucHV0KHNjLCAiaG9zdCIsIGhvc3QudG9Mb3dlckNhc2Uo
KSk7CgogICAgICAgIC8vIGlmIHBvcnQgaXMgLTEsIHRoZW4gaXQgd2Fzbid0IHNwZWNpZmllZCBp
biB0aGUgVVJJCiAgICAgICAgaW50IHBvcnQgPSB1cmkuZ2V0UG9ydCgpOwogICAgICAgIGlmIChw
b3J0ID49IDApIElEYXRhVXRpbC5wdXQoc2MsICJwb3J0IiwgIiIgKyB1cmkuZ2V0UG9ydCgpKTsK
CiAgICAgICAgc2MuZGVzdHJveSgpOwoKICAgICAgICAvLyBpZiBob3N0IGlzIG51bGwsIHRoZW4g
dGhpcyBVUkkgbXVzdCBiZSByZWdpc3RyeS1iYXNlZAogICAgICAgIElEYXRhIGF1dGhvcml0eURv
Y3VtZW50ID0gSURhdGFGYWN0b3J5LmNyZWF0ZSgpOwogICAgICAgIElEYXRhQ3Vyc29yIGFjID0g
YXV0aG9yaXR5RG9jdW1lbnQuZ2V0Q3Vyc29yKCk7CiAgICAgICAgaWYgKGhvc3QgPT0gbnVsbCkg
ewogICAgICAgICAgSURhdGFVdGlsLnB1dChhYywgInJlZ2lzdHJ5IiwgYXV0aG9yaXR5KTsgCiAg
ICAgICAgfSBlbHNlIHsKICAgICAgICAgIElEYXRhVXRpbC5wdXQoYWMsICJzZXJ2ZXIiLCBzZXJ2
ZXIpOyAgCiAgICAgICAgfQogICAgICAgIGFjLmRlc3Ryb3koKTsKCiAgICAgICAgSURhdGFVdGls
LnB1dChvYywgImF1dGhvcml0eSIsIGF1dGhvcml0eURvY3VtZW50KTsKICAgICAgfQoKICAgICAg
U3RyaW5nIHBhdGggPSB1cmkuZ2V0UGF0aCgpOwogICAgICBpZiAocGF0aC5zdGFydHNXaXRoKCIv
IikpIHBhdGggPSBwYXRoLnN1YnN0cmluZygxLCBwYXRoLmxlbmd0aCgpKTsKICAgICAgU3RyaW5n
W10gcGF0aHMgPSBwYXRoLnNwbGl0KCIvIik7CiAgICAgIAogICAgICBTdHJpbmcgZmlsZSA9IG51
bGw7CiAgICAgIGlmICghcGF0aC5lbmRzV2l0aCgiLyIpKSB7CiAgICAgICAgZmlsZSA9IHR1bmRy
YS5saXN0Lm9iamVjdC5nZXQocGF0aHMsIC0xKTsgCiAgICAgICAgcGF0aHMgPSB0dW5kcmEubGlz
dC5vYmplY3QuZHJvcChwYXRocywgLTEpOwogICAgICB9CgogICAgICBpZiAocGF0aHMgIT0gbnVs
bCAmJiBwYXRocy5sZW5ndGggPiAwKSBJRGF0YVV0aWwucHV0KG9jLCAicGF0aCIsIHBhdGhzKTsK
ICAgICAgaWYgKGZpbGUgIT0gbnVsbCAmJiAhZmlsZS5lcXVhbHMoIiIpKSBJRGF0YVV0aWwucHV0
KG9jLCAiZmlsZSIsIGZpbGUpOwoKICAgICAgcXVlcnkgPSB1cmkuZ2V0UXVlcnkoKTsKICAgIH0K
ICAgIElEYXRhIHF1ZXJ5RG9jdW1lbnQgPSB0dW5kcmEudXJpLnF1ZXJ5LnBhcnNlKHF1ZXJ5LCBm
YWxzZSk7CiAgICBpZiAocXVlcnlEb2N1bWVudCAhPSBudWxsKSBJRGF0YVV0aWwucHV0KG9jLCAi
cXVlcnkiLCBxdWVyeURvY3VtZW50KTsKCiAgICBTdHJpbmcgZnJhZ21lbnQgPSB1cmkuZ2V0RnJh
Z21lbnQoKTsKICAgIGlmIChmcmFnbWVudCAhPSBudWxsKSBJRGF0YVV0aWwucHV0KG9jLCAiZnJh
Z21lbnQiLCBmcmFnbWVudCk7CgogICAgSURhdGFVdGlsLnB1dChvYywgImFic29sdXRlPyIsICIi
ICsgdXJpLmlzQWJzb2x1dGUoKSk7CiAgICBJRGF0YVV0aWwucHV0KG9jLCAib3BhcXVlPyIsICIi
ICsgdXJpLmlzT3BhcXVlKCkpOwogIH0gY2F0Y2goamF2YS5uZXQuVVJJU3ludGF4RXhjZXB0aW9u
IGV4KSB7CiAgICB0dW5kcmEuZXhjZXB0aW9uLnJhaXNlKGV4KTsKICB9IGZpbmFsbHkgewogICAg
b2MuZGVzdHJveSgpOwogIH0KCiAgcmV0dXJuIG91dHB1dDsKfQoKLy8gZW1pdHMgYSBVUkkgYXMg
YSBzdHJpbmcKcHVibGljIHN0YXRpYyBTdHJpbmcgZW1pdChJRGF0YSBpbnB1dCwgYm9vbGVhbiB3
aGF0ZXZlcikgdGhyb3dzIFNlcnZpY2VFeGNlcHRpb24gewogIGlmIChpbnB1dCA9PSBudWxsKSBy
ZXR1cm4gbnVsbDsKCiAgU3RyaW5nIG91dHB1dCA9IG51bGw7CiAgSURhdGFDdXJzb3IgY3Vyc29y
ID0gaW5wdXQuZ2V0Q3Vyc29yKCk7CgogIHRyeSB7CiAgICBqYXZhLm5ldC5VUkkgdXJpID0gbnVs
bDsKICAgIFN0cmluZyB0eXBlID0gSURhdGFVdGlsLmdldFN0cmluZyhjdXJzb3IsICJ0eXBlIik7
CiAgICAKICAgIFN0cmluZyBzY2hlbWUgPSBJRGF0YVV0aWwuZ2V0U3RyaW5nKGN1cnNvciwgInNj
aGVtZSIpOwogICAgLy8gc2NoZW1lcyBhcmUgY2FzZS1pbnNlbnNpdGl2ZSwgYWNjb3JkaW5nIHRv
IFJGQyAyMzk2CiAgICBpZiAoc2NoZW1lICE9IG51bGwpIHNjaGVtZSA9IHNjaGVtZS50b0xvd2Vy
Q2FzZSgpOwoKICAgIFN0cmluZyBmcmFnbWVudCA9IElEYXRhVXRpbC5nZXRTdHJpbmcoY3Vyc29y
LCAiZnJhZ21lbnQiKTsKICAgIElEYXRhIHF1ZXJ5RG9jdW1lbnQgPSBJRGF0YVV0aWwuZ2V0SURh
dGEoY3Vyc29yLCAicXVlcnkiKTsKICAgIFN0cmluZyBxdWVyeSA9IHR1bmRyYS51cmkucXVlcnku
ZW1pdChxdWVyeURvY3VtZW50LCB0cnVlKTsKCiAgICBTdHJpbmcgYm9keSA9IElEYXRhVXRpbC5n
ZXRTdHJpbmcoY3Vyc29yLCAiYm9keSIpOwogICAgSURhdGEgYXV0aG9yaXR5ID0gSURhdGFVdGls
LmdldElEYXRhKGN1cnNvciwgImF1dGhvcml0eSIpOwogICAgU3RyaW5nW10gcGF0aHMgPSBJRGF0
YVV0aWwuZ2V0U3RyaW5nQXJyYXkoY3Vyc29yLCAicGF0aCIpOwogICAgU3RyaW5nIGZpbGUgPSBJ
RGF0YVV0aWwuZ2V0U3RyaW5nKGN1cnNvciwgImZpbGUiKTsKCiAgICBpZiAoYm9keSA9PSBudWxs
ICYmICEoYXV0aG9yaXR5ID09IG51bGwgJiYgcGF0aHMgPT0gbnVsbCAmJiBmaWxlID09IG51bGwp
KSB7CiAgICAgIC8vIGNyZWF0ZSBhbiBoaWVyYXJjaGljYWwgVVJJCiAgICAgIFN0cmluZyBwYXRo
ID0gIiI7CiAgICAgIGlmIChwYXRocyAhPSBudWxsKSB7CiAgICAgICAgcGF0aCA9ICIvIiArIHR1
bmRyYS5saXN0Lm9iamVjdC5qb2luKHBhdGhzLCAiLyIpOwogICAgICB9CiAgICAgIHBhdGggPSBw
YXRoICsgIi8iOwogICAgICBpZiAoZmlsZSAhPSBudWxsKSB7CiAgICAgICAgcGF0aCA9IHBhdGgg
KyBmaWxlOwogICAgICB9CiAgCiAgICAgIGlmIChhdXRob3JpdHkgPT0gbnVsbCkgewogICAgICAg
IHVyaSA9IG5ldyBqYXZhLm5ldC5VUkkoc2NoZW1lLCBudWxsLCBwYXRoLCBudWxsLCBudWxsKTsK
ICAgICAgfSBlbHNlIHsKICAgICAgICBJRGF0YUN1cnNvciBhYyA9IGF1dGhvcml0eS5nZXRDdXJz
b3IoKTsKICAgICAgICBTdHJpbmcgcmVnaXN0cnkgPSBJRGF0YVV0aWwuZ2V0U3RyaW5nKGFjLCAi
cmVnaXN0cnkiKTsKICAgICAgICBJRGF0YSBzZXJ2ZXIgPSBJRGF0YVV0aWwuZ2V0SURhdGEoYWMs
ICJzZXJ2ZXIiKTsKICAgICAgICBhYy5kZXN0cm95KCk7CgogICAgICAgIGlmIChyZWdpc3RyeSA9
PSBudWxsKSB7CiAgICAgICAgICBJRGF0YUN1cnNvciBzYyA9IHNlcnZlci5nZXRDdXJzb3IoKTsK
ICAgICAgICAgIFN0cmluZyBob3N0ID0gSURhdGFVdGlsLmdldFN0cmluZyhzYywgImhvc3QiKTsK
ICAgICAgICAgIC8vIGhvc3RzIGFyZSBjYXNlLWluc2Vuc2l0aXZlLCBhY2NvcmRpbmcgdG8gUkZD
IDIzOTYKICAgICAgICAgIGlmIChob3N0ICE9IG51bGwpIGhvc3QgPSBob3N0LnRvTG93ZXJDYXNl
KCk7CgogICAgICAgICAgU3RyaW5nIHBvcnRTdHJpbmcgPSBJRGF0YVV0aWwuZ2V0U3RyaW5nKHNj
LCAicG9ydCIpOwogICAgICAgICAgaW50IHBvcnQgPSAtMTsKICAgICAgICAgIGlmIChwb3J0U3Ry
aW5nICE9IG51bGwpIHBvcnQgPSBJbnRlZ2VyLnBhcnNlSW50KHBvcnRTdHJpbmcpOwoKICAgICAg
ICAgIFN0cmluZyB1c2VyaW5mbyA9IElEYXRhVXRpbC5nZXRTdHJpbmcoc2MsICJ1c2VyIik7CiAg
ICAgICAgICBTdHJpbmcgcGFzc3dvcmQgPSBJRGF0YVV0aWwuZ2V0U3RyaW5nKHNjLCAicGFzc3dv
cmQiKTsKICAgICAgICAgIGlmIChwYXNzd29yZCAhPSBudWxsKSB1c2VyaW5mbyA9IHVzZXJpbmZv
ICsgIjoiICsgcGFzc3dvcmQ7CgogICAgICAgICAgc2MuZGVzdHJveSgpOwogICAgICAgICAgdXJp
ID0gbmV3IGphdmEubmV0LlVSSShzY2hlbWUsIHVzZXJpbmZvLCBob3N0LCBwb3J0LCBwYXRoLCBu
dWxsLCBudWxsKTsgIAogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB1cmkgPSBuZXcgamF2YS5u
ZXQuVVJJKHNjaGVtZSwgcmVnaXN0cnksIHBhdGgsIG51bGwsIG51bGwpOwogICAgICAgIH0KICAg
ICAgfQogICAgfSBlbHNlIHsKICAgICAgdXJpID0gbmV3IGphdmEubmV0LlVSSShzY2hlbWUsIGJv
ZHksIG51bGwpOwogICAgfQogICAgb3V0cHV0ID0gdXJpLm5vcm1hbGl6ZSgpLnRvQVNDSUlTdHJp
bmcoKTsKICAgIGlmIChxdWVyeSAhPSBudWxsKSBvdXRwdXQgPSBvdXRwdXQgKyAiPyIgKyBxdWVy
eTsKICAgIGlmIChmcmFnbWVudCAhPSBudWxsKSBvdXRwdXQgPSBvdXRwdXQgKyAiIyIgKyB0dW5k
cmEudXJpLmVuY29kZShmcmFnbWVudCk7CgogICAgLy8gc3VwcG9ydCBXaW5kb3dzIFVOQyBmaWxl
IFVSSXMsIGFuZCB3b3JrLWFyb3VuZCBqYXZhIGJ1ZyB3aXRoIAogICAgLy8gZmlsZSBVUklzIHdo
ZXJlIHNjaGVtZSBpcyBmb2xsb3dlZCBieSAnOi8nIHJhdGhlciB0aGFuICc6Ly8nCiAgICBpZiAo
b3V0cHV0LnN0YXJ0c1dpdGgoImZpbGU6IikgJiYgdXJpLmdldEhvc3QoKSA9PSBudWxsKSB7CiAg
ICAgIG91dHB1dCA9ICJmaWxlOi8vIiArIG91dHB1dC5zdWJzdHJpbmcoNSwgb3V0cHV0Lmxlbmd0
aCgpKTsgIAogICAgfQogIH0gY2F0Y2goamF2YS5uZXQuVVJJU3ludGF4RXhjZXB0aW9uIGV4KSB7
CiAgICB0dW5kcmEuZXhjZXB0aW9uLnJhaXNlKGV4KTsKICB9IGZpbmFsbHkgewogICAgY3Vyc29y
LmRlc3Ryb3koKTsgCiAgfQogIAogIHJldHVybiBvdXRwdXQ7Cn0KCi8vIG5vcm1hbGl6ZXMgYSBV
Ukkgc3RyaW5nLCByZWZlciA8aHR0cDovL2RvY3Mub3JhY2xlLmNvbS9qYXZhc2UvNi9kb2NzL2Fw
aS9qYXZhL25ldC9VUkkuaHRtbCNub3JtYWxpemUoKT4KcHVibGljIHN0YXRpYyBTdHJpbmcgbm9y
bWFsaXplKFN0cmluZyBpbnB1dCkgdGhyb3dzIFNlcnZpY2VFeGNlcHRpb24gewogIHJldHVybiBl
bWl0KHBhcnNlKGlucHV0KSwgdHJ1ZSk7Cn0KCi8vIFVSTCBlbmNvZGVzIGEgc3RyaW5nLCByZWZl
ciA8aHR0cDovL2RvY3Mub3JhY2xlLmNvbS9qYXZhc2UvNi9kb2NzL2FwaS9qYXZhL25ldC9VUkxF
bmNvZGVyLmh0bWw+CnB1YmxpYyBzdGF0aWMgU3RyaW5nIGVuY29kZShTdHJpbmcgaW5wdXQpIHRo
cm93cyBTZXJ2aWNlRXhjZXB0aW9uIHsKICByZXR1cm4gZW5jb2RlKGlucHV0LCBERUZBVUxUX0NI
QVJBQ1RFUl9FTkNPRElORyk7Cn0KCi8vIFVSTCBlbmNvZGVzIGEgc3RyaW5nLCByZWZlciA8aHR0
cDovL2RvY3Mub3JhY2xlLmNvbS9qYXZhc2UvNi9kb2NzL2FwaS9qYXZhL25ldC9VUkxFbmNvZGVy
Lmh0bWw+CnB1YmxpYyBzdGF0aWMgU3RyaW5nIGVuY29kZShTdHJpbmcgaW5wdXQsIFN0cmluZyBl
bmNvZGluZykgdGhyb3dzIFNlcnZpY2VFeGNlcHRpb24gewogIGlmIChpbnB1dCA9PSBudWxsKSBy
ZXR1cm4gbnVsbDsKICBpZiAoZW5jb2RpbmcgPT0gbnVsbCkgZW5jb2RpbmcgPSBERUZBVUxUX0NI
QVJBQ1RFUl9FTkNPRElORzsgIAoKICBTdHJpbmcgb3V0cHV0ID0gbnVsbDsKICB0cnkgewogICAg
b3V0cHV0ID0gIGphdmEubmV0LlVSTEVuY29kZXIuZW5jb2RlKGlucHV0LCBlbmNvZGluZykucmVw
bGFjZSgiKyIsICIlMjAiKTsKICB9IGNhdGNoKGphdmEuaW8uVW5zdXBwb3J0ZWRFbmNvZGluZ0V4
Y2VwdGlvbiBleCkgewogICAgdHVuZHJhLmV4Y2VwdGlvbi5yYWlzZShleCk7CiAgfQogIHJldHVy
biBvdXRwdXQ7Cn0KCi8vIFVSTCBkZWNvZGVzIGEgc3RyaW5nLCByZWZlciA8aHR0cDovL2RvY3Mu
b3JhY2xlLmNvbS9qYXZhc2UvNi9kb2NzL2FwaS9qYXZhL25ldC9VUkxEZWNvZGVyLmh0bWw+CnB1
YmxpYyBzdGF0aWMgU3RyaW5nIGRlY29kZShTdHJpbmcgaW5wdXQpIHRocm93cyBTZXJ2aWNlRXhj
ZXB0aW9uIHsKICByZXR1cm4gZGVjb2RlKGlucHV0LCBERUZBVUxUX0NIQVJBQ1RFUl9FTkNPRElO
Ryk7Cn0KCi8vIFVSTCBkZWNvZGVzIGEgc3RyaW5nLCByZWZlciA8aHR0cDovL2RvY3Mub3JhY2xl
LmNvbS9qYXZhc2UvNi9kb2NzL2FwaS9qYXZhL25ldC9VUkxEZWNvZGVyLmh0bWw+CnB1YmxpYyBz
dGF0aWMgU3RyaW5nIGRlY29kZShTdHJpbmcgaW5wdXQsIFN0cmluZyBlbmNvZGluZykgdGhyb3dz
IFNlcnZpY2VFeGNlcHRpb24gewogIGlmIChpbnB1dCA9PSBudWxsKSByZXR1cm4gbnVsbDsKICBp
ZiAoZW5jb2RpbmcgPT0gbnVsbCkgZW5jb2RpbmcgPSBERUZBVUxUX0NIQVJBQ1RFUl9FTkNPRElO
RzsKCiAgU3RyaW5nIG91dHB1dCA9IG51bGw7CiAgdHJ5IHsKICAgIG91dHB1dCA9IGphdmEubmV0
LlVSTERlY29kZXIuZGVjb2RlKGlucHV0LCBlbmNvZGluZyk7CiAgfSBjYXRjaChqYXZhLmlvLlVu
c3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24gZXgpIHsKICAgIHR1bmRyYS5leGNlcHRpb24ucmFp
c2UoZXgpOwogIH0KICByZXR1cm4gb3V0cHV0Owp9CgpwdWJsaWMgc3RhdGljIGNsYXNzIHF1ZXJ5
IHsKICAvLyBwYXJzZXMgYSBxdWVyeSBzdHJpbmcgdXNpbmcgdGhlIEFwYWNoZSBIVFRQIGNsaWVu
dCB1dGlscwogIHB1YmxpYyBzdGF0aWMgSURhdGEgcGFyc2UoU3RyaW5nIGlucHV0LCBib29sZWFu
IGRlY29kZSkgdGhyb3dzIFNlcnZpY2VFeGNlcHRpb24gewogICAgcmV0dXJuIHBhcnNlKGlucHV0
LCBudWxsLCBkZWNvZGUpOwogIH0KCiAgLy8gcGFyc2VzIGEgcXVlcnkgc3RyaW5nIHVzaW5nIHRo
ZSBBcGFjaGUgSFRUUCBjbGllbnQgdXRpbHMKICBwdWJsaWMgc3RhdGljIElEYXRhIHBhcnNlKFN0
cmluZyBpbnB1dCwgU3RyaW5nIGVuY29kaW5nLCBib29sZWFuIGRlY29kZSkgdGhyb3dzIFNlcnZp
Y2VFeGNlcHRpb24gewogICAgaWYgKGlucHV0ID09IG51bGwpIHJldHVybiBudWxsOwogICAgaWYg
KGVuY29kaW5nID09IG51bGwpIGVuY29kaW5nID0gREVGQVVMVF9DSEFSQUNURVJfRU5DT0RJTkc7
CgogICAgSURhdGEgb3V0cHV0ID0gSURhdGFGYWN0b3J5LmNyZWF0ZSgpOwogICAgSURhdGFDdXJz
b3IgY3Vyc29yID0gb3V0cHV0LmdldEN1cnNvcigpOwoKICAgIGZvciAoU3RyaW5nIHBhaXIgOiBp
bnB1dC5zcGxpdCgiJiIpKSB7CiAgICAgIFN0cmluZ1tdIHRva2VucyA9IHBhaXIuc3BsaXQoIj0i
KTsKICAgICAgU3RyaW5nIG5hbWUgPSB0b2tlbnMubGVuZ3RoID4gMCA/IHRva2Vuc1swXSA6ICIi
OwogICAgICBTdHJpbmcgdmFsdWUgPSB0b2tlbnMubGVuZ3RoID4gMSA/IHRva2Vuc1sxXSA6ICIi
OwoKICAgICAgaWYgKGRlY29kZSkgewogICAgICAgIG5hbWUgPSB0dW5kcmEudXJpLmRlY29kZShu
YW1lLCBlbmNvZGluZyk7CiAgICAgICAgdmFsdWUgPSB0dW5kcmEudXJpLmRlY29kZSh2YWx1ZSwg
ZW5jb2RpbmcpOwogICAgICB9CgogICAgICBPYmplY3QgZXhpc3RpbmcgPSBJRGF0YVV0aWwuZ2V0
KGN1cnNvciwgbmFtZSk7CiAgICAgIGlmIChleGlzdGluZyA9PSBudWxsKSB7CiAgICAgICAgSURh
dGFVdGlsLnB1dChjdXJzb3IsIG5hbWUsIHZhbHVlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAv
LyBzdXBwb3J0IGxpc3RzIGluIHF1ZXJ5IHN0cmluZ3M6IGE9MSZhPTImYT0zIHNob3VsZCBiZSBw
YXJzZWQgdG8gYVtdID0geyAxLCAyLCAzIH0KICAgICAgICBTdHJpbmdbXSBhcnJheSA9IG51bGw7
CiAgICAgICAgaWYgKGV4aXN0aW5nIGluc3RhbmNlb2YgU3RyaW5nKSB7CiAgICAgICAgICBhcnJh
eSA9IG5ldyBTdHJpbmdbMl07CiAgICAgICAgICBhcnJheVswXSA9IChTdHJpbmcpZXhpc3Rpbmc7
CiAgICAgICAgICBhcnJheVsxXSA9IHZhbHVlOwogICAgICAgIH0gZWxzZSBpZiAoZXhpc3Rpbmcg
aW5zdGFuY2VvZiBTdHJpbmdbXSkgewogICAgICAgICAgYXJyYXkgPSB0dW5kcmEubGlzdC5vYmpl
Y3QuYXBwZW5kKChTdHJpbmdbXSlleGlzdGluZywgdmFsdWUsIFN0cmluZy5jbGFzcyk7CiAgICAg
ICAgfQogICAgICAgIElEYXRhVXRpbC5wdXQoY3Vyc29yLCBuYW1lLCBhcnJheSk7CiAgICAgIH0g
ICAgICAKICAgIH0KCiAgICBjdXJzb3IuZGVzdHJveSgpOwoKICAgIHJldHVybiBvdXRwdXQ7CiAg
fQoKICAvLyBlbWl0cyBhIHF1ZXJ5IHN0cmluZyBnaXZlbiBhIG5hbWUgYW5kIHZhbHVlCiAgcHVi
bGljIHN0YXRpYyBTdHJpbmcgZW1pdChTdHJpbmcgbmFtZSwgT2JqZWN0IHZhbHVlLCBTdHJpbmcg
ZW5jb2RpbmcsIGJvb2xlYW4gZW5jb2RlKSB0aHJvd3MgU2VydmljZUV4Y2VwdGlvbiB7CiAgICBp
ZiAoZW5jb2RlKSB7CiAgICAgIG5hbWUgPSB0dW5kcmEudXJpLmVuY29kZShuYW1lLCBlbmNvZGlu
Zyk7CiAgICAgIHZhbHVlID0gdHVuZHJhLnVyaS5lbmNvZGUodmFsdWUudG9TdHJpbmcoKSwgZW5j
b2RpbmcpOwogICAgfQogICAgcmV0dXJuIG5hbWUgKyAiPSIgKyB2YWx1ZTsKICB9CgogIC8vIGVt
aXRzIGEgcXVlcnkgc3RyaW5nIGdpdmVuIGEgbmFtZSBhbmQgYXJyYXkgb2YgdmFsdWVzCiAgcHVi
bGljIHN0YXRpYyBTdHJpbmcgZW1pdChTdHJpbmcgbmFtZSwgT2JqZWN0W10gdmFsdWVzLCBTdHJp
bmcgZW5jb2RpbmcsIGJvb2xlYW4gZW5jb2RlKSB0aHJvd3MgU2VydmljZUV4Y2VwdGlvbiB7CiAg
ICBTdHJpbmdCdWlsZGVyIG91dHB1dCA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7CiAgICBmb3IoT2Jq
ZWN0IHZhbHVlIDogdmFsdWVzKSB7CiAgICAgIGlmIChvdXRwdXQubGVuZ3RoKCkgPiAwKSBvdXRw
dXQuYXBwZW5kKCImIik7CiAgICAgIG91dHB1dC5hcHBlbmQoZW1pdChuYW1lLCB2YWx1ZSwgZW5j
b2RpbmcsIGVuY29kZSkpOwogICAgfQogICAgcmV0dXJuIG91dHB1dC50b1N0cmluZygpOwogIH0K
CiAgLy8gZW1pdHMgYSBxdWVyeSBzdHJpbmcgZ2l2ZW4gYW4gSURhdGEgY29udGFpbmluZyBuYW1l
L3ZhbHVlIHBhaXJzCiAgcHVibGljIHN0YXRpYyBTdHJpbmcgZW1pdChJRGF0YSBpbnB1dCwgYm9v
bGVhbiBlbmNvZGUpIHRocm93cyBTZXJ2aWNlRXhjZXB0aW9uIHsKICAgIHJldHVybiBlbWl0KGlu
cHV0LCBudWxsLCBlbmNvZGUpOwogIH0KCiAgLy8gZW1pdHMgYSBxdWVyeSBzdHJpbmcgZ2l2ZW4g
YW4gSURhdGEgY29udGFpbmluZyBuYW1lL3ZhbHVlIHBhaXJzCiAgcHVibGljIHN0YXRpYyBTdHJp
bmcgZW1pdChJRGF0YSBpbnB1dCwgU3RyaW5nIGVuY29kaW5nLCBib29sZWFuIGVuY29kZSkgdGhy
b3dzIFNlcnZpY2VFeGNlcHRpb24gewogICAgaWYgKGlucHV0ID09IG51bGwpIHJldHVybiBudWxs
OwogICAgaWYgKGVuY29kaW5nID09IG51bGwpIGVuY29kaW5nID0gREVGQVVMVF9DSEFSQUNURVJf
RU5DT0RJTkc7CgogICAgU3RyaW5nQnVpbGRlciBvdXRwdXQgPSBuZXcgU3RyaW5nQnVpbGRlcigp
OwoKICAgIElEYXRhQ3Vyc29yIGN1cnNvciA9IGlucHV0LmdldEN1cnNvcigpOwogICAgd2hpbGUo
Y3Vyc29yLm5leHQoKSkgewogICAgICBTdHJpbmcga2V5ID0gY3Vyc29yLmdldEtleSgpOwogICAg
ICBPYmplY3QgdmFsdWUgPSBjdXJzb3IuZ2V0VmFsdWUoKTsKCiAgICAgIGlmICh2YWx1ZSAhPSBu
dWxsKSB7CiAgICAgICAgaWYgKG91dHB1dC5sZW5ndGgoKSA+IDApIG91dHB1dC5hcHBlbmQoIiYi
KTsKICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBPYmplY3RbXSkgewogICAgICAgICAgb3V0
cHV0LmFwcGVuZChlbWl0KGtleSwgKE9iamVjdFtdKXZhbHVlLCBlbmNvZGluZywgZW5jb2RlKSk7
CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG91dHB1dC5hcHBlbmQoZW1pdChrZXksIHZhbHVl
LCBlbmNvZGluZywgZW5jb2RlKSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcmV0dXJu
IG91dHB1dC50b1N0cmluZygpOwogIH0KfQ==</value>
  <value name="extends"></value>
  <array name="implements" type="value" depth="1">
  </array>
  <array name="imports" type="value" depth="1">
  </array>
</Values>
